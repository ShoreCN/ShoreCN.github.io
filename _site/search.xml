<?xml version="1.0" encoding="utf-8"?>
<search>
  
    <entry>
      <title><![CDATA[åŒºå—é“¾ä»£å¸ç®¡ç†]]></title>
      <url>/%E6%9E%B6%E6%9E%84/2023/05/12/Blockchain-token-manager/</url>
      <content type="html"><![CDATA[<p>åŒºå—é“¾ä»£å¸ç®¡ç†</p>

<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>åŒºå—é“¾ä»£å¸ç§ç±»ç¹å¤š, å¦‚ä½•åœ¨é¡¹ç›®é‡Œé¢åˆç†åœ°ç®¡ç†ä»£å¸, è¿™æ˜¯ä¸€ä¸ªé—®é¢˜.<br />
é€šå¸¸æƒ…å†µä¸‹é¡¹ç›®è§„æ¨¡ä¸å¤§, ä»£å¸ç§ç±»ä¹Ÿä¸æ˜¯å¾ˆå¤š, å¯ä»¥ç›´æ¥åœ¨ä»£ç é‡Œé¢ç¡¬ç¼–ç , å‰ç«¯å’Œåç«¯å„è‡ªç‹¬ç«‹ç»´æŠ¤, ä½†æ˜¯è¿™æ ·çš„è¯, é¡¹ç›®çš„å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§å°±æ¯”è¾ƒå·®.<br />
é€šè¿‡è®¾è®¡ä¸€ä¸ªç®€å•çš„ä»£å¸ç®¡ç†æ¨¡å—, å¯ä»¥æœ‰æ•ˆåœ°è§£å†³è¿™ä¸ªé—®é¢˜.</p>

<h2 id="è®¾è®¡æ€è·¯">è®¾è®¡æ€è·¯</h2>
<h3 id="æ˜ç¡®éœ€æ±‚">æ˜ç¡®éœ€æ±‚</h3>
<ol>
  <li>å‡†ç¡®æ€§æœ‰ä¿è¯, ä»£å¸æ•°æ®å‡†ç¡®æ— è¯¯;</li>
  <li>å¯ç»´æŠ¤æ€§å¼º, ç»Ÿä¸€ç®¡ç†ä»£å¸, é¿å…é‡å¤åŠ³åŠ¨ä¸”å®¹æ˜“å‡ºé”™;</li>
  <li>ä¾¿æ·æ€§è¾ƒå¥½, é€šè¿‡è®¾è®¡çµæ´»çš„æ¥å£, å¯ä»¥é€‚åº”ä¸åŒçš„ä¸šåŠ¡åœºæ™¯.</li>
  <li>ç¨³å®šæ€§é«˜, å•æ•°æ®æºå®¹æ˜“å‡ºç°å¼‚å¸¸æ—¶, ä»£å¸æ•°æ®å¯èƒ½ä¼šä¸¢å¤±æˆ–æ— æ³•è¯»å–;</li>
  <li>å¯æ‰©å±•æ€§å¥½, ä»£å¸ç§ç±»å¯ä»¥åŠ¨æ€å¢åŠ , ä»£å¸å±æ€§å¯ä»¥åŠ¨æ€ä¿®æ”¹;</li>
</ol>

<h3 id="è®¾è®¡æ–¹æ¡ˆ">è®¾è®¡æ–¹æ¡ˆ</h3>
<h4 id="æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</h4>
<p>ä»£å¸é€šå¸¸éœ€è¦åŒ…å«ä»¥ä¸‹å±æ€§:</p>
<ul>
  <li>ä»£å¸åç§°</li>
  <li>ä»£å¸ç¬¦å·</li>
  <li>ä»£å¸ç²¾åº¦</li>
  <li>ä»£å¸åˆçº¦åœ°å€</li>
  <li>ä»£å¸å›¾æ ‡</li>
  <li>é“¾ç±»å‹</li>
  <li>åè®®ç±»å‹</li>
</ul>

<p>åœ¨åŒä¸€æ¡é“¾ä¸Š, ä»£å¸ç¬¦å·å¸¸å¸¸æ— æ³•ä¿è¯å”¯ä¸€æ€§, ä¾‹å¦‚: USDT, ä»£å¸åç§°å¯ä»¥ä¿è¯å”¯ä¸€æ€§, ä¾‹å¦‚: Tether USD.<br />
åœ¨ä¸åŒé“¾ä¸Š, ä»£å¸ç¬¦å·ä¹Ÿå¯èƒ½ç›¸åŒ, ä¾‹å¦‚: USDT.<br />
æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†æ¥åŒºåˆ†ä¸åŒé“¾ä¸Šçš„ä»£å¸, è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä»£å¸åç§°+é“¾ç±»å‹æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†.</p>

<h4 id="æ•°æ®å­˜å‚¨">æ•°æ®å­˜å‚¨</h4>
<p>ä»£å¸æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨, é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ¡ˆ:</p>
<ol>
  <li>æ•°æ®åº“</li>
  <li>æ–‡ä»¶</li>
  <li>ç¼“å­˜
å¯¹äºtokenè¿™ç±»å‹çš„æ•°æ®, æ•°æ®åº“å¯ä»¥é€‰æ‹©éå…³ç³»å‹æ•°æ®åº“, ä¾‹å¦‚: mongodb, redisç­‰.
ç¼“å­˜å¯ä»¥é€‰æ‹©æœ¬åœ°å†…å­˜ç¼“å­˜, è§„æ¨¡è¾ƒå¤§çš„è¯, å¯ä»¥é€‰æ‹©åˆ†å¸ƒå¼ç¼“å­˜, ä¾‹å¦‚: redis, memcachedç­‰.</li>
</ol>

<p>ä»…ä½¿ç”¨å•æ•°æ®æºçš„è¯, ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜:</p>
<ol>
  <li>å•æ•°æ®æºå®¹æ˜“å‡ºç°å¼‚å¸¸æ—¶, ä»£å¸æ•°æ®å¯èƒ½ä¼šä¸¢å¤±æˆ–æ— æ³•è¯»å–;</li>
  <li>å•æ•°æ®æºæ— æ³•ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§, ä¾‹å¦‚: ä»£å¸æ•°æ®è¢«æ¶æ„ç¯¡æ”¹, æˆ–è€…æ•°æ®æ›´æ–°ä¸åŒæ­¥ç­‰;</li>
</ol>

<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šæ•°æ®æºçš„æ–¹æ¡ˆ, ä¾‹å¦‚: æ•°æ®åº“+ç¼“å­˜, æ•°æ®åº“+æ–‡ä»¶ç­‰.</p>

<p>ä¸è¿‡å¤šæ•°æ®æºçš„æ–¹æ¡ˆ, ä¼šå­˜åœ¨æ•°æ®åŒæ­¥çš„é—®é¢˜, ä¾‹å¦‚: æ•°æ®åº“+ç¼“å­˜, æ•°æ®åº“ä¸­çš„æ•°æ®è¢«ä¿®æ”¹å, ç¼“å­˜ä¸­çš„æ•°æ®æ²¡æœ‰åŠæ—¶æ›´æ–°, ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´. é€šè¿‡è®¾è®¡ä¸€ä¸ªç®€å•çš„æ•°æ®åŒæ­¥æœºåˆ¶, å¯ä»¥æœ‰æ•ˆåœ°è§£å†³è¿™ä¸ªé—®é¢˜.
åŒæ­¥æœºåˆ¶çš„è®¾è®¡æ€è·¯å¦‚ä¸‹:</p>
<ol>
  <li>æ•°æ®åº“ä¸­çš„æ•°æ®è¢«ä¿®æ”¹å, é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å‘é€æ¶ˆæ¯;</li>
  <li>ç¼“å­˜ä¸­çš„æ•°æ®è®¢é˜…æ¶ˆæ¯é˜Ÿåˆ—, æ”¶åˆ°æ¶ˆæ¯å, æ›´æ–°ç¼“å­˜ä¸­çš„æ•°æ®;</li>
</ol>

<h4 id="æ¥å£è®¾è®¡">æ¥å£è®¾è®¡</h4>
<p>ä»£å¸ç®¡ç†ç³»ç»Ÿçš„æ¥å£è®¾è®¡, é€šå¸¸éœ€è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ–¹é¢:</p>
<ol>
  <li>æ•°æ®åˆå§‹åŒ–</li>
  <li>æ•°æ®çš„è¯»å–</li>
  <li>æ•°æ®çš„æ›´æ–°</li>
  <li>æ•°æ®çš„åˆ é™¤</li>
  <li>æ•°æ®çš„åŒæ­¥</li>
</ol>

<h4 id="å¯¹è±¡è®¾è®¡">å¯¹è±¡è®¾è®¡</h4>

<h2 id="å®ç°æ–¹æ¡ˆ">å®ç°æ–¹æ¡ˆ</h2>
<h3 id="æ•°æ®ç»“æ„-1">æ•°æ®ç»“æ„</h3>
<p>ä»£å¸æ•°æ®çš„åŸºç¡€ç»“æ„å¦‚ä¸‹:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">dataclass</span>
<span class="k">class</span> <span class="nc">Token</span><span class="p">:</span>
    <span class="n">chain</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">token</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">token_addr</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">precision</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">protocol</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">logo</span><span class="p">:</span> <span class="nb">str</span>
</code></pre></div></div>

<h3 id="æ•°æ®å­˜å‚¨-1">æ•°æ®å­˜å‚¨</h3>
<p>ä»£å¸æ•°æ®çš„å­˜å‚¨æ–¹æ¡ˆå¦‚ä¸‹:</p>
<ol>
  <li>æ•°æ®åº“: mongodb</li>
  <li>ç¼“å­˜: LocalCache</li>
</ol>

<h3 id="æ¥å£å®ç°">æ¥å£å®ç°</h3>
<p>ä»£å¸ç®¡ç†ç³»ç»Ÿçš„æ¥å£è®¾è®¡å¦‚ä¸‹:</p>
<ol>
  <li>æ•°æ®åˆå§‹åŒ–: ä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®, å¹¶å†™å…¥ç¼“å­˜, å¦‚æœæ•°æ®åº“ä¸­æ²¡æœ‰æ•°æ®, åˆ™ä»è¯»å–é¢„å…ˆç¡¬ç¼–ç çš„ä»£å¸æ•°æ®, å¹¶å†™å…¥æ•°æ®åº“å’Œç¼“å­˜;</li>
  <li>æ•°æ®çš„è¯»å–: ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®, å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®, åˆ™ä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®, å¹¶å†™å…¥ç¼“å­˜;</li>
  <li>æ•°æ®çš„æ›´æ–°: æ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®, å¹¶é€šçŸ¥ç¼“å­˜æ›´æ–°æ•°æ®;</li>
  <li>æ•°æ®çš„åˆ é™¤: åˆ é™¤æ•°æ®åº“ä¸­çš„æ•°æ®, å¹¶é€šçŸ¥ç¼“å­˜åˆ é™¤æ•°æ®;</li>
  <li>æ•°æ®çš„åŒæ­¥: å®šæ—¶æ£€æŸ¥æ•°æ®åº“å’Œç¼“å­˜ä¸­çš„æ•°æ®æ˜¯å¦ä¸€è‡´, å¦‚æœä¸ä¸€è‡´, åˆ™æ›´æ–°ç¼“å­˜ä¸­çš„æ•°æ®; å®šæ—¶æ£€æŸ¥æ•°æ®åº“ä¸­çš„æ•°æ®å’Œå¤–éƒ¨æ•°æ®(åŒºå—é“¾æµè§ˆå™¨,æœåŠ¡æä¾›å•†ç­‰)æ˜¯å¦ä¸€è‡´, å¦‚æœä¸ä¸€è‡´, åˆ™æ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®;</li>
</ol>

<h3 id="å¯¹è±¡å®ç°">å¯¹è±¡å®ç°</h3>
<p>ä»¥pythonä¸ºä¾‹, ä»£å¸ç®¡ç†ç³»ç»Ÿçš„å¯¹è±¡å¦‚ä¸‹:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CryptoTokenManager</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db</span><span class="p">:</span> <span class="n">Database</span><span class="p">,</span> <span class="n">cache</span><span class="p">:</span> <span class="n">Cache</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">cache</span> <span class="o">=</span> <span class="n">cache</span>

    <span class="k">def</span> <span class="nf">restore</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
        <span class="s">"""æ¢å¤æ•°æ®
        å¤–éƒ¨æ•°æ®(æš‚æ— ) &gt; æ•°æ®åº“ &gt; é»˜è®¤æ•°æ® &gt; å†…å­˜

        Returns:
            list: æ¢å¤çš„æ•°æ®
        """</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">chain</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="s">"""è·å–tokenä¿¡æ¯

        Args:
            token (str): tokenåç§°
            chain (str): é“¾

        Returns:
            dict: tokenä¿¡æ¯
        """</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_token_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s">''</span><span class="p">,</span> <span class="n">chain</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s">''</span><span class="p">,</span> <span class="n">protocol</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s">''</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
        <span class="s">"""è·å–tokenåˆ—è¡¨

        Args:
            token (str, optional): tokenåç§°. Defaults to ''.
            chain (str, optional): é“¾. Defaults to ''.
            protocol (str, optional): åè®®. Defaults to ''.

        Returns:
            list: tokenåˆ—è¡¨
        """</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">add_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="s">"""æ·»åŠ token(æœ¬åœ°)

        Args:
            token_info (dict): tokenä¿¡æ¯

        Returns:
            bool: æ˜¯å¦æ·»åŠ æˆåŠŸ
        """</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">remove_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">chain</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="s">"""ç§»é™¤token(æœ¬åœ°)

        Args:
            token (str): tokenåç§°
            chain (str): é“¾
        
        Returns:
            bool: æ˜¯å¦ç§»é™¤æˆåŠŸ
        """</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="s">"""ä¿å­˜è‡³æ•°æ®åº“

        Returns:
            bool: æ˜¯å¦ä¿å­˜æˆåŠŸ
        """</span>
        <span class="k">pass</span>
    
    <span class="k">def</span> <span class="nf">check_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="s">"""æ£€æŸ¥æ•°æ®æ˜¯å¦æ­£ç¡®

        Returns:
            bool: æ˜¯å¦æ­£ç¡®
        """</span>
        <span class="k">pass</span>
</code></pre></div></div>

<h2 id="æ€è€ƒ">æ€è€ƒğŸ¤”</h2>
<h3 id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</h3>
<p>å› ä¸ºä»£å¸æ•°æ®çš„è¯»å–é¢‘ç‡è¿œè¿œå¤§äºå†™å…¥é¢‘ç‡, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼“å­˜æ¥æé«˜è¯»å–æ€§èƒ½. ä½œä¸ºä¸€ä¸ªç›¸å¯¹é™æ€çš„æ•°æ®, åç»­è¿˜å¯ä»¥è€ƒè™‘é€šè¿‡CDNæ¥æå‡ç½‘ç»œæ¥å£è¡¨ç°.</p>

<h3 id="å®‰å…¨æ€§">å®‰å…¨æ€§</h3>
<p>ä»£å¸æ•°æ®çš„å®‰å…¨æ€§å…³é”®å°±æ˜¯ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§, å…·ä½“æ¥è¯´å°±æ˜¯æ•°æ®çš„éé¢„æœŸç¯¡æ”¹, ä¾‹å¦‚: ä»£å¸æ•°æ®è¢«æ¶æ„ç¯¡æ”¹, æˆ–è€…æ•°æ®æ›´æ–°é”™è¯¯ç­‰.<br />
ä¸è¿‡ä»£å¸ç®¡ç†è™½ç„¶è´¯ç©¿äº†å¤§éƒ¨åˆ†çš„ä¸šåŠ¡æµç¨‹, ä½†æ˜¯é”™è¯¯çš„ä»£å¸åœ°å€é€šå¸¸å¯¼è‡´çš„æ˜¯ä¸šåŠ¡æµç¨‹çš„å¤±è´¥, è€Œä¸æ˜¯é”™è¯¯çš„ä¸šåŠ¡æµç¨‹(ä¾‹å¦‚èµ„äº§æµå‘é”™è¯¯ç›®æ ‡ç­‰), æ‰€ä»¥å¯¹äºå®‰å…¨æ€§çš„æå‡å¯ä»¥æ›´åŠ ä¾§é‡äºå¯†é’¥ç®¡ç†/æ”¶æ¬¾æ–¹ç¡®è®¤ç­‰æ–¹é¢.</p>

<h3 id="åç»­ä¼˜åŒ–æ–¹æ¡ˆ">åç»­ä¼˜åŒ–æ–¹æ¡ˆ</h3>
<ul>
  <li>å¤–éƒ¨æ•°æ®åŒæ­¥</li>
  <li>å¼‚å¸¸å¤„ç†</li>
  <li>å‘Šè­¦æœºåˆ¶</li>
  <li>æ•°æ®å­˜å‚¨ç®€åŒ–</li>
</ul>

]]></content>
      <categories>
        
          <category> æ¶æ„ </category>
        
      </categories>
      <tags>
        
          <tag> åŒºå—é“¾ </tag>
        
          <tag> Python </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[å…¬ç½‘sshè®¿é—®å±€åŸŸç½‘å†…éƒ¨Macä¸»æœº]]></title>
      <url>/%E5%B7%A5%E5%85%B7/2023/01/04/access-mac-host-in-LAN-via-ssh/</url>
      <content type="html"><![CDATA[<h1 id="éœ€æ±‚">éœ€æ±‚</h1>
<p>æˆ‘ä»¬çš„æ—¥å¸¸ç½‘ç»œåº”ç”¨éƒ½æ˜¯åŸºäºå…¬ç½‘IPè¿›è¡Œçš„ï¼Œé‚£ä¹ˆå¦‚æœç”µè„‘å¤„åœ¨äºæŸä¸ªå±€åŸŸç½‘å†…ï¼ˆä¾‹å¦‚å…¬å¸ç½‘ç»œã€æ ¡å›­ç½‘ç»œç­‰æƒ…å†µï¼‰ï¼Œé‚£ä¹ˆå°±å¸¸å¸¸å‡ºç°ä½¿ç”¨å…¬ç½‘IPæ— æ³•è®¿é—®çš„æƒ…å†µã€‚è¦è§£å†³æ­¤é—®é¢˜æ¶‰åŠå¦‚ä¸‹ä¸¤éƒ¨åˆ†é…ç½®ï¼š</p>
<ul>
  <li>Macç«¯å¯åŠ¨sshdæœåŠ¡</li>
  <li>é…ç½®ç«¯å£æ˜ å°„ç”¨ä»¥å†…è®¿é—®å†…ç½‘è®¾å¤‡</li>
</ul>

<hr />

<h1 id="1macç«¯å¯åŠ¨sshdæœåŠ¡">1.Macç«¯å¯åŠ¨sshdæœåŠ¡</h1>

<p>ç³»ç»Ÿç‰ˆæœ¬ï¼šmacOS High Sierra 10.13.1 (17B1003)
macOSç³»ç»Ÿè‡ªå¸¦äº†sshdæœåŠ¡ï¼Œåªéœ€è¦å¯åŠ¨å³å¯ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># å¯åŠ¨sshdæœåŠ¡
sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># åœæ­¢sshdæœåŠ¡
sudo launchctl unload -w /System/Library/LaunchDaemons/ssh.plist
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># æŸ¥çœ‹sshdæœåŠ¡æƒ…å†µ
sudo launchctl list | grep ssh
</code></pre></div></div>

<blockquote>
  <p>æ³¨æ„äº‹é¡¹ï¼š
æ­¤å¤„éœ€è¦æ ¼å¤–æ³¨æ„ï¼Œå¿…é¡»è¦ä½¿ç”¨å…·æœ‰rootæƒé™çš„ç”¨æˆ·å¯åŠ¨sshdæœåŠ¡ï¼Œå¦åˆ™å¯èƒ½ä¼šå› æ— æ³•è®¿é—®ssh keyå¯¼è‡´å®¢æˆ·ç«¯sshè¿æ¥å¤±è´¥
ssh_exchange_identification: Connection closed by remote host</p>
</blockquote>

<blockquote>
  <p>å‚è€ƒèµ„æ–™
https://www.cnblogs.com/EasonJim/p/7173859.html</p>
</blockquote>

<h1 id="2ç«¯å£æ˜ å°„å¤–ç½‘è®¿é—®å±€åŸŸç½‘å†…éƒ¨ä¸»æœº">2.ç«¯å£æ˜ å°„å¤–ç½‘è®¿é—®å±€åŸŸç½‘å†…éƒ¨ä¸»æœº</h1>

<p>ä½äºå…¬å¸ã€æ ¡å›­ç­‰å±€åŸŸç½‘ç¯å¢ƒä¸‹é¢çš„å¤šå°ä¸»æœºï¼Œå…±ç”¨çš„éƒ½æ˜¯ä¸€ä¸ªå…¬ç½‘IPï¼Œ
æ‰€ä»¥å¤–ç½‘ç›´æ¥é€šè¿‡æ­¤å…¬ç½‘IP+ç«¯å£è®¿é—®æŸä¸ªå±€åŸŸç½‘ä¸»æœºå¿…ç„¶ä¼šäº§ç”Ÿæ··ä¹±ï¼Œæ­¤æ—¶å°±éœ€è¦é…ç½®ç«¯å£æ˜ å°„ã€‚</p>

<p>æ­¤å¤„è®¿é—®çš„æ˜¯sshæœåŠ¡ï¼Œç«¯å£å·ä¸º22ï¼Œæ— æ³•ç›´æ¥è®¿é—®ã€‚
é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨å±€åŸŸç½‘å‡ºå£è·¯ç”±å™¨ä¸Šå®šä¹‰ä¸€ä¸ªæœªä½¿ç”¨çš„ç«¯å£å·ï¼ˆä¾‹å¦‚38998ï¼‰ï¼Œæ˜ å°„åˆ°å†…ç½‘ä¸»æœºçš„ç«¯å£22ï¼Œå…·ä½“å¦‚ä¸‹ï¼š
å¤–ç½‘ç»ˆç«¯ &lt;â€“&gt; å±€åŸŸç½‘å‡ºå£è·¯ç”±å™¨38998ç«¯å£ &lt;â€“&gt; å†…ç½‘ä¸»æœº22ç«¯å£</p>

<hr />

<p>å¦‚æ­¤é…ç½®å®Œä¹‹åï¼Œåœ¨å¤–ç½‘å°±å¯ä»¥é€šè¿‡è‡ªå®šä¹‰çš„ç«¯å£å·å’Œå…¬ç½‘IPå°±å¯ä»¥è®¿é—®å†…ç½‘çš„ä¸»æœºäº†</p>

<p><code class="language-plaintext highlighter-rouge">ssh user_name@server_ip -p 38998</code></p>

<p>å¦‚æœéœ€è¦é€šè¿‡sshæ‹·è´æ–‡ä»¶çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨scpå‘½ä»¤</p>

<p><code class="language-plaintext highlighter-rouge">scp -P 38998 src_file user_name@server_ip:dst_file</code></p>
]]></content>
      <categories>
        
          <category> å·¥å…· </category>
        
      </categories>
      <tags>
        
          <tag> ssh </tag>
        
          <tag> macOS </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[vscodeçš„åˆ—ç¼–è¾‘æ¨¡å¼]]></title>
      <url>/%E5%B7%A5%E5%85%B7/2022/11/29/vscode-column-edit-mode/</url>
      <content type="html"><![CDATA[<h2 id="åˆ—ç¼–è¾‘æ¨¡å¼">åˆ—ç¼–è¾‘æ¨¡å¼</h2>
<p>åœ¨åŸæ¥ä½¿ç”¨notepad++çš„æ—¶å€™ï¼Œç»å¸¸ä½¿ç”¨åˆ—ç¼–è¾‘æ¨¡å¼ï¼Œå¯ä»¥å¿«é€Ÿåœ°å¯¹å¤šè¡Œæ–‡æœ¬è¿›è¡Œç¼–è¾‘ã€‚æœ€è¿‘ä½¿ç”¨vscodeï¼Œå‘ç°vscodeä¹Ÿæœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼Œè®°å½•ä¸€ä¸‹ã€‚</p>

<p>ç›®å‰, vscodeæä¾›äº†ä»¥ä¸‹å‡ ç§ä½¿ç”¨åˆ—ç¼–è¾‘æ¨¡å¼çš„æ–¹å¼:</p>
<h2 id="é¼ æ ‡æ“ä½œ-å¤šå…‰æ ‡">é¼ æ ‡æ“ä½œ: å¤šå…‰æ ‡</h2>
<ol>
  <li>å°†å…‰æ ‡ç§»åŠ¨åˆ°éœ€è¦ç¼–è¾‘çš„æ–‡æœ¬ä½ç½®;</li>
  <li>æŒ‰ä½é”®ç›˜ä¸Šçš„<code class="language-plaintext highlighter-rouge">Option</code>é”®;</li>
  <li>ç‚¹å‡»é¼ æ ‡å·¦é”®, é€‰æ‹©éœ€è¦ç¼–è¾‘çš„æ–‡æœ¬ä½ç½®;</li>
  <li>è¿™æ ·æ“ä½œä¼šäº§ç”Ÿå¤šä¸ªå…‰æ ‡, é€‰æ‹©å®Œæˆä¹‹åå³å¯åŒæ—¶ç¼–è¾‘å¤šè¡Œæ–‡æœ¬;</li>
</ol>

<h2 id="é¼ æ ‡æ“ä½œ-æ¡†é€‰">é¼ æ ‡æ“ä½œ: æ¡†é€‰</h2>
<ol>
  <li>å°†å…‰æ ‡ç§»åŠ¨åˆ°éœ€è¦ç¼–è¾‘çš„æ–‡æœ¬çš„èµ·å§‹ä½ç½®;</li>
  <li>æŒ‰ä½é”®ç›˜ä¸Šçš„<code class="language-plaintext highlighter-rouge">Option</code>å’Œ<code class="language-plaintext highlighter-rouge">Shift</code>é”®;</li>
  <li>æŒ‰ä½é¼ æ ‡å·¦é”®, æ‹–åŠ¨é¼ æ ‡, é€‰æ‹©éœ€è¦ç¼–è¾‘çš„æ–‡æœ¬;</li>
  <li>è¿™æ ·æ“ä½œä¼šäº§ç”Ÿä¸€ä¸ªçŸ©å½¢çš„è·¨è¡Œé€‰æ¡†, é€‰æ‹©å®Œæˆä¹‹åå³å¯åŒæ—¶ç¼–è¾‘å¤šè¡Œæ–‡æœ¬;</li>
</ol>

<h2 id="é”®ç›˜æ“ä½œ-å¤šå…‰æ ‡">é”®ç›˜æ“ä½œ: å¤šå…‰æ ‡</h2>
<ol>
  <li>å°†å…‰æ ‡ç§»åŠ¨åˆ°éœ€è¦ç¼–è¾‘çš„æ–‡æœ¬ä½ç½®;</li>
  <li>æŒ‰ä½é”®ç›˜ä¸Šçš„<code class="language-plaintext highlighter-rouge">Option</code>+<code class="language-plaintext highlighter-rouge">Command</code>+<code class="language-plaintext highlighter-rouge">ä¸Š/ä¸‹</code>é”®;</li>
  <li>è¿™æ ·æ“ä½œå¯ä»¥äº§ç”Ÿå¤šä¸ªå…‰æ ‡, é€‰æ‹©å®Œæˆä¹‹åå³å¯åŒæ—¶ç¼–è¾‘å¤šè¡Œæ–‡æœ¬;</li>
</ol>

<blockquote>
  <p>æ³¨æ„: ä»¥ä¸Šæ“ä½œéƒ½æ˜¯åœ¨MacOSç³»ç»Ÿä¸‹è¿›è¡Œçš„, Windowsç³»ç»Ÿä¸‹çš„å¿«æ·é”®å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒ.<br />
å¤§éƒ¨åˆ†æƒ…å†µä¸‹, äºŒè€…çš„å¿«æ·é”®å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å¯¹åº”:<br />
MacOSçš„<code class="language-plaintext highlighter-rouge">Option</code>é”®å¯¹åº”Windowsçš„<code class="language-plaintext highlighter-rouge">Alt</code>é”®;<br />
MacOSçš„<code class="language-plaintext highlighter-rouge">Command</code>é”®å¯¹åº”Windowsçš„<code class="language-plaintext highlighter-rouge">Ctrl</code>é”®;</p>
</blockquote>

]]></content>
      <categories>
        
          <category> å·¥å…· </category>
        
      </categories>
      <tags>
        
          <tag> vscode </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[macOSä¸Šä¿®å¤word/excelç­‰officeæ–‡ä»¶ä¹±ç é—®é¢˜]]></title>
      <url>/%E5%B7%A5%E5%85%B7/2019/03/19/office-on-windows-trans-encoding-on-mac/</url>
      <content type="html"><![CDATA[<h2 id="åŸå› ">åŸå› </h2>
<p>ç¼–ç é—®é¢˜ã€‚å› ä¸ºåœ¨Windowsç³»ç»Ÿä¸Šé¢ï¼Œé€šå¸¸ä½¿ç”¨çš„æ˜¯GBKå­—ç¬¦ç¼–ç æ–¹å¼ï¼Œä½†æ˜¯åœ¨macOSçš„ç³»ç»Ÿä¸Šä½¿ç”¨çš„æ˜¯UTF-8çš„ç¼–ç æ–¹å¼ã€‚æ‰€ä»¥å¸¸å¸¸ä¼šé‡åˆ°ä»Windowsç³»ç»Ÿä¸Šç¼–è¾‘åˆ›å»ºçš„word/excelç­‰officeæ–‡ä»¶ï¼Œåœ¨macOSæˆ–iOSä¸Šé¢æ‰“å¼€æ˜¾ç¤ºä¸ºä¹±ç ã€‚</p>

<h2 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•</h2>
<p>æ—¢ç„¶æ˜ç™½äº†é—®é¢˜äº§ç”ŸåŸå› æ˜¯å­—ç¬¦ç¼–ç æ–¹å¼çš„å·®å¼‚ï¼Œé‚£ä¹ˆå°±å®¹æ˜“å¤„ç†äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ–‡ä»¶çš„å­—ç¬¦ç¼–ç æ–¹å¼è½¬æ¢ä¸ºç³»ç»Ÿæ”¯æŒçš„å³å¯ã€‚
macOSæˆ–Linuxç³»ç»Ÿä¸‹çš„iconvå‘½ä»¤çš„ä½œç”¨å°±æ˜¯è¿›è¡Œæ–‡ä»¶ç¼–ç æ–¹å¼è½¬æ¢ã€‚</p>

<blockquote>
  <p>iconvçš„ä½œç”¨æ˜¯åœ¨å¤šç§å›½é™…ç¼–ç æ ¼å¼ä¹‹é—´è¿›è¡Œæ–‡æœ¬å†…ç çš„è½¬æ¢ã€‚</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Usage: iconv [OPTION...] [-f ENCODING] [-t ENCODING] [INPUTFILE...]
or:    iconv -l

Converts text from one encoding to another encoding.

Options controlling the input and output format:
  -f ENCODING, --from-code=ENCODING
                              the encoding of the input
  -t ENCODING, --to-code=ENCODING
                              the encoding of the output

Options controlling conversion problems:
  -c                          discard unconvertible characters
  --unicode-subst=FORMATSTRING
                              substitution for unconvertible Unicode characters
  --byte-subst=FORMATSTRING   substitution for unconvertible bytes
  --widechar-subst=FORMATSTRING
                              substitution for unconvertible wide characters

Options controlling error output:
  -s, --silent                suppress error messages about conversion problems

Informative output:
  -l, --list                  list the supported encodings
  --help                      display this help and exit
  --version                   output version information and exit
</code></pre></div></div>

<p>é€šè¿‡iconvå°è¯•è¿›è¡Œæ–‡ä»¶ç¼–ç æ–¹å¼è½¬æ¢ï¼Œæ‰§è¡Œå‘½ä»¤<code class="language-plaintext highlighter-rouge">iconv -s -c -f GBK -t UTF8 input.file &gt; output.file</code><br />
å‚æ•°è§£é‡Šï¼š<br />
-f è¾“å…¥æ–‡ä»¶çš„ç¼–ç æ–¹å¼<br />
-t è¾“å‡ºæ–‡ä»¶çš„ç¼–ç æ–¹å¼<br />
input.file è¾“å…¥æ–‡ä»¶å<br />
output.file è¾“å‡ºæ–‡ä»¶å<br />
é€šè¿‡æ‰§è¡Œè¿™æ¡å‘½ä»¤ï¼Œæˆ‘ä»¬æ‰“å¼€æ–°ç”Ÿæˆçš„è¾“å‡ºæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°æ–‡ä»¶å†…å®¹å·²ç»æ­£å¸¸æ˜¾ç¤ºäº†ã€‚</p>

<blockquote>
  <p>iconvå‘½ä»¤æ”¯æŒå¾ˆå¤šæ–‡ä»¶ç¼–ç æ–¹å¼ï¼Œå…·ä½“çš„å¯ä»¥é€šè¿‡å‘½ä»¤<code class="language-plaintext highlighter-rouge">iconv -l</code>è¿›è¡ŒæŸ¥è¯¢ã€‚</p>
</blockquote>

]]></content>
      <categories>
        
          <category> å·¥å…· </category>
        
      </categories>
      <tags>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[åœ¨Googleäº‘å¹³å°ä¸Šé€šè¿‡Dockerå¿«é€Ÿæ­å»ºShadowSocksæœåŠ¡]]></title>
      <url>/%E4%BA%91%E8%AE%A1%E7%AE%97/%E5%AE%B9%E5%99%A8/2019/03/06/google-cloud-deploy-ss-on-docker/</url>
      <content type="html"><![CDATA[<h2 id="å‡†å¤‡">å‡†å¤‡</h2>
<ul>
  <li>å·²æ¿€æ´»çš„Googleäº‘è´¦å·</li>
  <li>æ”¯ä»˜æ–¹å¼å·²ç»é…ç½®æˆåŠŸ</li>
</ul>

<h2 id="åˆ›å»ºå®ä¾‹">åˆ›å»ºå®ä¾‹</h2>
<p>é€šè¿‡Google Cloud Platformå·¦ä¸Šè§’çš„å¯¼èˆªèœå•è¿›å…¥â€œCompute Engine - VMå®ä¾‹è§†å›¾â€åˆ›å»ºVMå®ä¾‹
<img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/20190305/1.png" alt="" /></p>

<h3 id="é€‰æ‹©åŒºåŸŸä¸é…ç½®">é€‰æ‹©åŒºåŸŸä¸é…ç½®</h3>
<p>ç›®å‰è°·æ­Œäº‘æ”¯æŒ18ä¸ªåŒºåŸŸ,åˆ—è¡¨å¦‚ä¸‹:</p>
<ul>
  <li>Taiwan(asia-east1)</li>
  <li>Hong Kong(asia-east2)</li>
  <li>Singapore(asia-southeast1)</li>
  <li>Tokyo(asia-northeast1)</li>
  <li>Montreal, Canada(northamerica-northeast1)</li>
  <li>Los Angeles, USA(us-west2)</li>
  <li>South Carolina, USA(us-east1)</li>
  <li>Northern Virginia, USA(us-east4)</li>
  <li>Sydney(australia-southeast1)</li>
  <li>Mumbai(asia-south1)</li>
  <li>Belgium(europe-west1)</li>
  <li>Netherlands(europe-west4)</li>
  <li>Hamina, Finland(europe-north1)</li>
  <li>London, UK(europe-west2)</li>
  <li>Iowa, USA(us-central1)</li>
  <li>Oregon, USA(us-west1)</li>
  <li>SÃ£o Paulo(southamerica-east1)</li>
  <li>Frankfurt, Germany(europe-west3)</li>
</ul>

<p>æ ¹æ®ä¸šåŠ¡é€‰æ‹©é€‚åˆè‡ªå·±çš„åŒºåŸŸ,é€šå¸¸é€‰ç”¨è®¿é—®å»¶è¿Ÿè¾ƒä½çš„åŒºåŸŸ,å¯ä»¥æ ¹æ®è°·æ­Œäº‘ä¸»æœºæµ‹é€Ÿç½‘ç«™<a href="http://www.gcping.com/">GCP ping</a>çš„æ•°æ®è¿›è¡Œé€‰æ‹©.
æ­¤å¤„ä»¥å°æ¹¾æœåŠ¡å™¨ä¸ºä¾‹
<img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/20190305/2.png" alt="" /></p>

<h3 id="å¯é€‰æ˜¯å¦ä½¿ç”¨å®¹å™¨åŠŸèƒ½">(å¯é€‰)æ˜¯å¦ä½¿ç”¨å®¹å™¨åŠŸèƒ½</h3>
<p>Googleäº‘å·²ç»å…¨æµç¨‹æ”¯æŒå®¹å™¨åŠŸèƒ½,å¯ä»¥åœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™å°±è¿›è¡Œå®¹å™¨é…ç½®
<img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/20190305/3.png" alt="" /></p>

<h3 id="é€‰æ‹©æ˜ åƒ">é€‰æ‹©æ˜ åƒ</h3>
<p>å¦‚æœä½¿ç”¨å®¹å™¨åŒ–éƒ¨ç½²çš„è¯,ç³»ç»Ÿä¼šè‡ªåŠ¨å¯ç”¨å®¹å™¨å®šåˆ¶ç³»ç»Ÿ,ç”¨æˆ·å°±æ— éœ€è‡ªå·±å†é€‰æ‹©æ˜ åƒäº†.
è‹¥æ²¡æœ‰ä½¿ç”¨åˆ°äº‘å¹³å°é…å¥—çš„å®¹å™¨åŠŸèƒ½,ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚è‡ªå·±çš„æ˜ åƒ(å³é•œåƒ)
<img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/20190305/4.png" alt="" /></p>

<h3 id="é˜²ç«å¢™é…ç½®">é˜²ç«å¢™é…ç½®</h3>
<p>å‹¾é€‰å…è®¸HTTPå’ŒHTTPSæµé‡çš„é€‰é¡¹
<img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/20190305/5.png" alt="" /></p>

<h2 id="è¿æ¥å®ä¾‹">è¿æ¥å®ä¾‹</h2>
<p>Google Cloudæä¾›äº†æµè§ˆå™¨ç™»å½•ã€SSHç™»å½•ç­‰å¤šç§æ–¹å¼,é€‰æ‹©åˆé€‚è‡ªå·±çš„å³å¯.</p>

<h2 id="æ‰‹å·¥ä½¿ç”¨dockeréƒ¨ç½²shadowsocksæœåŠ¡">æ‰‹å·¥ä½¿ç”¨Dockeréƒ¨ç½²ShadowSocksæœåŠ¡</h2>
<p>ä½¿ç”¨Google Cloudè‡ªå¸¦çš„å®¹å™¨åŠŸèƒ½å¯ä»¥çœå»ä¸€äº›å®‰è£…é…ç½®åŠ¨ä½œ.
ä½†æ˜¯æ‰‹å·¥éƒ¨ç½²å¯ä»¥å¸¦æ¥æ›´é«˜çš„çµæ´»æ€§,ç”¨æˆ·å¯ä»¥é€‰æ‹©æ›´å¤šçš„å¯é€‰é…ç½®.
å®‰è£…å®Œdockerç›¸å…³ç»„ä»¶ä¹‹å,ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯éƒ¨ç½²SSæœåŠ¡:
<code class="language-plaintext highlighter-rouge">docker run -dt --name ss -p &lt;host_port&gt;:&lt;docker_port&gt; mritd/shadowsocks -s "-s 0.0.0.0 -p &lt;s&gt; -m chacha20-ietf-poly1305 -k &lt;password&gt; --fast-open"</code></p>

<p>å‚æ•°è¯´æ˜:</p>
<ul>
  <li>-d: åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›</li>
  <li>-t: ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼›</li>
  <li>-p: æ ¹æ®â€œæœåŠ¡å™¨ç«¯å£:å®¹å™¨ç«¯å£â€æ ¼å¼é¡ºåºé…ç½®ç«¯å£æ˜ å°„å…³ç³»</li>
  <li>-s: ç”¨æˆ·è‡ªè¡ŒæŒ‡å®šå‚æ•°
    <ul>
      <li>-s  æœåŠ¡ä¸»æœºIP</li>
      <li>-p å¯¹å¤–æš´éœ²çš„æœåŠ¡ç«¯å£</li>
      <li>-m é€‰æ‹©åŠ å¯†æ–¹å¼,è¿™é‡Œé€‰æ‹©chacha20-ietf-poly1305</li>
      <li>-k é…ç½®å¯†ç </li>
    </ul>
  </li>
</ul>

<p>å‘½ä»¤æ‰§è¡Œå®Œæˆä¹‹åå¯ä»¥é€šè¿‡<code class="language-plaintext highlighter-rouge">docker ps</code>å‘½ä»¤æŸ¥çœ‹å®¹å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ,
ä½¿ç”¨<code class="language-plaintext highlighter-rouge">ps -ef | grep ss</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹ShadowSocksæœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ.</p>

<p>è‡³æ­¤,ç”¨æˆ·å°±å¯ä»¥æ ¹æ®è‡ªå·±ä½¿ç”¨çš„ç»ˆç«¯å®‰è£…å¯¹åº”çš„å®¢æˆ·ç«¯ä½¿ç”¨ShadowSocksæœåŠ¡äº†.</p>

<h2 id="å¸¸è§é—®é¢˜">å¸¸è§é—®é¢˜</h2>
<ul>
  <li>ShadowSockså®‰è£…åŠé…ç½®æ²¡æœ‰é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯ä¸ºä½•è¿˜æ˜¯æ— æ³•ä½¿ç”¨æœåŠ¡ï¼Ÿ
ä½¿ç”¨äº‘æœåŠ¡å™¨å‡ºç°è¿™ç§æƒ…å†µå¾ˆå¯èƒ½æ˜¯å› ä¸ºäº‘å‚å•†çš„ç½‘ç»œå®‰å…¨ç­–ç•¥é™åˆ¶æ‰€è‡´ï¼Œè¯·ç¡®ä¿ç›¸åº”çš„ç½‘ç»œç«¯å£éƒ½å·²ç»æ‰“å¼€ã€‚æ­¤å¤„ä»¥è°·æ­Œäº‘ä¸ºä¾‹ï¼Œå¯¼èˆªèœå•-VPCç½‘ç»œ-é˜²ç«å¢™è§„åˆ™-åˆ›å»ºé˜²ç«å¢™è§„åˆ™-å¡«å†™å…è®¸è®¿é—®çš„åè®®å’Œç«¯å£ã€‚
<img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/20190305/6.png" alt="" /></li>
</ul>

<blockquote>
  <p>tips å¦‚ä½•å¿«é€Ÿåˆ¤æ–­æ˜¯å› ä¸ºç½‘ç»œç«¯å£æ²¡æœ‰æ”¾å¼€å¯¼è‡´çš„æœåŠ¡ä¸å¯ç”¨ï¼Ÿ<br />
æœ‰æ—¶ç”¨æˆ·æ— æ³•ç¡®å®šåˆ°åº•æ˜¯è½¯ä»¶å®‰è£…é…ç½®è¿˜æ˜¯ç½‘ç»œç«¯å£é—®é¢˜å¯¼è‡´çš„æœåŠ¡ä¸å¯ç”¨ã€‚åªéœ€å¦‚ä¸‹ä¸€æ¡å‘½ä»¤å³å¯å¿«é€Ÿå¯ç”¨ä¸€ä¸ªwebæœåŠ¡<code class="language-plaintext highlighter-rouge">docker run -p &lt;hostPort&gt;:80 -d nginx</code>ï¼Œé€šè¿‡è®¿é—®hostIP:hostPortæŸ¥çœ‹ç½‘é¡µæ˜¯å¦èƒ½å¤Ÿæ­£å¸¸è®¿é—®å³å¯åˆ¤æ–­ç«¯å£æ˜¯å¦æ­£å¸¸æ”¾å¼€ã€‚</p>
</blockquote>

]]></content>
      <categories>
        
          <category> äº‘è®¡ç®— </category>
        
          <category> å®¹å™¨ </category>
        
      </categories>
      <tags>
        
          <tag> ShadowSocks </tag>
        
          <tag> Docker </tag>
        
          <tag> Google </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[AWS CloudFront CDNåŠ é€ŸåŠŸèƒ½åˆæ­¥åº”ç”¨]]></title>
      <url>/%E6%9E%B6%E6%9E%84/2019/03/03/AWS-cloudfront-basic-deployment/</url>
      <content type="html"><![CDATA[<h2 id="ç®€ä»‹">ç®€ä»‹</h2>
<p>Amazon CloudFront æ˜¯ä¸€é¡¹å¿«é€Ÿå†…å®¹åˆ†å‘ç½‘ç»œ (CDN) æœåŠ¡ï¼Œå¯ä»¥å®‰å…¨åœ°ä»¥ä½å»¶è¿Ÿå’Œé«˜ä¼ è¾“é€Ÿåº¦å‘å…¨çƒå®¢æˆ·åˆ†å‘æ•°æ®ã€è§†é¢‘ã€åº”ç”¨ç¨‹åºå’Œ APIã€‚</p>

<h2 id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</h2>
<p>Amazon CloudFrontå¯ä»¥ä½¿ç”¨åœ¨å¦‚ä¸‹åœºæ™¯ä¸­:</p>
<ul>
  <li>é™æ€èµ„æºç¼“å­˜
    <ul>
      <li>é»˜è®¤æä¾›å¤šå±‚ç¼“å­˜å’ŒåŒºåŸŸæ€§è¾¹ç¼˜ç¼“å­˜ç«™ç‚¹ï¼Œå¯åœ¨å¯¹è±¡å°šæœªç¼“å­˜åœ¨è¾¹ç¼˜ç«™ç‚¹æ—¶ç¼©çŸ­å»¶è¿Ÿå¹¶é™ä½æ¥æºæœåŠ¡å™¨ä¸Šçš„è´Ÿè½½ã€‚ç¼“å­˜é™æ€å†…å®¹å¯ä¸ºæ‚¨æä¾›æ‰€éœ€çš„æ€§èƒ½å’Œè§„æ¨¡ï¼Œä»¥ä¾¿åœ¨æµè§ˆè€…è®¿é—®æ‚¨çš„ç«™ç‚¹æ—¶ä¸ºå…¶æä¾›å¿«é€Ÿå¯é çš„è®¿é—®ä½“éªŒã€‚</li>
    </ul>
  </li>
  <li>åŠ¨æ€å†…å®¹å’ŒAPIåŠ é€Ÿ
    <ul>
      <li>å¯ç”¨äºä¿æŠ¤å¹¶åŠ é€Ÿæ‚¨çš„ WebSocket æµé‡åŠ API è°ƒç”¨ã€‚ä¸å®¢æˆ·ç«¯çš„ TLS è¿æ¥å°†åœ¨é™„è¿‘çš„è¾¹ç¼˜ç«™ç‚¹ç»ˆæ­¢ï¼Œç„¶åï¼ŒCloudFront å°†ä½¿ç”¨ç»è¿‡ä¼˜åŒ–çš„ AWS ä¸»å¹²ç½‘ç»œè·¯å¾„å®‰å…¨åœ°è®¿é—®æ‚¨çš„ API æœåŠ¡å™¨ã€‚</li>
    </ul>
  </li>
  <li>ç›´æ’­/è§†é¢‘åŠ é€Ÿ
    <ul>
      <li>ä»¥æŒç»­çš„é«˜ååé‡æ¥æµå¼å¤„ç†æ‚¨çš„åª’ä½“å†…å®¹ï¼ˆåŒ…æ‹¬é¢„å½•åˆ¶æ–‡ä»¶å’Œç°åœºç›´æ’­ï¼‰ï¼Œä»è€Œæ»¡è¶³æ‚¨å‘å…¨çƒæµè§ˆè€…åˆ†å‘åª’ä½“å†…å®¹çš„éœ€æ±‚ã€‚</li>
    </ul>
  </li>
  <li>æå‡å®‰å…¨æ€§
    <ul>
      <li>CloudFront å¯ä¸ AWS Shield æ— ç¼é›†æˆä»¥æä¾›ç¬¬ 3/4 å±‚ DDoS ç¼“è§£ï¼Œå¹¶å¯ä¸ AWS WAF é›†æˆä»¥æä¾›ç¬¬ 7 å±‚é˜²æŠ¤ã€‚</li>
    </ul>
  </li>
  <li>è½¯ä»¶åˆ†å‘
    <ul>
      <li>æ— è®ºæ‚¨çš„ç”¨æˆ·åœ¨ä½•å¤„ï¼Œæ‚¨éƒ½å¯ä»¥é€šè¿‡å†…å®¹åˆ†å‘ç½‘ç»œè®©æ‚¨çš„è½¯ä»¶åœ¨è¾¹ç¼˜å¯ç”¨ã€‚CDN çš„é«˜æ•°æ®ä¼ è¾“é€Ÿç‡å¯åŠ å¿«æ‚¨çš„äºŒè¿›åˆ¶æ–‡ä»¶çš„åˆ†å‘é€Ÿåº¦ï¼Œä»è€Œæ”¹å–„å®¢æˆ·ä½“éªŒå¹¶é™ä½æˆæœ¬ã€‚</li>
    </ul>
  </li>
</ul>

<h2 id="å‡†å¤‡">å‡†å¤‡</h2>
<h3 id="éƒ¨ç½²æœåŠ¡">éƒ¨ç½²æœåŠ¡</h3>
<p>åœ¨ä½¿ç”¨Amazon CloudFrontåŠŸèƒ½ç­¾,ä½ åº”è¯¥å·²ç»æœ‰ä¸€äº›å­˜å‚¨åœ¨Amazonäº‘ä¸Šçš„æ–‡ä»¶æˆ–è€…éƒ¨ç½²å¥½çš„ç½‘ç«™äº†.
ä¸‹é¢æˆ‘ä»¬ä»¥ä¸€ä¸ªå·²ç»åœ¨AWS EC2ä¸Šéƒ¨ç½²å¥½çš„é™æ€åšå®¢ç½‘ç«™æœåŠ¡ä¸ºä¾‹è¿›è¡Œä»‹ç».</p>

<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<h3 id="é€‰æ‹©å†…å®¹åˆ†å‘æ–¹å¼">é€‰æ‹©å†…å®¹åˆ†å‘æ–¹å¼</h3>
<ul>
  <li>Web
    <ul>
      <li>é€‚ç”¨äºåŠ é€Ÿé™æ€å’ŒåŠ¨æ€çš„ç½‘ç«™å†…å®¹</li>
    </ul>
  </li>
  <li>RTMP
    <ul>
      <li>é€‚åˆä½¿ç”¨ Adobe Flash Media Server çš„ RTMP åè®®çš„æµåª’ä½“æ–‡ä»¶</li>
    </ul>
  </li>
</ul>

<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯é€‰ç”¨webå†…å®¹åˆ†å‘æ–¹å¼,æˆ‘ä»¬è¿™é‡Œæ˜¯ç”¨äºåšå®¢ç½‘ç«™åŠ é€Ÿ,æ‰€ä»¥é€‰ç”¨çš„ä¹Ÿæ˜¯webå†…å®¹åˆ†å‘æ–¹å¼.</p>

<h3 id="åˆ›å»ºåˆ†é…">åˆ›å»ºåˆ†é…</h3>
<p>åˆ›å»ºåˆ†é…è§„åˆ™æœ€ä¸»è¦çš„å…³æ³¨å¦‚ä¸‹å‡ ä¸ªé…ç½®é¡¹:</p>
<ul>
  <li>æºåŸŸå
    <ul>
      <li>é€‰æ‹©éœ€è¦åŠ é€Ÿçš„èµ„æºæ¥æº,æ”¯æŒç›´æ¥é€‰æ‹©å­˜å‚¨åœ¨AWS S3æ•°æ®åº“ä¹‹ä¸­çš„å†…å®¹å¦‚æœæ˜¯è‡ªå»ºç½‘ç«™,é‚£ä¹ˆå¡«å†™æˆ‘ä»¬çš„ç½‘ç«™åŸŸåå³å¯.</li>
    </ul>
  </li>
  <li>æºåè®®ç­–ç•¥
    <ul>
      <li>é€‰æ‹©å…¼é¡¾HTTPä¸HTTPSçš„åè®®ç­–ç•¥,æ–¹ä¾¿åç»­ç½‘ç«™åè®®å˜æ›´</li>
    </ul>
  </li>
  <li>ç«¯å£
    <ul>
      <li>æ ¹æ®è‡ªå·±çš„ç½‘ç»œæœåŠ¡é…ç½®æƒ…å†µè¿›è¡Œå¡«å†™</li>
    </ul>
  </li>
</ul>

<p>å…¶ä»–çš„é…ç½®ä½¿ç”¨é»˜è®¤å³å¯</p>

<h3 id="ä½¿ç”¨å†…å®¹åˆ†å‘">ä½¿ç”¨å†…å®¹åˆ†å‘</h3>

<p><img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/2019-03-02-AWS-cloudfront-basic-deployment.png" alt="" />
åˆ›å»ºå®Œå†…å®¹åˆ†å‘é…ç½®ä¹‹å,ç­‰å¾…å…¶çŠ¶æ€å˜ä¸ºå·²éƒ¨ç½²å°±å¯ä»¥ä½¿ç”¨äº†.
AWS CloudFrontä¼šé‡æ–°åˆ†é…ä¸€ä¸ªåŸŸå,ç”¨æˆ·ä½¿ç”¨è¿™ä¸ªåŸŸåè¿›è¡Œå†…å®¹åˆ†å‘å³å¯è¾¾åˆ°ç”¨æˆ·çš„æœ€ä¼˜è®¿é—®æ•ˆæœäº†.</p>

<h3 id="é¢å¤–åŠŸèƒ½">é¢å¤–åŠŸèƒ½</h3>
<p>Amazon CloudFrontè¿˜æä¾›äº†å„ç§çš„æŠ¥å‘Šå’Œåˆ†æåŠŸèƒ½,ç”¨æˆ·å¯ä»¥é€šè¿‡Amazonæä¾›çš„æ•°æ®æŸ¥çœ‹ç¼“å­˜ä½¿ç”¨çš„çŠ¶æ€,åŒ…æ‹¬è¯·æ±‚æ•°ã€å­—èŠ‚æ•°ã€HTTPçŠ¶æ€ã€å¼‚å¸¸æŠ¥å‘Šç­‰ç­‰</p>
]]></content>
      <categories>
        
          <category> æ¶æ„ </category>
        
      </categories>
      <tags>
        
          <tag> äº‘è®¡ç®— </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[åœ¨AWS UbuntuæœåŠ¡å™¨ä¸Šä½¿ç”¨Dockerå¿«é€Ÿéƒ¨ç½²Jekyllé™æ€åšå®¢]]></title>
      <url>/%E5%B7%A5%E5%85%B7/2019/02/26/Deploy-Jekyll-by-docker-in-AWS/</url>
      <content type="html"><![CDATA[<h2 id="jekyllç®€ä»‹">Jekyllç®€ä»‹</h2>
<p>Jekyll æ˜¯ä¸€ä¸ªç®€å•ä¸”å®Œå…¨å…è´¹çš„é™æ€åšå®¢ç«™ç‚¹ç”Ÿæˆå·¥å…·ï¼Œç±»ä¼¼WordPressã€‚ä½†æ˜¯å’ŒWordPressåˆæœ‰å¾ˆå¤§çš„ä¸åŒï¼ŒåŸå› æ˜¯jekyllåªæ˜¯ä¸€ä¸ªåªç”¨ Markdown (æˆ– Textile)ã€Liquidã€HTML &amp; CSS å°±å¯ä»¥ç”Ÿæˆé™æ€ç½‘é¡µçš„å·¥å…·ï¼Œä¸éœ€è¦æ•°æ®åº“æ”¯æŒã€‚ä½†æ˜¯å¯ä»¥é…åˆç¬¬ä¸‰æ–¹æœåŠ¡,ä¾‹å¦‚Disqusã€‚</p>

<h2 id="dockerç®€ä»‹">Dockerç®€ä»‹</h2>
<p>Dockeræ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç è½¯ä»¶é¡¹ç›®ï¼Œè®©åº”ç”¨ç¨‹åºéƒ¨ç½²çš„å·¥ä½œå¯ä»¥è‡ªåŠ¨åŒ–è¿›è¡Œï¼Œå€Ÿæ­¤åœ¨Linuxæ“ä½œç³»ç»Ÿä¸Šï¼Œæä¾›ä¸€ä¸ªé¢å¤–çš„è½¯ä»¶æŠ½è±¡å±‚ï¼Œä»¥åŠæ“ä½œç³»ç»Ÿå±‚è™šæ‹ŸåŒ–çš„è‡ªåŠ¨ç®¡ç†æœºåˆ¶ã€‚</p>

<h2 id="jekylléƒ¨ç½²">Jekylléƒ¨ç½²</h2>
<h3 id="ç¯å¢ƒ">ç¯å¢ƒ</h3>
<p>AWS Ubuntu 16.04.5 LTS</p>

<h3 id="å®‰è£…">å®‰è£…</h3>
<h4 id="dockerå®‰è£…">Dockerå®‰è£…</h4>
<p>Dockerçš„å®‰è£…èµ„æ–™å·²ç»ååˆ†ä¸°å¯Œäº†ï¼Œå‚è§å®˜ç½‘æŒ‡å¯¼å³å¯ã€‚</p>
<blockquote>
  <p><a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">Get Docker CE for Ubuntu</a></p>
</blockquote>

<h4 id="jekyllå®‰è£…">Jekyllå®‰è£…</h4>
<p>å› ä¸ºä½¿ç”¨Dockerï¼Œæ‰€ä»¥å…å»äº†Jekyllå®‰è£…ã€‚ä¸ç”¨å†å…³å¿ƒç³»ç»Ÿç‰ˆæœ¬ã€ä¾èµ–ç»„ä»¶ä¹‹ç±»çš„é—®é¢˜ï¼Œå¼€ç®±å³ç”¨ã€‚</p>

<h3 id="é€‰æ‹©jekyllæ¨¡æ¿">é€‰æ‹©Jekyllæ¨¡æ¿</h3>
<p>ç½‘ä¸Šæœ‰å¤§é‡çš„ç°æˆJekyllæ¨¡æ¿å¯ä»¥é€‰æ‹©ï¼Œæ­¤å¤„ä»¥Jekyll-Nowä¸ºä¾‹ã€‚
åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªç›®å½•å¹¶git cloneæ¨¡æ¿ä»£ç ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir jekyllBlog
cd jekyllBlog
git clone https://github.com/barryclark/jekyll-now.git .
</code></pre></div></div>

<h3 id="æ„å»º">æ„å»º</h3>
<p>Jekyllæä¾›äº†ä¸€æ¡buildå‘½ä»¤å°†æ¨¡æ¿ç¼–è¯‘ä¸ºé™æ€ç½‘é¡µï¼Œç›´æ¥åœ¨æ‰§è¡Œå¦‚ä¸‹Dockerå‘½ä»¤å³å¯ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export JEKYLL_VERSION=3.8
docker run --rm --volume="$PWD:/srv/jekyll" -it jekyll/jekyll:$JEKYLL_VERSION jekyll build
</code></pre></div></div>

<p>å¯ä»¥çœ‹åˆ°æ–°ç”Ÿæˆä¸€ä¸ª_siteç›®å½•ï¼Œå°±æ˜¯åˆšåˆšæ„å»ºå‡ºæ¥çš„ç½‘é¡µæ–‡ä»¶</p>

<h3 id="å¼€å¯æœåŠ¡">å¼€å¯æœåŠ¡</h3>
<p>Jekyll åŒæ—¶ä¹Ÿé›†æˆäº†ä¸€ä¸ªç½‘é¡µæœåŠ¡ï¼Œé€šè¿‡serverå‘½ä»¤å³å¯å¼€å¯ã€‚
<code class="language-plaintext highlighter-rouge">docker run --rm --volume="$PWD:/srv/jekyll" -it -p 4000:4000 jekyll/jekyll:$JEKYLL_VERSION jekyll server</code></p>

<p>é€šè¿‡-på‚æ•°æŒ‡å®šäº†å¯¹å¤–æš´éœ²çš„çš„æœåŠ¡å™¨ç«¯å£ä¸º4000</p>

<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æœåŠ¡å™¨çš„IPåŠ ç«¯å£ï¼ˆä¾‹å¦‚http://1.2.3.4:4000ï¼‰è®¿é—®åˆšåˆšåˆ›å»ºå¥½çš„é™æ€åšå®¢ç³»ç»Ÿäº†ã€‚
<img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/jekyllStartupPage.png" alt="jekyllstartuppage" /></p>

<blockquote>
  <p>å‚è€ƒèµ„æ–™<br />
<a href="https://stackoverflow.com/questions/53470794/setup-jekyll-via-docker">Setup Jekyll via Docker? - Stack Overflow</a></p>
</blockquote>
]]></content>
      <categories>
        
          <category> å·¥å…· </category>
        
      </categories>
      <tags>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ä½¿ç”¨NGINX Ingressè¿›è¡ŒKubernetesé›†ç¾¤è´Ÿè½½å‡è¡¡]]></title>
      <url>/2018/12/25/k8s-nginx-ingress-install/</url>
      <content type="html"><![CDATA[<h2 id="1-æ¦‚è¿°">1 æ¦‚è¿°</h2>
<p>Nginx Ingress Controller æ˜¯ Kubernetes Ingress Controller çš„ä¸€ç§å®ç°ï¼Œä½œä¸ºåå‘ä»£ç†å°†å¤–éƒ¨æµé‡å¯¼å…¥é›†ç¾¤å†…éƒ¨ï¼Œå®ç°å°† Kubernetes å†…éƒ¨çš„ Service æš´éœ²ç»™å¤–éƒ¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½é€šè¿‡å…¬ç½‘æˆ–å†…ç½‘ç›´æ¥è®¿é—®é›†ç¾¤å†…éƒ¨çš„æœåŠ¡ã€‚</p>

<h2 id="2-å®‰è£…">2 å®‰è£…</h2>
<p>Ingressçš„å®‰è£…æ–¹å¼æœ‰ä¸¤ç§</p>
<ul>
  <li>
    <p>é€šè¿‡Kubernetesé…ç½®æ–‡ä»¶å®‰è£…<br />
Ingressç›¸å…³çš„yamlæ–‡ä»¶å½’æ¡£åœ¨å¦‚ä¸‹åœ°å€ï¼š<a href="https://github.com/nginxinc/kubernetes-ingress/tree/master/deployments">kubernetes-ingress/deployments at master Â· nginxinc/kubernetes-ingress Â· GitHub</a>
å¯ä»¥é€šè¿‡ä¸‹è½½ç›¸å…³æ–‡ä»¶åä½¿ç”¨kubectl applyç›´æ¥è¿›è¡Œéƒ¨ç½²ï¼Œå‚é˜…æŒ‡å¯¼æ–‡æ¡£<a href="https://github.com/nginxinc/kubernetes-ingress/blob/master/docs/installation.md">kubernetes-ingress/installation.md at master Â· nginxinc/kubernetes-ingress Â· GitHub</a>ï¼Œæ­¤å¤„ä¸äºˆèµ˜è¿°</p>
  </li>
  <li>
    <p>é€šè¿‡Helmå®‰è£…<br />
æœ¬æ–‡ä¸»è¦ä»‹ç»é€šè¿‡Helmå®‰è£…ä½¿ç”¨Ingressï¼Œæ‰€ä»¥å¼€å§‹å‰è¯·ç¡®ä¿å·²ç»å®‰è£…å¥½Helmäº†ã€‚</p>
  </li>
</ul>

<h3 id="21-é€‰æ‹©æœåŠ¡æš´éœ²æ–¹å¼">2.1 é€‰æ‹©æœåŠ¡æš´éœ²æ–¹å¼</h3>
<p>Ingresså¯¹å¤–éƒ¨æä¾›æœåŠ¡é€šå¸¸é€‰æ‹©å¦‚ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
  <li>
    <p>LoadBalancer<br />
éœ€è¦äº‘å‚å•†æ”¯æŒå¹¶è´­ä¹°ï¼Œä¸ºæ¯ä¸ªLoadBalancerç±»å‹çš„Serviceåˆ†é…å…¬ç½‘IPåœ°å€</p>
  </li>
  <li>
    <p>hostPort<br />
hostPortæ˜¯ç›´æ¥å°†å®¹å™¨çš„ç«¯å£ä¸æ‰€è°ƒåº¦çš„èŠ‚ç‚¹ä¸Šçš„ç«¯å£è¿æ¥èµ·æ¥ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥é€šè¿‡å®¿ä¸»æœºçš„IPåŠ ä¸Šç«¯å£å·æ¥è®¿é—®Podäº†ï¼Œå¦‚:</p>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apiVersion: v1
kind: Pod
metadata:
  name: influxdb
spec:
  containers:
    - name: influxdb
      image: influxdb
      ports:
        - containerPort: 8086
          hostPort: 8086
</code></pre></div></div>
<blockquote>
  <p>hostPortçš„æ–¹æ¡ˆæœ‰ä¸ªç¼ºç‚¹ï¼Œå› ä¸ºPodé‡æ–°è°ƒåº¦çš„æ—¶å€™è¯¥Podè¢«è°ƒåº¦åˆ°çš„å®¿ä¸»æœºå¯èƒ½ä¼šå˜åŠ¨ï¼Œè¿™æ ·å°±å˜åŒ–åç”¨æˆ·å¿…é¡»è‡ªå·±ç»´æŠ¤ä¸€ä¸ªPodä¸æ‰€åœ¨å®¿ä¸»æœºçš„å¯¹åº”å…³ç³»ã€‚</p>
</blockquote>

<h3 id="22-ä½¿ç”¨loadbalanceræä¾›æœåŠ¡">2.2 ä½¿ç”¨LoadBalanceræä¾›æœåŠ¡</h3>
<p>è¿™ç§æ–¹å¼éƒ¨ç½²èµ·æ¥ååˆ†ç®€å•ï¼Œå› ä¸ºstable/nginx-ingressè¿™ä¸ªhelmåŒ…é»˜è®¤å°±æ˜¯ä½¿ç”¨è¿™ç§æ–¹å¼éƒ¨ç½²ã€‚ç¡®ä¿åœ¨äº‘å‚å•†ä¸Šå·²ç»å¼€é€šäº†LoadBalanceræœåŠ¡ä¹‹åï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œä¸€é”®å®‰è£…ï¼š<br />
<code class="language-plaintext highlighter-rouge">helm install --name nginx-ingress --namespace kube-system stable/nginx-ingress</code></p>

<p>éƒ¨ç½²å®ŒæˆåæŸ¥çœ‹ç»“æœï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl get svc -n kube-system
NAME                            TYPE           CLUSTER-IP     EXTERNAL-IP      PORT(S)                      AGE
nginx-ingress-controller        LoadBalancer   10.3.255.138   119.28.121.125   80:30113/TCP,443:32564/TCP   21h
</code></pre></div></div>

<h3 id="23-ä½¿ç”¨hostportæä¾›æœåŠ¡">2.3 ä½¿ç”¨hostPortæä¾›æœåŠ¡</h3>
<p>ä¹‹å‰æœ‰æåˆ°hostPortçš„ç¼ºç‚¹åœ¨äºPodè¢«è°ƒåº¦å˜åŒ–åˆ°å…¶ä»–å®¿ä¸»æœºæ—¶éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ã€‚é‚£ä¹ˆæˆ‘ä»¬é€šè¿‡DaemonSetå°†Nginx çš„ Ingress Controller PodæŒ‡å®šåˆ°ç‰¹å®šå®¿ä¸»æœºä¸Šé¢æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç‰ºç‰²äº†ä¸€å®šçš„å¯é æ€§ï¼Œä½†å°±å¯ä»¥ä¸å†æ“å¿ƒå¦‚ä½•æ‰‹å·¥ç»´æŠ¤æœåŠ¡çš„åœ°å€å˜åŒ–é—®é¢˜äº†ï¼ŒäºŒè€…çš„åˆ©å¼Šå–èˆå¯ä»¥æ ¹æ®ä½¿ç”¨åœºæ™¯è¿›è¡Œè¯„ä¼°ã€‚</p>

<h4 id="231-é€‰æ‹©è¾¹ç¼˜èŠ‚ç‚¹">2.3.1 é€‰æ‹©è¾¹ç¼˜èŠ‚ç‚¹</h4>
<p>è¾¹ç¼˜èŠ‚ç‚¹ï¼šç›‘å¬å¤–éƒ¨æµé‡è¿›å…¥é›†ç¾¤å†…éƒ¨çš„èŠ‚ç‚¹
è¿™é‡Œæˆ‘ä»¬é€‰æ‹©é›†ç¾¤å†…éƒ¨çš„ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºè¾¹ç¼˜èŠ‚ç‚¹ï¼Œæ³¨æ„è¿™ä¸ªèŠ‚ç‚¹éœ€è¦æœ‰å¤–éƒ¨å¯ä»¥è®¿é—®çš„å…¬ç½‘åœ°å€å¹¶ä¸”80ã€443ç«¯å£æ²¡æœ‰è¢«å…¶ä»–åº”ç”¨å ç”¨ã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8s-cluster1-master ~]# kubectl get nodes
NAME                      STATUS   ROLES    AGE   VERSION
izj6cfiv0zhc0j2k7ruyhsz   Ready    &lt;none&gt;   16d   v1.13.0
k8s-cluster1-master       Ready    master   16d   v1.13.0
</code></pre></div></div>
<p>ä»¥è¿™ä¸ªé›†ç¾¤ä¸ºä¾‹ï¼Œæˆ‘ä»¬é€‰æ‹©izj6cfiv0zhc0j2k7ruyhszä½œä¸ºè¾¹ç¼˜èŠ‚ç‚¹</p>

<h4 id="232-ä¸ºè¾¹ç¼˜èŠ‚ç‚¹æ·»åŠ æ ‡ç­¾">2.3.2 ä¸ºè¾¹ç¼˜èŠ‚ç‚¹æ·»åŠ æ ‡ç­¾</h4>
<p>æˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤ç»™è¿™ä¸ªèŠ‚ç‚¹åŠ ä¸Šä¸€ä¸ªå†…å®¹ä¸ºnode:edgeçš„labelï¼Œåç»­åœ¨DaemonSetéƒ¨ç½²æ—¶æ ¹æ®labelè¿›è¡Œç»‘å®šå³å¯ã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl label node izj6cfiv0zhc0j2k7ruyhsz node=edge
node "izj6cfiv0zhc0j2k7ruyhsz" labeled
</code></pre></div></div>

<p>åˆ é™¤æ ‡ç­¾å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl label node izj6cfiv0zhc0j2k7ruyhsz node-
node "izj6cfiv0zhc0j2k7ruyhsz" labeled
</code></pre></div></div>

<h4 id="233-ä½¿ç”¨helmå®‰è£…ingress">2.3.3 ä½¿ç”¨helmå®‰è£…ingress</h4>
<p>é…ç½®å¥½è¾¹ç¼˜èŠ‚ç‚¹ä¹‹åå³å¯ä»¥ä½¿ç”¨Helmå®‰è£…ingressäº†ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm install stable/nginx-ingress \
  --namespace kube-system \
  --name nginx-ingress \
  --set controller.kind=DaemonSet \
  --set controller.daemonset.useHostPort=true \
  --set controller.nodeSelector.node=edge \
  --set controller.service.type=ClusterIP
</code></pre></div></div>

<p>å‚æ•°è§£é‡Šï¼š</p>
<ul>
  <li>namespace  å¯é€‰é¡¹ï¼Œé…ç½®åå¯æŒ‡å®šingresså®‰è£…çš„å‘½ä»¤ç©ºé—´ï¼Œé»˜è®¤ä¸ºdefault</li>
  <li>name  ç”Ÿæˆçš„èµ„æºåç§°</li>
  <li>set controller.kind=DaemonSet  é€‰æ‹©éƒ¨ç½²æ–¹å¼ä¸ºDaemonSet</li>
  <li>set controller.daemonset.useHostPort=true  å¼€å¯hostPortåŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡èŠ‚ç‚¹è®¿é—®ingressæœåŠ¡</li>
  <li>controller.nodeSelector.node=edge  æä¾›å¯¹å¤–æä¾›æœåŠ¡çš„èŠ‚ç‚¹ç­›é€‰æ–¹å¼ï¼Œéœ€è¦å’Œä¹‹å‰é…ç½®çš„èŠ‚ç‚¹labelåŒ¹é…ï¼Œä¾‹å¦‚ä¹‹å‰é…ç½®çš„node=edgeï¼Œè¿™é‡Œä¹Ÿéœ€è¦å¡«ä¸Šä¸€æ ·çš„é”®å€¼</li>
  <li>set controller.service.type=ClusterIP  å†…éƒ¨æœåŠ¡çš„ç±»å‹</li>
</ul>

<p>å®‰è£…å®Œæˆä¹‹åæ£€æŸ¥ä¸€ä¸‹å¯¹åº”podæ˜¯å¦éƒ½æ­£å¸¸è¿è¡Œäº†</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8s-cluster1-master ~]# kubectl get pods -n kube-system | grep nginx-ingress
nginx-ingress-controller-hv8h9                   1/1     Running   0          15d
nginx-ingress-default-backend-56d99b86fb-4jlxn   1/1     Running   0          15d
</code></pre></div></div>

<h2 id="3-é…ç½®">3 é…ç½®</h2>
<h3 id="31-åˆ›å»ºæµ‹è¯•æœåŠ¡">3.1 åˆ›å»ºæµ‹è¯•æœåŠ¡</h3>
<p>Ingresså®‰è£…å®Œæˆä¹‹åï¼Œå°±å¯ä»¥é…ç½®ç›¸åº”è§„åˆ™æ¥å¯¹å¤–æš´éœ²æœåŠ¡äº†ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæœåŠ¡æ¥æµ‹è¯•
åˆ›å»ºä¸€ä¸ªmy-nginx.yamlï¼Œå†…å®¹ä¸º</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: my-nginx
spec:
  replicas: 1
  template:
    metadata:
      labels:
        run: my-nginx
    spec:
      containers:
      - name: my-nginx
        image: nginx
        ports:
        - containerPort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: my-nginx
  labels:
    app: my-nginx
spec:
  ports:
  - port: 80
    protocol: TCP
    name: http
  selector:
    run: my-nginx
</code></pre></div></div>

<p>é€šè¿‡<code class="language-plaintext highlighter-rouge">kubectl apply -f my-nginx.yaml</code>è¿›è¡Œåˆ›å»ºï¼Œé€šè¿‡<code class="language-plaintext highlighter-rouge">kubectl get service</code>å¯ä»¥çœ‹åˆ°my-nginxæœåŠ¡å·²ç»åˆ›å»ºæˆåŠŸ</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8s-cluster1-master ~]# kubectl get svc
NAME                                 TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE
kubernetes                           ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP          17d
my-nginx                             ClusterIP   10.100.181.157   &lt;none&gt;        80/TCP,443/TCP   13d
</code></pre></div></div>

<h3 id="32-åˆ›å»ºingressè§„åˆ™">3.2 åˆ›å»ºingressè§„åˆ™</h3>
<p>åˆ›å»ºå®ŒæˆæœåŠ¡ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡é…ç½®ingressè§„åˆ™æ¥æš´éœ²æœåŠ¡äº†ï¼Œ</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: my-nginx
  annotations:
    kubernetes.io/ingress.class: "nginx"
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  rules:
  - host: www.10cloud.tk
    http:
      paths:
      - path: /web
        backend:
          serviceName: my-nginx
          servicePort: 80
  tls:
  - hosts:
    - www.10cloud.tk
    secretName: www-10cloud-tk-tls
</code></pre></div></div>

<p>å‚æ•°è§£é‡Š</p>
<ul>
  <li>kubernetes.io/ingress.class: â€œnginxâ€<br />
é€šè¿‡å®šä¹‰kubernetes.io/ingress.class è¿™ä¸ªannotationå¯ä»¥åœ¨æœ‰å¤šä¸ªingress controllerçš„æƒ…å†µä¸‹èƒ½å¤Ÿè®©è¯·æ±‚è¢«æˆ‘ä»¬å®‰è£…çš„è¿™ä¸ªå¤„ç†</li>
  <li>nginx.ingress.kubernetes.io/rewrite-target: /<br />
é…ç½®ä½ç½®é‡å®šå‘ï¼Œä½œç”¨æ˜¯ä½¿Ingressä»¥æ ¹è·¯å¾„è½¬å‘åˆ°åç«¯ï¼Œé¿å…è®¿é—®è·¯å¾„é”™è¯¯é…ç½®è€Œå¯¼è‡´çš„404é”™è¯¯ã€‚å‚æ•°è¯¦ç»†è¯´æ˜å‚ç…§<a href="https://github.com/kubernetes/ingress-nginx/tree/master/docs/examples/rewrite">ingress-nginx/docs/examples/rewrite at master Â· kubernetes/ingress-nginx Â· GitHub</a></li>
  <li>host<br />
åŸŸååœ°å€</li>
  <li>path<br />
å¤–éƒ¨è®¿é—®çš„ç›¸å¯¹åœ°å€</li>
  <li>backend<br />
é€šè¿‡é…ç½®æœåŠ¡åç§°å’ŒæœåŠ¡ç«¯å£æ¥æŒ‡å®šå’Œpathç»‘å®šçš„åç«¯æœåŠ¡</li>
  <li>tls<br />
åˆ›å»ºäº†è¯ä¹¦ä¹‹åï¼Œå¯ä»¥é€šè¿‡tlsç»‘å®šå·²åˆ›å»ºçš„secretæ¥å®ç°httpså®‰å…¨è®¿é—®åŠŸèƒ½</li>
</ul>

<p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„Ingressåˆ›å»ºå®Œæˆå¹¶ä¸”é€šè¿‡é…ç½®æœåŠ¡ä¸åŸŸåçš„å…³ç³»ï¼Œå®ç°äº†å¤–éƒ¨è®¿é—®çš„åŠŸèƒ½ï¼Œé€šè¿‡åŸŸå<code class="language-plaintext highlighter-rouge">chenshuo.tk/web</code>å³çœ‹åˆ°nginxçš„å†…å®¹ï¼Œè¯´æ˜é€šè¿‡åŸŸåå·²ç»å¯ä»¥è®¿é—®é›†ç¾¤å†…çš„æœåŠ¡äº†</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Welcome to nginx!
If you see this page, the nginx web server is successfully installed and working. Further configuration is required.

For online documentation and support please refer to nginx.org.
Commercial support is available at nginx.com.

Thank you for using nginx.
</code></pre></div></div>

]]></content>
      <categories>
        
      </categories>
      <tags>
        
          <tag> Kubernetes </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Linuxç³»ç»Ÿä¸‹Helmï¼ˆKubernetesåŒ…ç®¡ç†å™¨ï¼‰çš„å®‰è£…ä½¿ç”¨]]></title>
      <url>/kubernetes/2018/12/11/Helm-install/</url>
      <content type="html"><![CDATA[<h2 id="æ¦‚è¿°">æ¦‚è¿°</h2>
<p>Helm æ˜¯ Kubernetes çš„åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥å¸®æˆ‘ä»¬ç®€åŒ– kubernetes çš„æ“ä½œï¼Œä¸€é”®éƒ¨ç½²åº”ç”¨ã€‚å‡å¦‚ä½ çš„æœºå™¨ä¸Šå·²ç»å®‰è£…äº† kubectl å¹¶ä¸”èƒ½å¤Ÿæ“ä½œé›†ç¾¤ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥å®‰è£… Helm äº†ã€‚</p>

<h2 id="å®‰è£…">å®‰è£…</h2>
<h3 id="å®‰è£…å®¢æˆ·ç«¯helm">å®‰è£…å®¢æˆ·ç«¯ï¼ˆHelmï¼‰</h3>
<p>å®˜æ–¹æä¾›äº†å¤šç§å®‰è£…æ–¹å¼ï¼Œè¿™é‡Œé€‰ç”¨è„šæœ¬å®‰è£…çš„æ–¹æ³•ï¼Œä½¿ç”¨å‘½ä»¤<code class="language-plaintext highlighter-rouge">curl https://raw.githubusercontent.com/helm/helm/master/scripts/get | bash</code>ä¼šè‡ªåŠ¨æŠ“å–æœ€æ–°çš„ç‰ˆæœ¬å®Œæˆå®¢æˆ·ç«¯çš„å®‰è£…ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8s-cluster1-master ~]# curl https://raw.githubusercontent.com/helm/helm/master/scripts/get | bash
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  7236  100  7236    0     0  74494      0 --:--:-- --:--:-- --:--:-- 74597
Downloading https://kubernetes-helm.storage.googleapis.com/helm-v2.12.0-linux-amd64.tar.gz
Preparing to install helm and tiller into /usr/local/bin
helm installed into /usr/local/bin/helm
tiller installed into /usr/local/bin/tiller
Run 'helm init' to configure helm.
</code></pre></div></div>

<h3 id="å®‰è£…æœåŠ¡ç«¯tiller">å®‰è£…æœåŠ¡ç«¯ï¼ˆTillerï¼‰</h3>
<p>Helmå®‰è£…å®Œæˆä¹‹åï¼Œé€šè¿‡å‘½ä»¤è¡Œ<code class="language-plaintext highlighter-rouge">helm init</code>å³å¯å®ŒæˆæœåŠ¡ç«¯Tillerçš„å®‰è£…ã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8s-cluster1-master ~]# helm init
Creating /root/.helm
Creating /root/.helm/repository
Creating /root/.helm/repository/cache
Creating /root/.helm/repository/local
Creating /root/.helm/plugins
Creating /root/.helm/starters
Creating /root/.helm/cache/archive
Creating /root/.helm/repository/repositories.yaml
Adding stable repo with URL: https://kubernetes-charts.storage.googleapis.com
Adding local repo with URL: http://127.0.0.1:8879/charts
$HELM_HOME has been configured at /root/.helm.

Tiller (the Helm server-side component) has been installed into your Kubernetes Cluster.

Please note: by default, Tiller is deployed with an insecure 'allow unauthenticated users' policy.
To prevent this, run `helm init` with the --tiller-tls-verify flag.
For more information on securing your installation see: https://docs.helm.sh/using_helm/#securing-your-helm-installation
Happy Helming!
</code></pre></div></div>

<p>ä½¿ç”¨å‘½ä»¤<code class="language-plaintext highlighter-rouge">helm version</code>å¯ä»¥æŸ¥çœ‹å®‰è£…æ˜¯å¦æˆåŠŸå’Œç‰ˆæœ¬å·æƒ…å†µ</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8s-cluster1-master ~]# helm version
Client: &amp;version.Version{SemVer:"v2.12.0", GitCommit:"d325d2a9c179b33af1a024cdb5a4472b6288016a", GitTreeState:"clean"}
Server: &amp;version.Version{SemVer:"v2.12.0", GitCommit:"d325d2a9c179b33af1a024cdb5a4472b6288016a", GitTreeState:"clean"}
</code></pre></div></div>

<h3 id="æƒé™é…ç½®">æƒé™é…ç½®</h3>
<p>é»˜è®¤å®‰è£…çš„ tiller æƒé™å¾ˆå°ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„è„šæœ¬ç»™å®ƒåŠ æœ€å¤§æƒé™ï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘ä»¬å¯ä»¥ç”¨ helm éƒ¨ç½²åº”ç”¨åˆ°ä»»æ„ namespace ä¸‹:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl create serviceaccount --namespace=kube-system tiller

kubectl create clusterrolebinding tiller-cluster-rule --clusterrole=cluster-admin --serviceaccount=kube-system:tiller

kubectl patch deploy --namespace=kube-system tiller-deploy -p '{"spec":{"template":{"spec":{"serviceAccount":"tiller"}}}}'
</code></pre></div></div>
]]></content>
      <categories>
        
          <category> Kubernetes </category>
        
      </categories>
      <tags>
        
          <tag> Kubernetes </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[å®¹å™¨åŒ–è¿ç§»è§„èŒƒ]]></title>
      <url>/%E5%AE%B9%E5%99%A8/2018/11/28/Container-Trans-Standard/</url>
      <content type="html"><![CDATA[<h2 id="æœåŠ¡å™¨é€‰æ‹©">æœåŠ¡å™¨é€‰æ‹©</h2>
<p>ç”¨æˆ·è‡ªè¡Œé‡‡è´­æœåŠ¡å™¨ä¸»æœºï¼ŒæœåŠ¡å™¨è§„æ ¼è¦æ±‚å¦‚ä¸‹ï¼š</p>
<ul>
  <li>æ“ä½œç³»ç»Ÿï¼šCentOS 7æˆ–RHEL 7</li>
  <li>è§„æ ¼ï¼šä¸ºäº†æµç•…ä½¿ç”¨KubernetesåŠŸèƒ½ï¼Œä¸»æœºè§„æ ¼è‡³å°‘è¾¾åˆ°2 Cpu + 2GBå†…å­˜</li>
  <li>åŒºåŸŸï¼šä¸é™ï¼Œæ ¹æ®ç”¨æˆ·ä¸šåŠ¡è‡ªå®š</li>
  <li>å¸¦å®½ï¼šä¸é™ï¼Œæ ¹æ®ç”¨æˆ·ä¸šåŠ¡è‡ªå®š</li>
  <li>å®‰å…¨ç»„ï¼šéœ€è¦æ”¾å¼€å¦‚ä¸‹Kubernetesé›†ç¾¤ä½¿ç”¨åˆ°çš„ç«¯å£
    <ul>
      <li>Kubernetes API serverï¼š6443*</li>
      <li>etcd server client APIï¼š2379-2380</li>
      <li>Kubelet APIï¼š10250</li>
      <li>kube-schedulerï¼š10251</li>
      <li>kube-controller-managerï¼š10252</li>
      <li>NodePort Servicesï¼š30000-32767</li>
    </ul>
  </li>
  <li>å…¶ä»–ï¼šä¿è¯ä¸»æœºçš„MACåœ°å€å’Œproduct_uuidåœ¨é›†ç¾¤å†…æ˜¯å”¯ä¸€çš„ï¼›æœåŠ¡å™¨ä¸»æœºä¹‹é—´çš„ç½‘ç»œå¯ä»¥å®Œå…¨æ­£å¸¸è®¿é—®</li>
</ul>

<h2 id="é›†ç¾¤æ­å»º">é›†ç¾¤æ­å»º</h2>
<p>é›†ç¾¤ç”±è‡³å°‘ä¸€å°MasteråŠ è‹¥å¹²NodeèŠ‚ç‚¹ç»„æˆï¼Œå¦‚æœéœ€è¦å®ç°æ›´é«˜å¯é æ€§ï¼Œå¯ä»¥å¢åŠ æ›´å¤šæœåŠ¡å™¨ã€‚Kubernetesæä¾›äº†è¾ƒé«˜çš„çµæ´»æ€§ï¼Œåç»­æ ¹æ®ä¸šåŠ¡æ‰©å¼ æƒ…å†µå¼¹æ€§å¢åŠ æœåŠ¡å™¨ä¹Ÿååˆ†æ–¹ä¾¿ã€‚
é€‰å®šå¥½Masterä¹‹åï¼Œå³å¯ä½¿ç”¨æˆ‘ä»¬æä¾›çš„å·¥å…·æ­å»ºé›†ç¾¤äº†ã€‚</p>

<h2 id="åº”ç”¨é•œåƒåˆ¶ä½œ">åº”ç”¨é•œåƒåˆ¶ä½œ</h2>
<p>å®¹å™¨åŒ–çš„å…³é”®æ­¥éª¤ä¹‹ä¸€å°±æ˜¯å°†åº”ç”¨çš„éƒ¨ç½²è¿‡ç¨‹åˆ¶ä½œæˆé•œåƒï¼Œé€šè¿‡åˆ†å‘é•œåƒå®Œæˆåº”ç”¨çš„å¿«é€Ÿå®ä¾‹åŒ–ã€è‡ªåŠ¨åŒ–éƒ¨ç½²çš„ç›®çš„ã€‚
åˆ¶ä½œé•œåƒéœ€è¦å…³æ³¨å¦‚ä¸‹å‡ ä¸ªå…³é”®è¦ç´ ï¼š</p>

<h3 id="ç³»ç»Ÿç¯å¢ƒ">ç³»ç»Ÿç¯å¢ƒ</h3>
<p>é€‰æ‹©åº”ç”¨éœ€è¦ä½¿ç”¨çš„åŸºç¡€é•œåƒï¼ŒåŸºç¡€é•œåƒé€šå¸¸æ˜¯å„ç§Linuxå‘è¡Œç‰ˆçš„Dockeré•œåƒæ¯”å¦‚ubuntuã€Debianã€centosç­‰ï¼Œä¹Ÿæœ‰å·²å®‰è£…å¥½ç›¸åº”è½¯ä»¶çš„åŸºç¡€é•œåƒï¼Œå¦‚NGINXã€Pythonã€redisç­‰ã€‚æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚è‡ªè¡Œé€‰æ‹©å¯¹åº”çš„ç³»ç»ŸåŠç‰ˆæœ¬ã€‚
å¸¸ç”¨çš„åŸºç¡€é•œåƒå¯ä»¥åœ¨å®˜æ–¹ä»“åº“ï¼ˆhttps://hub.docker.com/exploreï¼‰æˆ–å…¶ä»–æºï¼ˆ<a href="https://dev.aliyun.com">å¼€å‘è€…å¹³å°</a>ï¼‰æŸ¥è¯¢è·å–ã€‚</p>

<h3 id="åº”ç”¨ä¾èµ–">åº”ç”¨ä¾èµ–</h3>
<p>é€šè¿‡ä¾èµ–æ¸…å•çš„æ–¹å¼æ˜ç¡®çš„å£°æ˜æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼Œå¹¶ä¸”åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ä¾èµ–éš”ç¦»å·¥å…·æ¥ç¡®ä¿ç¨‹åºä¸ä¼šè°ƒç”¨ç³»ç»Ÿä¸­å­˜åœ¨ä½†æ¸…å•ä¸­æœªå£°æ˜çš„ä¾èµ–é¡¹ã€‚è¿™æ ·å¯ä»¥ç®€åŒ–ç¯å¢ƒé…ç½®æµç¨‹ï¼Œå¹¶ä¿è¯åº”ç”¨çš„ç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒæ›´åŠ ä¸€è‡´ã€‚
å…·ä½“åˆ°è¯­è¨€ä¸Šæ¥è¯´ä¾‹å¦‚Ruby çš„ Bundler ä½¿ç”¨ Gemfile ä½œä¸ºä¾èµ–é¡¹å£°æ˜æ¸…å•ï¼Œä½¿ç”¨ bundle exec æ¥è¿›è¡Œä¾èµ–éš”ç¦»ã€‚Python ä¸­åˆ™å¯åˆ†åˆ«ä½¿ç”¨ä¸¤ç§å·¥å…·ï¼š Pip ç”¨ä½œä¾èµ–å£°æ˜ï¼Œ Virtualenv ç”¨ä½œä¾èµ–éš”ç¦»ã€‚ç”šè‡³ C è¯­è¨€ä¹Ÿæœ‰ç±»ä¼¼å·¥å…·ï¼Œ Autoconf ç”¨ä½œä¾èµ–å£°æ˜ï¼Œé™æ€é“¾æ¥åº“ç”¨ä½œä¾èµ–éš”ç¦»ã€‚æ— è®ºç”¨ä»€ä¹ˆå·¥å…·ï¼Œä¾èµ–å£°æ˜å’Œä¾èµ–éš”ç¦»å»ºè®®ä¸€èµ·ä½¿ç”¨ã€‚</p>

<h3 id="åˆ†ç¦»æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€æœåŠ¡">åˆ†ç¦»æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€æœåŠ¡</h3>
<p>æœ‰çŠ¶æ€çš„æœåŠ¡ç‰µæ‰¯åˆ°å­˜å‚¨å·æŒ‚è½½ç­‰é—®é¢˜å¾ˆéš¾åœ¨æ°´å¹³æ–¹å‘ï¼ˆæœåŠ¡å™¨ä¸»æœºå±‚é¢ï¼‰ä¸Šè¿›è¡Œè¿ç§»ï¼Œæ‰€ä»¥ä»»ä½•éœ€è¦æŒä¹…åŒ–çš„æ•°æ®éƒ½åº”å­˜å‚¨åœ¨åç«¯æœåŠ¡ï¼ˆæ¯”å¦‚æ•°æ®åº“ï¼‰ï¼Œè€Œéç›´æ¥å’ŒæœåŠ¡ç«¯è€¦åˆåœ¨ä¸€èµ·ï¼Œè€Œä¸”æ•°æ®åº“ç­‰æœ‰çŠ¶æ€æœåŠ¡ä¹Ÿä¸é€‚åˆåšè¿›é•œåƒå†…ï¼Œåˆ¶ä½œè¿›é•œåƒçš„éƒ¨åˆ†åº”è¯¥éƒ½ä¸ºæ— çŠ¶æ€ä¸”æ— å…±äº«çš„ã€‚
å…·ä½“æ¥è¯´ï¼Œé€šè¿‡ä½¿ç”¨äº‘æ•°æ®åº“æˆ–è€…å…¶ä»–æ–¹å¼ï¼ŒæŠŠæœ‰çŠ¶æ€çš„æ¨¡å—è¿›è¡ŒæœåŠ¡åŒ–ï¼ŒæœåŠ¡ç«¯ä»£ç åªéœ€è¦å¼•ç”¨åœ°å€æˆ–è®¿é—®ç›¸åº”APIå³å¯ä½¿ç”¨ç›¸å…³èµ„æºã€‚å¦‚æ­¤å®ç°ä¹‹åï¼ŒæœåŠ¡ç«¯é•œåƒåŒ–ä¹‹åå¯ä»¥è‡ªç”±åœ°åœ¨å„ä¸ªä¸»æœºä¸Šè¿›è¡Œå®ä¾‹åŒ–ï¼Œä¸å—æ•°æ®æŒç»­åŒ–ç­‰é—®é¢˜çš„åˆ¶çº¦ã€‚</p>

<h3 id="è®°å½•éƒ¨ç½²è¿‡ç¨‹">è®°å½•éƒ¨ç½²è¿‡ç¨‹</h3>
<p>è¿›è¡Œä¸€æ¬¡åº”ç”¨éƒ¨ç½²ï¼Œå¹¶å°†éƒ¨ç½²è¿‡ç¨‹ä¸­çš„å¦‚ä¸‹æŒ‡ä»¤æ“ä½œè®°å½•ä¸‹æ¥ï¼š</p>
<ul>
  <li>è½¯ä»¶å®‰è£…</li>
  <li>é…ç½®æ“ä½œ</li>
  <li>é€‰æ‹©æš´éœ²çš„ç«¯å£</li>
</ul>

<p>ä»¥ä¸‹é¢è¿™ä¸ªDockerfileä¸ºä¾‹ï¼š</p>
<ul>
  <li>é€šè¿‡ENVæŒ‡ä»¤è®¾ç½®ç¯å¢ƒå˜é‡</li>
  <li>é€šè¿‡ADDæŒ‡ä»¤å°†æœ¬åœ°æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨é‡Œ</li>
  <li>é€šè¿‡RUNæŒ‡ä»¤æ‰§è¡Œå‘½ä»¤è¡Œæ“ä½œï¼Œè¿™é‡Œä¸»è¦æ˜¯yum installè¿›è¡Œä¾èµ–è½¯ä»¶åŒ…å®‰è£…</li>
  <li>é€šè¿‡EXPOSEæŒ‡ä»¤æŒ‡å®šéœ€è¦æš´éœ²çš„æœåŠ¡ç«¯å£</li>
  <li>é€šè¿‡ENTRYPOINTæŒ‡ä»¤è®¾ç½®å®¹å™¨è¿è¡Œèµ·æ¥åéœ€è¦æ‰§è¡Œçš„ç¨‹åºæˆ–å‘½ä»¤</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FROM daocloud.io/centos:7 
MAINTAINER mate
 
ENV TZ "Asia/Shanghai" 
ENV TERM xterm 

ADD aliyun-mirror.repo /etc/yum.repos.d/CentOS-Base.repo 
ADD aliyun-epel.repo /etc/yum.repos.d/epel.repo 
RUN yum install -y curl wget tar bzip2 unzip vim-enhanced passwd sudo yum-utils hostname net-tools rsync man &amp;&amp; \ 
	yum install -y gcc gcc-c++ git make automake cmake patch logrotate python-devel libpng-devel libjpeg-devel &amp;&amp; \ 
	yum install -y --enablerepo=epel pwgen python-pip &amp;&amp; \ 
	yum clean all 
RUN pip install supervisor
 
ADD supervisord.conf /etc/supervisord.conf 
RUN mkdir -p /etc/supervisor.conf.d &amp;&amp; mkdir -p /var/log/supervisor 
EXPOSE 22 
ENTRYPOINT ["/usr/bin/supervisord", "-n", "-c", "/etc/supervisord.conf"] 
</code></pre></div></div>

<p>å¤‡æ³¨ï¼š
åˆ¶ä½œé•œåƒè¿‡ç¨‹ä¸­ï¼Œé…ç½®å¯ä»¥é€šè¿‡ENVç›´æ¥è®¾ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œä½†å¦‚æœæ˜¯è¿è¡Œçš„ç¨‹åºä¾èµ–çš„é…ç½®éœ€è¦æ–‡ä»¶åŒ–ï¼Œç±»ä¼¼æ ·ä¾‹ä¸­çš„supervisord.confé…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆæ­¤æ–‡ä»¶æœ€å¥½</p>

<h3 id="ç¼–å†™dockerfile">ç¼–å†™Dockerfile</h3>
<p>æ›´åŠ è¯¦ç»†å…·ä½“çš„Dockerfileçš„è¯­æ³•æ ¼å¼ã€ç¼–å†™è§„èŒƒå¯ä»¥å‚è€ƒå¦‚ä¸‹èµ„æ–™ï¼š<br />
<a href="https://docs.docker.com/engine/reference/builder/">| Docker Documentation</a>
http://www.docker.org.cn/dockerppt/114.html</p>
]]></content>
      <categories>
        
          <category> å®¹å™¨ </category>
        
      </categories>
      <tags>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[åŸºäºäº‘åŸç”ŸæŠ€æœ¯çš„äº§å“å¼€å‘åŸåˆ™]]></title>
      <url>/%E6%9E%B6%E6%9E%84/2018/11/25/Cloud-Native-Development-Principle/</url>
      <content type="html"><![CDATA[<h2 id="ä¼ ç»Ÿå¼€å‘æ¨¡å¼å›°å±€">ä¼ ç»Ÿå¼€å‘æ¨¡å¼å›°å±€</h2>
<ul>
  <li>
    <p>å¼€å‘ã€æµ‹è¯•ã€è¿ç»´æ— æ³•ä¸€ä½“åŒ–ï¼Œä¸Šçº¿å‘¨æœŸé•¿
å¼€å‘ã€æµ‹è¯•ã€çº¿ä¸Šå¤šå¥—ç¯å¢ƒéœ€è¦è¿›è¡Œå•ç‹¬ç»´æŠ¤ï¼Œå®¹æ˜“é€ æˆä¸ä¸€è‡´å½±å“å„é˜¶æ®µçš„å·¥ä½œå¼€å±•ï¼Œè¿›è€Œå¼•å‘ä¸€äº›çº¿ä¸Šæ•…éšœç­‰é—®é¢˜</p>
  </li>
  <li>
    <p>ä¼ ç»Ÿåº”ç”¨å¼€å‘èµ„æºåˆ©ç”¨ç‡ä½
è€ƒè™‘ä¸šåŠ¡æ‰©å®¹ã€å³°å€¼ç­‰æƒ…å†µï¼Œéœ€è¦å†—ä½™ä¸€å®šæœåŠ¡å™¨ä¹‹ç±»çš„èµ„æºï¼Œæ‰‹å·¥ç»´æŠ¤è¿™äº›èµ„æºå¾ˆéš¾åšåˆ°å®æ—¶ä¸”å‡è¡¡çš„æ°´å¹³</p>
  </li>
  <li>
    <p>å•ä½“åº”ç”¨æ¶æ„æ— æ³•æ»¡è¶³åº”ç”¨å¿«é€Ÿä¸Šçº¿å’Œè¿­ä»£è¦æ±‚
ä¸šåŠ¡ä»£ç å’Œç³»ç»Ÿä»£ç é«˜åº¦è€¦åˆé€ æˆæ•´ä½“å¯ç”¨æ€§è¾ƒä½ï¼Œå½±å“äº§å“æ¼”è¿›ï¼Œæ–°åŠŸèƒ½è¿­ä»£ã€é—®é¢˜æ’æŸ¥ç­‰å·¥ä½œæ·±å—åˆ¶çº¦</p>
  </li>
</ul>

<h2 id="äº‘åŸç”Ÿçš„ä¸‰å¤§ç‰¹å¾">äº‘åŸç”Ÿçš„ä¸‰å¤§ç‰¹å¾ï¼š</h2>
<ul>
  <li>å®¹å™¨åŒ–å°è£…ï¼šä»¥å®¹å™¨ä¸ºåŸºç¡€ï¼Œæé«˜æ•´ä½“å¼€å‘æ°´å¹³ï¼Œå½¢æˆä»£ç å’Œç»„ä»¶é‡ç”¨ï¼Œç®€åŒ–äº‘åŸç”Ÿåº”ç”¨ç¨‹åºçš„ç»´æŠ¤ã€‚åœ¨å®¹å™¨ä¸­è¿è¡Œåº”ç”¨ç¨‹åºå’Œè¿›ç¨‹ï¼Œå¹¶ä½œä¸ºåº”ç”¨ç¨‹åºéƒ¨ç½²çš„ç‹¬ç«‹å•å…ƒï¼Œå®ç°é«˜æ°´å¹³èµ„æºéš”ç¦»ã€‚</li>
  <li>è‡ªåŠ¨åŒ–ç®¡ç†ï¼šé€šè¿‡é›†ä¸­å¼çš„ç¼–æ’è°ƒåº¦ç³»ç»Ÿæ¥åŠ¨æ€çš„ç®¡ç†å’Œè°ƒåº¦ï¼Œæé«˜ç³»ç»Ÿå’Œèµ„æºåˆ©ç”¨ç‡é™ä½è¿ç»´æˆæœ¬ã€‚</li>
  <li>é¢å‘å¾®æœåŠ¡ï¼šæ˜ç¡®æœåŠ¡é—´çš„ä¾èµ–äº’ç›¸è§£è€¦ï¼Œé€šè¿‡æ¾è€¦åˆçš„æ–¹å¼æå‡åº”ç”¨çš„æ•´ä½“æ•æ·æ€§ã€‚</li>
</ul>

<p>ä¸€ä¸ªä¼˜ç§€çš„äº‘åŸç”Ÿäº§å“ï¼Œä»äº§å“è®¾è®¡é˜¶æ®µå°±åº”è¯¥è€ƒè™‘è¿™ä¸‰æ–¹é¢å› ç´ ï¼Œä¸‹é¢é€æ¡è¿›è¡Œåˆ†æã€‚</p>

<h2 id="äº‘åŸç”Ÿäº§å“å¼€å‘åŸåˆ™">äº‘åŸç”Ÿäº§å“å¼€å‘åŸåˆ™</h2>
<p>äº§å“å®¹å™¨åŒ–è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<h3 id="æ˜¾ç¤ºå£°æ˜ä¾èµ–å…³ç³»">æ˜¾ç¤ºå£°æ˜ä¾èµ–å…³ç³»</h3>
<p>é€šè¿‡ä¾èµ–æ¸…å•çš„æ–¹å¼æ˜ç¡®çš„å£°æ˜æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼Œå¹¶ä¸”åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ä¾èµ–éš”ç¦»å·¥å…·æ¥ç¡®ä¿ç¨‹åºä¸ä¼šè°ƒç”¨ç³»ç»Ÿä¸­å­˜åœ¨ä½†æ¸…å•ä¸­æœªå£°æ˜çš„ä¾èµ–é¡¹ã€‚è¿™æ ·å¯ä»¥ç®€åŒ–ç¯å¢ƒé…ç½®æµç¨‹ï¼Œå¹¶ä¿è¯åº”ç”¨çš„ç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒæ›´åŠ ä¸€è‡´ã€‚
å…·ä½“åˆ°è¯­è¨€ä¸Šæ¥è¯´ä¾‹å¦‚Ruby çš„ Bundler ä½¿ç”¨ Gemfile ä½œä¸ºä¾èµ–é¡¹å£°æ˜æ¸…å•ï¼Œä½¿ç”¨ bundle exec æ¥è¿›è¡Œä¾èµ–éš”ç¦»ã€‚Python ä¸­åˆ™å¯åˆ†åˆ«ä½¿ç”¨ä¸¤ç§å·¥å…·ï¼š Pip ç”¨ä½œä¾èµ–å£°æ˜ï¼Œ Virtualenv ç”¨ä½œä¾èµ–éš”ç¦»ã€‚ç”šè‡³ C è¯­è¨€ä¹Ÿæœ‰ç±»ä¼¼å·¥å…·ï¼Œ Autoconf ç”¨ä½œä¾èµ–å£°æ˜ï¼Œé™æ€é“¾æ¥åº“ç”¨ä½œä¾èµ–éš”ç¦»ã€‚æ— è®ºç”¨ä»€ä¹ˆå·¥å…·ï¼Œä¾èµ–å£°æ˜å’Œä¾èµ–éš”ç¦»å»ºè®®ä¸€èµ·ä½¿ç”¨ã€‚</p>

<h3 id="åˆ†ç¦»ä»£ç ä¸é…ç½®">åˆ†ç¦»ä»£ç ä¸é…ç½®</h3>
<p>é€šå¸¸ï¼Œåº”ç”¨çš„ é…ç½® åœ¨ä¸åŒ éƒ¨ç½² (é¢„å‘å¸ƒã€ç”Ÿäº§ç¯å¢ƒã€å¼€å‘ç¯å¢ƒç­‰ç­‰)é—´ä¼šæœ‰å¾ˆå¤§å·®å¼‚ã€‚è¿™å…¶ä¸­åŒ…æ‹¬ï¼š</p>
<ul>
  <li>æ•°æ®åº“ï¼ŒMemcachedï¼Œä»¥åŠå…¶ä»– åç«¯æœåŠ¡ çš„é…ç½®</li>
  <li>ç¬¬ä¸‰æ–¹æœåŠ¡çš„è¯ä¹¦ï¼Œå¦‚ Amazon S3ã€Twitter ç­‰</li>
  <li>æ¯ä»½éƒ¨ç½²ç‰¹æœ‰çš„é…ç½®ï¼Œå¦‚åŸŸåç­‰</li>
</ul>

<p>å°†é…ç½®ç›´æ¥ä»¥å¸¸é‡çš„å½¢å¼ç¡¬ç¼–ç äºä»£ç ä¸­æ˜¯ä¸€ä¸ªå¾ˆä¸ä¼˜é›…çš„åšæ³•ï¼Œä»ä¾¿åˆ©æ€§ä¸Šæ¥è¯´è¿™æ ·ä¼šå¯¼è‡´åœ¨ä¸åŒçš„åœºæ™¯ä¸­éœ€è¦é€šè¿‡ä¿®æ”¹ä»£ç æ‰èƒ½æ»¡è¶³éœ€æ±‚ï¼Œä»å®‰å…¨æ€§ä¸Šæ¥è¯´ä¼šå¯¼è‡´ä»£ç å¼€æºåˆ™ä¼šæ³„éœ²éƒ¨åˆ†å…³é”®é…ç½®æ•°æ®ã€‚</p>

<p>å¸¸è§çš„ä¸¤ä¸ªæ¨èæ–¹æ¡ˆï¼š</p>
<ul>
  <li>ä½¿ç”¨é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ç®¡ç†ï¼Œåå¤„æ˜¯é…ç½®æ–‡ä»¶å’Œä»£ç åº“è¿˜æ˜¯è¾ƒå®¹æ˜“äº§ç”Ÿè€¦åˆï¼Œå¹¶ä¸”é…ç½®æ ¼å¼å¸¸å¸¸ä¼šå’Œå¼€å‘è¯­è¨€ã€æ¡†æ¶äº§ç”Ÿä¾èµ–</li>
  <li>ä½¿ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ç®¡ç†ï¼Œæ›´ä¸ºæ¨èçš„æ–¹æ¡ˆï¼Œå’Œä»£ç åº“å®Œå…¨ç‹¬ç«‹å¹¶ä¸”å¼€å‘è¯­è¨€æ¡†æ¶æ— å…³</li>
</ul>

<h3 id="ä¸åç«¯æœåŠ¡ä¿æŒæ¾è€¦åˆçš„å…³ç³»">ä¸åç«¯æœåŠ¡ä¿æŒæ¾è€¦åˆçš„å…³ç³»</h3>
<p>åç«¯æœåŠ¡æ˜¯æŒ‡ç¨‹åºè¿è¡Œæ‰€éœ€è¦çš„é€šè¿‡ç½‘ç»œè°ƒç”¨çš„å„ç§æœåŠ¡ï¼Œå¦‚æ•°æ®åº“ï¼ˆMySQLï¼ŒCouchDBï¼‰ï¼Œæ¶ˆæ¯/é˜Ÿåˆ—ç³»ç»Ÿï¼ˆRabbitMQï¼ŒBeanstalkdï¼‰ï¼ŒSMTP é‚®ä»¶å‘é€æœåŠ¡ï¼ˆPostfixï¼‰ï¼Œä»¥åŠç¼“å­˜ç³»ç»Ÿï¼ˆMemcachedï¼‰ç­‰ç­‰ã€‚</p>

<p>ä¸ä¸Šä¸€ä¸ªåŸåˆ™å¯¹åº”ï¼Œé€šå¸¸å»ºè®®å°†åç«¯æœåŠ¡çš„URLåœ°å€æˆ–è€…å…¶ä»–æœåŠ¡å®šä½å‘ç°æ–¹å¼å­˜å‚¨äºé…ç½®ä¹‹ä¸­å¹¶è¿›è¡Œç»´æŠ¤ï¼Œä»£ç ç›´æ¥è®¿é—®é…ç½®å³å¯æ‹¿åˆ°è®¿é—®æœåŠ¡çš„æ–¹æ³•ï¼Œå¯ä»¥åšåˆ°åœ¨ä¸æ”¹åŠ¨ä»£ç çš„æƒ…å†µä¸‹ï¼Œéšæ„çš„æ›¿æ¢å„é¡¹åç«¯æœåŠ¡ã€‚
è¿™æ ·éƒ¨ç½²å¯ä»¥æŒ‰éœ€åŠ è½½æˆ–å¸è½½èµ„æºã€‚ä¾‹å¦‚ï¼Œå¦‚æœåº”ç”¨çš„æ•°æ®åº“æœåŠ¡ç”±äºç¡¬ä»¶é—®é¢˜å‡ºç°å¼‚å¸¸ï¼Œç®¡ç†å‘˜å¯ä»¥ä»æœ€è¿‘çš„å¤‡ä»½ä¸­æ¢å¤ä¸€ä¸ªæ•°æ®åº“ï¼Œå¸è½½å½“å‰çš„æ•°æ®åº“ï¼Œç„¶ååŠ è½½æ–°çš„æ•°æ®åº“ â€“ æ•´ä¸ªè¿‡ç¨‹éƒ½ä¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œæˆ–è€…æ˜¯å°†æœ¬åœ° MySQL æ•°æ®åº“æ¢æˆç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆä¾‹å¦‚ Amazon RDSï¼‰ã€‚
å¦‚ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„äº§å“ä¸åç«¯æœåŠ¡å…³ç³»çš„æ ·ä¾‹å›¾ï¼š
<img src="https://github.com/ShoreCN/ShoreCN.github.io/blob/master/resource/12factor_backing_services.jpg?raw=true" alt="" /></p>

<h3 id="ä»¥æ— çŠ¶æ€çš„è¿›ç¨‹æ¥è¿è¡Œåº”ç”¨">ä»¥æ— çŠ¶æ€çš„è¿›ç¨‹æ¥è¿è¡Œåº”ç”¨</h3>
<ul>
  <li>æ— çŠ¶æ€æœåŠ¡:å°±æ˜¯æ²¡æœ‰ç‰¹æ®ŠçŠ¶æ€çš„æœåŠ¡,å„ä¸ªè¯·æ±‚å¯¹äºæœåŠ¡å™¨æ¥è¯´ç»Ÿä¸€æ— å·®åˆ«å¤„ç†,è¯·æ±‚è‡ªèº«æºå¸¦äº†æ‰€æœ‰æœåŠ¡ç«¯æ‰€éœ€è¦çš„æ‰€æœ‰å‚æ•°(æœåŠ¡ç«¯è‡ªèº«ä¸å­˜å‚¨è·Ÿè¯·æ±‚ç›¸å…³çš„ä»»ä½•æ•°æ®,ä¸åŒ…æ‹¬æ•°æ®åº“å­˜å‚¨ä¿¡æ¯)</li>
  <li>æœ‰çŠ¶æ€æœåŠ¡:ä¸ä¹‹ç›¸å,æœ‰çŠ¶æ€æœåŠ¡åœ¨æœåŠ¡ç«¯ä¿ç•™ä¹‹å‰è¯·æ±‚çš„ä¿¡æ¯,ç”¨ä»¥å¤„ç†å½“å‰è¯·æ±‚,æ¯”å¦‚sessionç­‰</li>
</ul>

<p>è™½ç„¶å®¹å™¨æŠ€æœ¯æ”¯æŒæœ‰çŠ¶æ€æœåŠ¡åŠŸèƒ½ï¼ˆå°†éƒ¨åˆ†æ•°æ®éšæ—¶è¿›è¡Œå¤‡ä»½ï¼Œå¹¶ä¸”åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„æœ‰çŠ¶æ€æœåŠ¡æ—¶ï¼Œå¯ä»¥é€šè¿‡å¤‡ä»½æ¢å¤è¿™äº›æ•°æ®ï¼Œä»¥è¾¾åˆ°æ•°æ®æŒä¹…åŒ–çš„ç›®çš„ï¼‰ï¼Œä½†è€ƒè™‘æœ‰çŠ¶æ€çš„æœåŠ¡ç‰µæ‰¯åˆ°å­˜å‚¨å·æŒ‚è½½ç­‰é—®é¢˜å¾ˆéš¾åœ¨æ°´å¹³æ–¹å‘ï¼ˆæœåŠ¡å™¨ä¸»æœºå±‚é¢ï¼‰ä¸Šè¿›è¡Œè¿ç§»ï¼Œæ‰€ä»¥å®¹å™¨åŒ–åœºæ™¯ä¸‹ä¸€ä¸ªé«˜æ•ˆçš„æ¶æ„æ¨¡å¼æ˜¯åº”ç”¨çš„è¿›ç¨‹éƒ½ä¸ºæ— çŠ¶æ€ä¸”æ— å…±äº«ï¼Œä»»ä½•éœ€è¦æŒä¹…åŒ–çš„æ•°æ®éƒ½å­˜å‚¨åœ¨åç«¯æœåŠ¡å†…ï¼Œæ¯”å¦‚æ•°æ®åº“ã€‚
ä¸€äº›äº’è”ç½‘ç³»ç»Ÿä¾èµ–äº â€œç²˜æ€§ sessionâ€ï¼Œ è¿™æ˜¯æŒ‡å°†ç”¨æˆ·sessionä¸­çš„æ•°æ®ç¼“å­˜è‡³æŸè¿›ç¨‹çš„å†…å­˜ä¸­ï¼Œå¹¶å°†åŒä¸€ç”¨æˆ·çš„åç»­è¯·æ±‚è·¯ç”±åˆ°åŒä¸€ä¸ªè¿›ç¨‹ï¼Œä½†è¿™æ ·åœ¨ä»£ç é‡æ–°éƒ¨ç½²ã€é…ç½®æ›´æ”¹æˆ–ç¯å¢ƒå˜æ›´æ—¶ä»ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œä¸å‰é¢çš„æœåŠ¡åç«¯ä¿æŒæ¾è€¦åˆå…³ç³»åŸåˆ™åŒ¹é…çš„å»ºè®®æ–¹æ¡ˆæ˜¯å°†Session ä¸­çš„æ•°æ®ä¿å­˜åœ¨è¯¸å¦‚ Memcached æˆ– Redis è¿™æ ·çš„å¸¦æœ‰è¿‡æœŸæ—¶é—´çš„ç¼“å­˜ä¸­ã€‚</p>

<h3 id="é€šè¿‡å¤šè¿›ç¨‹å®ç°å¹¶å‘">é€šè¿‡å¤šè¿›ç¨‹å®ç°å¹¶å‘</h3>
<p>é€šè¿‡å°†ä¸šåŠ¡åˆ†ä¸ºå¤šä¸ªè¿›ç¨‹è¿è¡Œï¼ˆä¾‹å¦‚ä¸‹å›¾webè¿›ç¨‹æ¥å¤„ç†HTTPè¯·æ±‚ï¼Œworkè¿›ç¨‹å¤„ç†åå°ä¸šåŠ¡å·¥ä½œç­‰ï¼‰ï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºå¿…é¡»å¯ä»¥åœ¨å¤šå°ç‰©ç†æœºå™¨é—´è·¨è¿›ç¨‹å·¥ä½œï¼Œå¯ä»¥ä½¿ç³»ç»Ÿæ‰©å±•å˜å¾—ååˆ†è½»æ¾ï¼ŒæŒ‰éœ€å¢åŠ å¯¹åº”åˆ†ç±»çš„è¿›ç¨‹æ•°é‡ä¾¿å¯ä»¥åšåˆ°å¹¶å‘æ€§èƒ½çš„æå‡ã€‚
<img src="https://github.com/ShoreCN/ShoreCN.github.io/blob/master/resource/12factor_process.jpg?raw=true" alt="" /></p>

<p>æ³¨æ„è¿›ç¨‹çš„è®¾è®¡åº”è¯¥ç¬¦åˆä¹‹å‰æå‡ºçš„æ— çŠ¶æ€ã€æ— å…±äº«çš„åŸåˆ™ï¼Œè¿™æ ·åœ¨æ‰©å±•æ—¶èƒ½å‡å°‘æœåŠ¡å™¨ã€ç¯å¢ƒç­‰å› ç´ çš„å½±å“ã€‚</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>äº‘åŸç”Ÿçš„ç¬¬ä¸€ä¸ªç›®æ ‡å°±æ˜¯éœ€è¦å°†äº§å“åº”ç”¨ä¸åº•å±‚èµ„æº(æœåŠ¡å™¨ã€ç³»ç»Ÿç­‰)è¿›è¡Œè§£è€¦ï¼Œå¼€å‘è€…åªéœ€å…³æ³¨è‡ªå·±çš„æ ¸å¿ƒä¸šåŠ¡å³å¯ã€‚è™½ç„¶ç°åœ¨çš„å¼€å‘è¯­è¨€å¤§å¤šæ ‡æ¦œç€è·¨å¹³å°è½»æ¾ç§»æ¤ï¼Œä½†å®é™…å¼€å‘è¿‡ç¨‹ä¸­ç³»ç»Ÿç‰ˆæœ¬ã€åº•å±‚ç»„ä»¶ã€é©±åŠ¨ã€è¡¥ä¸ç­‰å› ç´ æœ€ç»ˆæˆ–å¤šæˆ–å°‘éƒ½ä¼šå¼•å‘ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥å°†ç¯å¢ƒèµ„æºè½»é‡çº§è™šæ‹ŸåŒ–çš„å®¹å™¨æŠ€æœ¯ç›®å‰æ˜¯æœ€ä¼˜ç§€çš„è§£å†³æ–¹æ¡ˆã€‚
è€Œä¸ºäº†å……åˆ†åˆ©ç”¨å®¹å™¨åŒ–æŠ€æœ¯çš„ä¼˜åŠ¿ï¼Œéœ€è¦å°†æˆ‘ä»¬çš„åº”ç”¨è¿›è¡Œç›¸åº”çš„æ¨¡å—åŒ–å¤„ç†ï¼Œå¾®æœåŠ¡æ˜¯ä¸€ä¸ªç›®å‰ä¸šç•Œä½¿ç”¨ç‡è¾ƒé«˜çš„æ¶æ„æ–¹å¼ï¼ŒåŠ ä¸Šä¹‹å‰äº‘åŸç”Ÿçš„åº”ç”¨å¼€å‘åŸåˆ™ï¼Œåº”ç”¨å¯ä»¥çµæ´»åœ°åšåˆ°è·¨äº‘ç¯å¢ƒæä¾›ä¸šåŠ¡æœåŠ¡ï¼Œå‚ç›´ã€æ°´å¹³çš„å¿«é€Ÿæ‰©å±•ã€‚
<img src="https://github.com/ShoreCN/ShoreCN.github.io/blob/master/resource/cloud_native_mindmap.jpg?raw=true" alt="" /></p>

<blockquote>
  <p>å‚è€ƒèµ„æ–™ï¼š<br />
<a href="https://12factor.net/">The Twelve-Factor App</a><br />
<a href="http://dockone.io/article/2991">äº‘åŸç”Ÿæ¶æ„æ¦‚è¿° - DockOne.io</a><br />
<a href="https://zhuanlan.zhihu.com/p/27196777">äº‘åŸç”Ÿï¼ˆCloudNativeï¼‰å°†æˆä¸ºåº”ç”¨äº‘åŒ–å¼€å‘çš„ä¸»æµæ–¹å¼ - çŸ¥ä¹</a><br />
<a href="https://cloud.tencent.com/developer/article/1156697">äº‘åŸç”Ÿæ¦‚å¿µ - äº‘+ç¤¾åŒº - è…¾è®¯äº‘</a></p>

</blockquote>
]]></content>
      <categories>
        
          <category> æ¶æ„ </category>
        
      </categories>
      <tags>
        
          <tag> äº‘è®¡ç®— </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[è·¨äº‘å¹³å°å®æ–½æ–¹æ¡ˆé¢„ç ”]]></title>
      <url>/%E6%9E%B6%E6%9E%84/2018/11/20/Cross-Cloud-credible-analysis/</url>
      <content type="html"><![CDATA[<h2 id="åŸºäºk8sé›†ç¾¤æ­å»º">åŸºäºK8Sé›†ç¾¤æ­å»º</h2>
<p>åœ¨ä¸åŒäº‘å‚å•†æˆ–åŒä¸ªäº‘å‚å•†ä¸åŒåŒºåŸŸä¸‹åˆ›å»ºK8Sé›†ç¾¤ï¼Œæ¯ä¸ªK8Sé›†ç¾¤ä¸­ç‹¬ç«‹è¿è¡Œä»£ç†ç¨‹åºï¼Œé€šè¿‡ä»£ç†ç¨‹åºè¿›è¡Œé•œåƒéƒ¨ç½²ã€æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ç­‰åŠŸèƒ½ã€‚
ç„¶åå†å¼€å‘ä¸€å¥—å¯¹K8Sé›†ç¾¤è¿›è¡Œæ§åˆ¶ç®¡ç†çš„ç³»ç»Ÿä½œä¸ºåå°ï¼Œç”¨æ¥è¿›è¡Œå¤šä¸ªé›†ç¾¤çš„èµ„æºç®¡ç†è°ƒåº¦ã€‚
ä¼˜åŠ¿ï¼šå•ä¸ªK8Sé›†ç¾¤ä¸‹çš„åŠŸèƒ½å¯ä»¥åˆ©ç”¨ä¹‹å‰æ‹¾äº‘å¹³å°çš„ç°æˆä»£ç 
ç¼ºé™·ï¼šå¯¹å¤šä¸ªK8Sé›†ç¾¤çš„èµ„æºè¿›è¡Œé‡æ–°åˆ†é…ç®¡ç†éœ€è¦è¾ƒå·¨å¤§çš„å¼€å‘å·¥ä½œé‡</p>

<p>æ­¤æ–¹æ¡ˆå·¥ä½œé‡è¾ƒå¤§ä¸”é‡å¤ã€‚</p>

<h2 id="åŸºäºk8sè”é‚¦é›†ç¾¤æ­å»º">åŸºäºK8Sè”é‚¦é›†ç¾¤æ­å»º</h2>
<p>ä½¿ç”¨K8Sè”é‚¦é›†ç¾¤çš„æœºåˆ¶ï¼Œåˆ©ç”¨K8Så®šä¹‰å¥½çš„å„ç±»èµ„æºæ¦‚å¿µï¼Œçœå»äº†èµ„æºè°ƒåº¦ã€é›†ç¾¤é—´é€šä¿¡ã€ç­‰è¯¸å¤šå¼€å‘å·¥ä½œé‡ã€‚
<img src="https://github.com/ShoreCN/ShoreCN.github.io/blob/master/resource/%E8%B7%A8%E4%BA%91%E5%B9%B3%E5%8F%B0%E6%9E%B6%E6%9E%84%E6%A1%86%E6%9E%B6%E5%9B%BE.jpg?raw=true" alt="" /></p>

<p>å¯ä»¥å°†äº§å“åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p>
<ul>
  <li>
    <p>æœåŠ¡å™¨é€‚é…ï¼š
è¿™å±‚ä¸»è¦å†…å®¹æ˜¯é€šè¿‡åœ¨äº‘ä¸»æœºä¸Šå¸¸é©»ä¸€ä¸ªagentç¨‹åºï¼Œå¯¹æ¥æˆ‘ä»¬ç®¡ç†å¹³å°çš„æ§åˆ¶æŒ‡ä»¤ï¼Œå¹¶å®æ—¶é‡‡é›†ç³»ç»Ÿèµ„æºæƒ…å†µã€‚
å¯ä»¥ä½¿ç”¨golangå¼€å‘ï¼Œå…·æœ‰è¯­æ³•ç®€å•æ€§èƒ½è¾ƒé«˜ï¼Œå¹¶ä¸”ç¼–è¯‘ç”Ÿæˆå‡ºæœåŠ¡ä»£ç†agentç¨‹åºä¹‹åï¼Œå¯ä»¥æ–¹ä¾¿åœ°éƒ¨ç½²åœ¨ä¸åŒçš„äº‘å‚å•†ä¸»æœºä¸Šï¼Œä¸ç”¨å…³å¿ƒè·¨å‚å•†ä¸»æœºä¹‹é—´çš„ç¯å¢ƒå·®å¼‚ç­‰é—®é¢˜ã€‚</p>
  </li>
  <li>
    <p>ç®¡ç†å¹³å°ï¼š
é€šè¿‡å°†K8Sçš„å„ç±»èµ„æºï¼ˆClusterã€Deploymentã€ReplicasSetã€Serviceã€Ingressç­‰ï¼‰ï¼ŒæŒ‰ç…§ä¸šåŠ¡é€»è¾‘å°è£…æˆæˆ‘ä»¬è‡ªå·±çš„ç³»ç»Ÿåå°åŠŸèƒ½ï¼ˆé›†ç¾¤ç®¡ç†ã€éƒ¨ç½²ã€å†—ä½™ã€æœåŠ¡ã€è´Ÿè½½å‡è¡¡ç­‰ï¼‰ï¼Œé€šè¿‡æ²¿ç”¨éƒ¨åˆ†åŸæœ‰çš„åå°ä»£ç ï¼Œä½¿ç”¨Pythonè¯­è¨€ä»¥Tornadoä¸ºæ¡†æ¶å¼€å‘ä¸€å¥—é’ˆå¯¹ä¸Šè¿°èµ„æºçš„RESTful APIï¼Œå¯ä»¥æ²¿ç”¨ä¹‹å‰çš„åå°æ¡†æ¶è®¾è®¡ã€‚
<img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/TenCloud_Architecture.png" alt="" />
æ•°æ®å±‚ã€é•œåƒã€ç”¨æˆ·ã€Tornadoæ¡†æ¶éƒ¨åˆ†å¯ä»¥æ²¿ç”¨åŸæœ‰ä»£ç ï¼Œé‡æ–°å¼€å‘ä¸šåŠ¡æœåŠ¡éƒ¨åˆ†çš„é›†ç¾¤ã€éƒ¨ç½²ã€æœåŠ¡åŠŸèƒ½ã€‚</p>
  </li>
  <li>
    <p>ç®¡ç†å¹³å°æ“ä½œç•Œé¢ï¼š
é€šè¿‡å¯¹æ¥åå°æä¾›çš„RESTful APIï¼Œäº§å“åŒ–è®¾è®¡åä»¥å‰ç«¯å½¢å¼å±•ç°ç®¡ç†ç•Œé¢ã€‚</p>
  </li>
</ul>

<h3 id="ç²¾ç®€ç‰ˆæœ¬">ç²¾ç®€ç‰ˆæœ¬</h3>
<p>ä¸€ä¸ªå¯ä»¥è€ƒè™‘çš„ç²¾ç®€ç‰ˆæœ¬å°±æ˜¯å¼€å‘ä¸€ä¸ªç›´æ¥è·‘åœ¨äº‘ä¸»æœºä¸Šçš„è„šæœ¬å¼å‘½ä»¤è¡Œç®¡ç†ç³»ç»Ÿã€‚å°è£…K8Sè”é‚¦é›†ç¾¤çš„éƒ¨ç½²è¿‡ç¨‹ã€æ¨¡æ¿åŒ–æ•´åˆK8Sè”é‚¦é›†ç¾¤åº•å±‚çš„èµ„æºæ“ä½œã€‚
ç²¾ç®€ç‰ˆæœ¬çš„å¼€å‘å·¥ä½œé‡ä¸»è¦é›†ä¸­åœ¨ï¼š</p>
<ul>
  <li>ä¸šåŠ¡æ¨¡å‹æ¢³ç†å°è£…</li>
  <li>å‘½ä»¤è§£æè½¬æ¢</li>
</ul>

<p>é—®é¢˜ï¼š</p>
<ul>
  <li>æ¶‰åŠä¸€äº›ç”¨æˆ·ç¬¬ä¸‰æ–¹æˆæƒçš„æ“ä½œï¼ˆå¦‚GitHub OAuthè®¤è¯ï¼‰ï¼Œåœ¨å‘½ä»¤è¡Œç«¯å¯èƒ½éš¾ä»¥å®ç°</li>
  <li>è‹¥æƒ³æ”¶é›†K8Sä»¥å¤–çš„ä¸»æœºã€ä»»åŠ¡ç­‰ä¿¡æ¯ï¼Œè¿˜æ˜¯éœ€è¦å®ç°ä¸€å¥—å“åº”ç½‘ç»œè¯·æ±‚çš„æ¡†æ¶</li>
</ul>

<h2 id="åŸºäºç°æœ‰äº§å“æ­å»º">åŸºäºç°æœ‰äº§å“æ­å»º</h2>
<h3 id="f5">F5</h3>
<p>è¡Œä¸šé¢†å¯¼è€…ï¼ŒF5 è§£å†³æ–¹æ¡ˆé›†æˆäº†ä»¥ä¸‹å„é¡¹ï¼š</p>
<ul>
  <li>å…¬æœ‰äº‘æä¾›å•†ï¼Œå¦‚ AWSã€Microsoft Azure å’Œ Google Cloud Platformã€‚</li>
  <li>ç§æœ‰äº‘å’Œå¼€æºå¹³å°ï¼Œå¦‚ OpenStackã€VMware å’Œ OpenShiftã€‚</li>
  <li>è‡ªåŠ¨åŒ–å·¥å…·åŒ…ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨ Ansibleã€Puppet æˆ– HashiCorp éƒ¨ç½²åº”ç”¨æœåŠ¡ï¼Œåœ¨ DevOps æ–¹æ³•ä¸­ä¸ºåº”ç”¨æœåŠ¡æä¾›å£°æ˜æ¥å£ã€‚</li>
  <li>å®¹å™¨ç¯å¢ƒä¸­çš„å¾®æœåŠ¡ï¼ˆå¦‚ Kubernetes å’Œ Mesosï¼‰ï¼Œä»¥ä¾¿åœ¨ä¸œè¥¿å‘æµé‡ä¸­å¯ç”¨åº”ç”¨æœåŠ¡ã€‚</li>
</ul>

<h3 id="a10-network">A10 Network</h3>
<p>è·¨äº‘äº§å“Harmony Controller 
Harmonyå¹³å°çš„ç†å¿µæ˜¯éšæ—¶éšåœ°å®æ–½ç­–ç•¥ï¼Œå®ƒå°†å®‰å…¨åº”ç”¨æœåŠ¡ä¸å†…éƒ¨éƒ¨ç½²ç¯å¢ƒã€å…¬æœ‰äº‘ã€ç§æœ‰äº‘å’Œæ··åˆäº‘è¡”æ¥åœ¨ä¸€èµ·ã€‚A10 Harmony æ§åˆ¶å™¨å…·å¤‡è™šæ‹ŸåŒ–ã€SaaS å’Œç‰©ç†è§„æ ¼ï¼Œå¯ç”¨äºç®¡ç†å¤šäº‘ç¯å¢ƒä¸‹çš„å®‰å…¨åº”ç”¨äº¤ä»˜æœåŠ¡ï¼Œå¹¶é›†æˆå¤šç§é…ç½®å’Œè‡ªåŠ¨åŒ–æœåŠ¡ã€‚</p>

<h3 id="redhat">RedHat</h3>
<p>OpenShiftå®¹å™¨å¹³å°
çº¢å¸½ OpenShift æ˜¯ä¸€æ¬¾å¼€æºå®¹å™¨åº”ç”¨ç¨‹åºå¹³å°ï¼Œä¸»è¦ä»¥ Docker å®¹å™¨ä¸ºåŸºç¡€ï¼Œå¹¶é‡‡ç”¨ Kubernetes å®¹å™¨é›†ç¾¤ç®¡ç†è¿›è¡Œç¼–æ’ã€‚OpenShiftå¯æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’ŒæœåŠ¡ï¼ŒåŒ…æ‹¬ Web æ¡†æ¶ã€æ•°æ®åº“æˆ–ä¸ç§»åŠ¨åº”ç”¨å’Œå¤–éƒ¨åå°çš„è¿æ¥å™¨ã€‚OpenShift å¹³å°åŒæ—¶æ”¯æŒäº‘åŸç”Ÿã€æ— çŠ¶æ€çš„åº”ç”¨ç¨‹åºä»¥åŠä¼ ç»Ÿã€æœ‰çŠ¶æ€çš„åº”ç”¨
ç¨‹åºã€‚
<img src="https://github.com/ShoreCN/ShoreCN.github.io/blob/master/resource/Redhat_Openshift_Architecture.jpg?raw=true" alt="" /></p>

<h3 id="rancher">Rancher</h3>
<p>Rancherä¸ºDevOpså·¥ç¨‹å¸ˆæä¾›äº†ä¸€ä¸ªç›´è§‚çš„ç”¨æˆ·ç•Œé¢æ¥ç®¡ç†ä»–ä»¬çš„æœåŠ¡å®¹å™¨ï¼Œç”¨æˆ·ä¸éœ€è¦æ·±å…¥äº†è§£Kubernetesæ¦‚å¿µå°±å¯ä»¥å¼€å§‹ä½¿ç”¨Rancherã€‚ RancheråŒ…å«åº”ç”¨å•†åº—ï¼Œæ”¯æŒä¸€é”®å¼éƒ¨ç½²Helmå’ŒComposeæ¨¡æ¿ã€‚Rancheré€šè¿‡å„ç§äº‘ã€æœ¬åœ°ç”Ÿæ€ç³»ç»Ÿäº§å“è®¤è¯ï¼Œå…¶ä¸­åŒ…æ‹¬å®‰å…¨å·¥å…·ï¼Œç›‘æ§ç³»ç»Ÿï¼Œå®¹å™¨ä»“åº“ä»¥åŠå­˜å‚¨å’Œç½‘ç»œé©±åŠ¨ç¨‹åºã€‚
<img src="https://github.com/ShoreCN/ShoreCN.github.io/blob/master/resource/Rancher_Architecture.jpg?raw=true" alt="" /></p>

<p><strong>å®¹å™¨å¹³å°èƒ½åŒæ—¶å¯¹å¤šä¸ªKubernetesé›†ç¾¤è¿›è¡Œç®¡ç†ï¼Œä½†æ¯ä¸ªé›†ç¾¤ä¸Šè¿è¡Œçš„åº”ç”¨å’Œå…¶ä»–é›†ç¾¤éš”ç¦»ã€‚</strong></p>

<h3 id="æ—¶é€Ÿäº‘">æ—¶é€Ÿäº‘</h3>
<p>ä¼ä¸šçº§å®¹å™¨ PaaS å¹³å° TenxCloud Enterprise (TCE)
éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œå®¢æˆ·é€šå¸¸ä¼šä½¿ç”¨å¤šä¸ªä¸åŒçš„èŠ‚ç‚¹åŒºåŸŸï¼Œç”šè‡³ä½¿ç”¨å¤šä¸ªä¸åŒçš„åŸºç¡€äº‘æœåŠ¡æä¾›å•†ã€‚æ—¶é€Ÿäº‘çš„è·¨äº‘ç®¡ç†è§£å†³æ–¹æ¡ˆé€šè¿‡åˆ›å»ºç§æœ‰é›†ç¾¤ï¼Œå¹¶æ·»åŠ ä¸åŒIaaSçš„äº‘ä¸»æœºï¼Œå¯ä¸€é”®å°†å®¹å™¨é•œåƒå‘å¸ƒåˆ°ä¸åŒçš„IaaSå¹³å°ä¸Šï¼Œå±è”½äº†ä¸åŒIaaSå‚å•†ä¹‹é—´çš„åº•å±‚å¼‚æ„é—®é¢˜ï¼Œæå¤§çš„é™ä½äº†ITç®¡ç†çš„å¤æ‚åº¦ï¼Œå¹¶å¯è½»æ¾å®ç°åº”ç”¨åœ¨å¤šä¸ªä¸åŒçš„IaaSä¹‹é—´çš„è¿ç§»ã€å®¹ç¾ä»¥åŠçƒ­å¤‡ä»½ã€‚</p>

<p>æ–¹æ¡ˆç‰¹ç‚¹ï¼š</p>
<ul>
  <li>ä¸€é”®åˆ›å»ºç§æœ‰Dockerä¸»æœºé›†ç¾¤ï¼Œå¹¶æ”¯æŒå°†äº‘ä¸»æœºã€ç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºç­‰æ·»åŠ åˆ°ç§æœ‰é›†ç¾¤ã€‚</li>
  <li>é€šè¿‡æ—¶é€Ÿäº‘å®¹å™¨äº‘å¹³å°ç»Ÿä¸€ç®¡ç†å¤šä¸ªä¸åŒIaaSä¸Šçš„åº”ç”¨ã€‚</li>
  <li>åˆ©ç”¨å®¹å™¨æŠ€æœ¯å±è”½åº•å±‚åŸºç¡€äº‘æœåŠ¡ä¹‹é—´çš„å·®å¼‚ï¼Œå®ç°åº”ç”¨åœ¨å¤šä¸ªäº‘ä¹‹é—´çš„è¿ç§»ã€å®¹ç¾åŠçƒ­å¤‡ã€‚</li>
  <li>ç§æœ‰é›†ç¾¤å¯ä»¥æ— ç¼ä½¿ç”¨å®¹å™¨éƒ¨ç½²ã€é•œåƒä¸‹è½½ã€é›†ç¾¤ API ç­‰æœåŠ¡ã€‚</li>
</ul>

<h3 id="cloudify">Cloudify</h3>
<p>Cloudifyæ˜¯ä¸€ä¸ªå¼€æºçš„äº‘åº”ç”¨ç¼–æ’ç³»ç»Ÿï¼Œå¯ä»¥è®©ä½ çš„åº”ç”¨è‡ªåŠ¨åŒ–åœ¨å„ç§ä¸åŒçš„äº‘ä¸Šæ–¹ä¾¿åœ°éƒ¨ç½²ã€‚Cloudifyé‡ç‚¹å…³æ³¨åº”ç”¨è‡ªåŠ¨åŒ–ï¼Œæ‰¿æ‹…äº†éƒ¨åˆ†ä¸šåŠ¡è‡ªåŠ¨åŒ–çš„å·¥ä½œã€‚ä»äº‘IaaSã€PaaSã€SaaSåˆ†å±‚çœ‹ï¼ŒCloudifyæ˜¯ä¸€ä¸ªå…¸å‹çš„é¢å‘åº”ç”¨ç¼–æ’è‡ªåŠ¨åŒ–çš„PaaSå¹³å°ã€‚</p>

<blockquote>
  <p>å‚è€ƒèµ„æ–™<br />
<a href="https://www.redhat.com/cms/managed-files/cl-openshift-container-platform-3.5-datasheet-f7213kc-201704-a4-zh.pdf">çº¢å¸½ OPENSHIFT å®¹å™¨å¹³å° 3.5</a><br />
<a href="https://www.jianshu.com/p/0622d7dbbaa7">è·¨é›†ç¾¤æœåŠ¡â€”â€”å¦‚ä½•åˆ©ç”¨Kubernetes 1.3å®ç°è·¨åŒºé«˜å¯ç”¨ - ç®€ä¹¦</a><br />
<a href="https://www.cnrancher.com/docs/rancher/v2.x/cn/overview/architecture/">1 - æ¶æ„è®¾è®¡ | Rancher Labs</a><br />
<a href="https://blog.csdn.net/liukuan73/article/details/57082617?utm_source=blogxgwz3">Cloudifyï¼šæ‰“é€šåº”ç”¨å’ŒåŸºç¡€æ¶æ„è‡ªåŠ¨åŒ–äº¤ä»˜çš„â€œä»»ç£äºŒè„‰â€ - liukuan73çš„ä¸“æ  - CSDNåšå®¢</a><br />
<a href="https://cloudify.co/">Cloud &amp; NFV Orchestration Based on TOSCA | Cloudify</a></p>
</blockquote>

]]></content>
      <categories>
        
          <category> æ¶æ„ </category>
        
      </categories>
      <tags>
        
          <tag> äº‘è®¡ç®— </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[è·¨äº‘åº”ç”¨ç®¡ç†æ–¹æ¡ˆåˆ†æ]]></title>
      <url>/%E6%9E%B6%E6%9E%84/2018/11/14/Platform-Aurchitecture-Cross-Cloud/</url>
      <content type="html"><![CDATA[<p>è·¨äº‘åº”ç”¨ç®¡ç†æ–¹æ¡ˆåˆ†æ</p>
<h2 id="éœ€æ±‚èƒŒæ™¯">éœ€æ±‚èƒŒæ™¯</h2>
<p>éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„äº§å“é€šè¿‡ä½¿ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼Œæ¥è§£å†³æœåŠ¡å™¨å‹åŠ›ã€æ•°æ®å¯é æ€§çš„é—®é¢˜ã€‚ä¸ºäº†æ›´èšç„¦äºè‡ªå·±çš„æ ¸å¿ƒä¸šåŠ¡ï¼Œè®¸å¤šä¼ä¸šä¼šç›´æ¥é‡‡ç”¨å„ç±»äº‘å‚å•†çš„æœåŠ¡æˆ–æ–¹æ¡ˆï¼Œé™ä½é—¨æ§›ä¸æˆæœ¬ã€‚
ä½†æ˜¯å¯¹äºé‚£äº›ä¸šåŠ¡çµæ´»ã€æ•°æ®æ•æ„Ÿçš„ä¼ä¸šåŠäº§å“ï¼Œä½¿ç”¨çš„äº‘è®¡ç®—æœåŠ¡å°±éœ€è¦å…·æœ‰è·¨äº‘å‚å•†ã€çµæ´»ä¼¸ç¼©ã€å¿«é€Ÿåˆ‡æ¢ç­‰åŠŸèƒ½ï¼Œä¿è¯åœ¨æœåŠ¡å˜æ›´ã€åŠŸèƒ½è°ƒæ•´ç­‰åœºæ™¯ä¸‹ä¸šåŠ¡å—åˆ°è¾ƒå°å†²å‡»ã€‚</p>

<h2 id="ç›¸å…³æŠ€æœ¯">ç›¸å…³æŠ€æœ¯</h2>
<h3 id="äº‘è®¡ç®—">äº‘è®¡ç®—</h3>
<p>äº‘è®¡ç®—æ˜¯ä¸€ç§ä¿¡æ¯æŠ€æœ¯ï¼ˆITï¼‰æ¨¡å¼ï¼Œå¯ä»¥éšæ—¶è®¿é—®å…±äº«çš„å¯é…ç½®ç³»ç»Ÿèµ„æºæ± å’Œæ›´é«˜çº§çš„æœåŠ¡ï¼Œè¿™äº›æœåŠ¡é€šå¸¸å¯ä»¥é€šè¿‡äº’è”ç½‘ä»¥æœ€å°‘çš„ç®¡ç†å·¥ä½œå¿«é€Ÿä¾›åº”ã€‚äº‘è®¡ç®—ä¾é èµ„æºå…±äº«æ¥å®ç°è¿è´¯æ€§å’Œè§„æ¨¡ç»æµï¼Œç±»ä¼¼äºå…¬ç”¨äº‹ä¸šã€‚</p>

<h3 id="å®¹å™¨åŒ–">å®¹å™¨åŒ–</h3>
<p>å®¹å™¨å ç”¨èµ„æºå°‘ã€éƒ¨ç½²å¿«ï¼Œæ¯ä¸ªåº”ç”¨å¯ä»¥è¢«æ‰“åŒ…æˆä¸€ä¸ªå®¹å™¨é•œåƒï¼Œæ¯ä¸ªåº”ç”¨ä¸å®¹å™¨é—´æˆä¸€å¯¹ä¸€å…³ç³»ä¹Ÿä½¿å®¹å™¨æœ‰æ›´å¤§ä¼˜åŠ¿ï¼Œä½¿ç”¨å®¹å™¨å¯ä»¥åœ¨buildæˆ–releaseçš„é˜¶æ®µï¼Œä¸ºåº”ç”¨åˆ›å»ºå®¹å™¨é•œåƒï¼Œå› ä¸ºæ¯ä¸ªåº”ç”¨ä¸éœ€è¦ä¸å…¶ä½™çš„åº”ç”¨å †æ ˆç»„åˆï¼Œä¹Ÿä¸ä¾èµ–äºç”Ÿäº§ç¯å¢ƒåŸºç¡€ç»“æ„ï¼Œè¿™ä½¿å¾—ä»ç ”å‘åˆ°æµ‹è¯•ã€ç”Ÿäº§èƒ½æä¾›ä¸€è‡´ç¯å¢ƒã€‚ç±»ä¼¼åœ°ï¼Œå®¹å™¨æ¯”è™šæœºè½»é‡ã€æ›´â€œé€æ˜â€ï¼Œè¿™æ›´ä¾¿äºç›‘æ§å’Œç®¡ç†ã€‚</p>

<h3 id="kubernetes">Kubernetes</h3>
<p>åˆç§°K8Sï¼Œæ˜¯Googleå¼€æºçš„ä¸€ä¸ªå®¹å™¨ç¼–æ’å¼•æ“ï¼Œå®ƒæ”¯æŒè‡ªåŠ¨åŒ–éƒ¨ç½²ã€å¤§è§„æ¨¡å¯ä¼¸ç¼©ã€åº”ç”¨å®¹å™¨åŒ–ç®¡ç†ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²ä¸€ä¸ªåº”ç”¨ç¨‹åºæ—¶ï¼Œé€šå¸¸è¦éƒ¨ç½²è¯¥åº”ç”¨çš„å¤šä¸ªå®ä¾‹ä»¥ä¾¿å¯¹åº”ç”¨è¯·æ±‚è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚
åœ¨K8Sä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨ï¼Œæ¯ä¸ªå®¹å™¨é‡Œé¢è¿è¡Œä¸€ä¸ªåº”ç”¨å®ä¾‹ï¼Œç„¶åé€šè¿‡å†…ç½®çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œå®ç°å¯¹è¿™ä¸€ç»„åº”ç”¨å®ä¾‹çš„ç®¡ç†ã€å‘ç°ã€è®¿é—®ï¼Œè€Œè¿™äº›ç»†èŠ‚éƒ½ä¸éœ€è¦è¿ç»´äººå‘˜å»è¿›è¡Œå¤æ‚çš„æ‰‹å·¥é…ç½®å’Œå¤„ç†ã€‚</p>

<h2 id="k8sé›†ç¾¤">K8Sé›†ç¾¤</h2>
<p>K8Sé€šè¿‡å°†å¤šä¸ªä¸»æœºç»„æˆé›†ç¾¤å¹¶åœ¨ä¸Šå±‚å†è¿›è¡Œä¸€æ¬¡è™šæ‹ŸåŒ–ï¼Œä½¿å¾—èµ„æºå¯ä»¥å……åˆ†è¢«åˆ©ç”¨å¹¶çµæ´»åœ°è°ƒåº¦ã€‚
ä½†æ˜¯K8Sé›†ç¾¤æ˜¯åŸºäºå±€åŸŸç½‘å»ºç«‹çš„ï¼Œæ‰€ä»¥è‹¥ä½¿ç”¨äº‘ä¸»æœºçš„è¯ï¼Œå•ä¸ªé›†ç¾¤é€šå¸¸æ— æ³•è·¨å•ä¸ªäº‘å‚å•†çš„å¤šä¸ªåŒºåŸŸï¼Œæ›´ä¸ç”¨è¯´æ”¯æŒä¸åŒçš„äº‘å‚å•†ã€‚è¿™ä¸ªå¯¹äºå®¹ç¾ã€è¿ç§»ã€ç®¡ç†æ–¹é¢éƒ½æ˜¯å¾ˆå¤§çš„åˆ¶çº¦ã€‚</p>

<h2 id="k8sè”é‚¦é›†ç¾¤federation">K8Sè”é‚¦é›†ç¾¤ï¼ˆFederationï¼‰</h2>
<p>K8Sæä¾›äº†è”é‚¦é›†ç¾¤çš„æœºåˆ¶ï¼Œå°†åˆ†å¸ƒåœ¨å¤šä¸ªåŒºåŸŸæˆ–è€…å¤šä¸ªäº‘å‚å•†çš„K8Sé›†ç¾¤æ•´åˆæˆä¸€ä¸ªå¤§çš„é›†ç¾¤ï¼Œç»Ÿä¸€ç®¡ç†ä¸è°ƒåº¦ã€‚</p>

<h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3>
<ul>
  <li>ä½å»¶è¿Ÿï¼šè®©å¤šä¸ªåŒºåŸŸä¸­çš„é›†ç¾¤é€šè¿‡å‘è·ç¦»å®ƒä»¬æœ€è¿‘çš„ç”¨æˆ·æä¾›æœåŠ¡æ¥æœ€å¤§é™åº¦åœ°å‡å°‘å»¶è¿Ÿã€‚</li>
  <li>æ•…éšœéš”ç¦»ï¼šæœ€å¥½æœ‰å¤šä¸ªå°å‹é›†ç¾¤è€Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„å¤§å‹é›†ç¾¤æ¥è¿›è¡Œæ•…éšœéš”ç¦»ã€‚</li>
  <li>å¯æ‰©å±•æ€§ï¼šå•ä¸ªK8Sé›†ç¾¤å…·æœ‰å¯æ‰©å±•æ€§é™åˆ¶ã€‚</li>
  <li>æ··åˆäº‘ï¼šå¯ä»¥åœ¨ä¸åŒçš„äº‘æä¾›å•†æˆ–æœ¬åœ°æ•°æ®ä¸­å¿ƒä¸Šæ‹¥æœ‰å¤šä¸ªç¾¤é›†ã€‚</li>
</ul>

<h3 id="å®ç°">å®ç°</h3>
<p>è”é‚¦é›†ç¾¤å¯ä»¥è½»æ¾ç®¡ç†å¤šä¸ªç¾¤é›†ï¼Œå®ƒé€šè¿‡2ä¸ªä¸»è¦æ„ä»¶æ¥å®ç°ï¼š</p>
<ul>
  <li>è·¨ç¾¤é›†åŒæ­¥èµ„æºï¼šè”é‚¦å¯ä»¥ä½¿å¤šä¸ªç¾¤é›†ä¸­çš„èµ„æºä¿æŒåŒæ­¥ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥ç¡®ä¿å¤šä¸ªç¾¤é›†ä¸­éƒ¨ç½²ç›¸åŒçš„ç¨‹åºã€‚</li>
  <li>è·¨ç¾¤é›†å‘ç°ï¼šè”é‚¦æä¾›äº†è‡ªåŠ¨é…ç½®DNSæœåŠ¡å™¨å’Œå¯¹ç¾¤é›†åç«¯è´Ÿè½½å‡è¡¡çš„åŠŸèƒ½
<img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/k8s_federation_architecture.jpg" alt="" /></li>
</ul>

<h3 id="å½±å“">å½±å“</h3>
<p>è™½ç„¶è”é‚¦æœ‰å¾ˆå¤šæœ‰å¸å¼•åŠ›çš„ç”¨å¤„ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
  <li>å¢åŠ ç½‘ç»œå¸¦å®½å’Œæˆæœ¬ï¼šè”é‚¦æ§åˆ¶å°ç›‘è§†æ‰€æœ‰ç¾¤é›†ä»¥ç¡®ä¿å½“å‰çŠ¶æ€ç¬¦åˆé¢„æœŸã€‚å¦‚æœé›†ç¾¤åœ¨äº‘æä¾›å•†æˆ–ä¸åŒäº‘æä¾›å•†çš„ä¸åŒåŒºåŸŸ(regions)è¿è¡Œï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ˜¾è‘—çš„ç½‘ç»œæˆæœ¬ã€‚</li>
  <li>å‡å°‘è·¨ç¾¤é›†éš”ç¦»ï¼šè”é‚¦æ§åˆ¶å°ä¸­çš„é”™è¯¯å¯èƒ½å½±å“æ‰€æœ‰ç¾¤é›†ã€‚é€šè¿‡å°†è”é‚¦æ§åˆ¶å°ä¸­çš„é€»è¾‘ä¿æŒæœ€ç®€ï¼Œå¯ä»¥ç¼“è§£è¿™ä¸€é—®é¢˜ï¼Œå°½å¯èƒ½å°†å¤§éƒ¨åˆ†ä»»åŠ¡éƒ½äº¤ç»™K8Sé›†ç¾¤å¤„ç†ã€‚ è®¾è®¡å’Œå®æ–½ä¹Ÿåœ¨å®‰å…¨æ–¹é¢åšäº†å¾ˆå¤šè€ƒè™‘ï¼Œå¹¶é¿å…å‘ç”Ÿé”™è¯¯æ—¶å¤šé›†ç¾¤åœæœºã€‚</li>
  <li>æˆç†Ÿåº¦ï¼šè”é‚¦é¡¹ç›®ç›¸å¯¹è¾ƒæ–°ï¼Œä¸å¤ªæˆç†Ÿã€‚ å¹¶éæ‰€æœ‰èµ„æºéƒ½å¯ç”¨ï¼Œè®¸å¤šèµ„æºä»ç„¶æ˜¯alphaçŠ¶æ€ã€‚</li>
</ul>

<h2 id="è·¨äº‘é›†ç¾¤æ–¹æ¡ˆ">è·¨äº‘é›†ç¾¤æ–¹æ¡ˆ</h2>
<h3 id="æ¡†æ¶">æ¡†æ¶</h3>
<p><img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/%E8%B7%A8%E4%BA%91%E5%B9%B3%E5%8F%B0%E6%9E%B6%E6%9E%84%E6%A1%86%E6%9E%B6%E5%9B%BE.jpg" alt="" />
ç®€å•æ¡†æ¶åŸå‹ï¼Œé•œåƒåŠŸèƒ½ç‹¬ç«‹äºè·¨äº‘ï¼Œæš‚ä¸åˆ—å…¥æ¡†æ¶å›¾</p>

<h4 id="ä¸šåŠ¡å±‚">ä¸šåŠ¡å±‚</h4>
<p>K8Sè”é‚¦é›†ç¾¤å¯ä»¥ç®¡ç†çš„èµ„æºå¦‚æ¡†æ¶å›¾ä¸­æ‰€ç¤ºï¼ŒåŸºäºè¿™äº›èµ„æºæˆ‘ä»¬å¯ä»¥æä¾›å¦‚ä¸‹è·¨äº‘åŠŸèƒ½ï¼š</p>
<ul>
  <li>é›†ç¾¤ç®¡ç†</li>
  <li>éƒ¨ç½²</li>
  <li>æœåŠ¡</li>
  <li>è´Ÿè½½å‡è¡¡</li>
  <li>èµ„æºéš”ç¦»</li>
  <li>å†—ä½™/å¯é æ€§</li>
  <li>å®‰å…¨</li>
</ul>

<h4 id="å¹³å°å±‚">å¹³å°å±‚</h4>
<p>åˆ©ç”¨K8Sè”é‚¦é›†ç¾¤çš„æ§åˆ¶å¹³å°ï¼Œè¿è¡Œä¸€ä¸ªæ ¸å¿ƒç®¡ç†å¹³å°ï¼Œè¡”æ¥ä¸šåŠ¡å±‚çš„å„ç±»æ“ä½œå’Œåº•å±‚æ¯ä¸ªäº‘é›†ç¾¤çš„èµ„æºæ§åˆ¶åŠ¨ä½œã€‚</p>

<h4 id="æœåŠ¡å™¨å±‚">æœåŠ¡å™¨å±‚</h4>
<p>é€šè¿‡åœ¨å„ä¸ªäº‘é›†ç¾¤éƒ¨ç½²ä»£ç†åº”ç”¨ï¼Œè·å–å„ä¸ªäº‘é›†ç¾¤åŠä¸‹å±äº‘ä¸»æœºçš„æ§åˆ¶æƒã€èµ„æºã€æ—¥å¿—ç­‰ç­‰</p>

<h3 id="äº‘ä¸»æœº">äº‘ä¸»æœº</h3>
<p>äº‘ä¸»æœºå¯ä»¥ç”±å®¢æˆ·é‡‡è´­+å¹³å°ç®¡ç†æˆ–è€…å¹³å°é‡‡è´­+å¹³å°ç®¡ç†ï¼š</p>
<ul>
  <li>å®¢æˆ·é‡‡è´­+å¹³å°ç®¡ç†ï¼šç”±å®¢æˆ·è‡ªè¡Œé‡‡è´­ä¸»æœºå¹¶ç®¡ç†æ ¸å¿ƒä¸šåŠ¡ï¼Œæˆ‘ä»¬æä¾›å¹³å°æˆ–å·¥å…·è¿›è¡Œç®¡ç†ï¼ŒèŠ‚çœäº†é›†ç¾¤é‡‡è´­å¼€æ”¯å¹¶é™ä½äº§å“è¿è¥ã€æ•°æ®ç›¸å…³çš„æ”¿ç­–é£é™©ã€‚ä½†æ˜¯è‡³å°‘éœ€è¦è·å¾—ç”¨æˆ·çš„ä¸»æœºç®¡ç†æƒé™æ‰èƒ½è¿›è¡Œç®¡ç†ï¼Œå¯¹äºä¸€äº›ä¸šåŠ¡æ•æ„Ÿçš„ä¼ä¸šå¯èƒ½ä¼šæœ‰æŠµè§¦ã€‚</li>
  <li>å¹³å°é‡‡è´­+å¹³å°ç®¡ç†ï¼šç”±æˆ‘ä»¬é‡‡è´­å¤§é‡ä¸»æœºå¹¶æ­å»ºå¹³å°ï¼Œç±»ä¼¼äºç»™ç”¨æˆ·æä¾›PaaSæœåŠ¡ï¼Œå¢åŠ äº†ä¸»æœºé‡‡è´­ç»´æŠ¤çš„æˆæœ¬å’Œé£é™©ï¼Œå¥½å¤„åœ¨äºå…·æœ‰å®Œæ•´çš„ä¸»æœºæ§åˆ¶ç®¡ç†æƒï¼Œå¯ä»¥æ›´è‡ªå¦‚åœ°éƒ¨ç½²å¹³å°å±‚é¢çš„èµ„æºè°ƒåº¦ç®¡ç†åŠŸèƒ½ã€‚</li>
</ul>

<h3 id="è§„æ ¼">è§„æ ¼</h3>
<p>åŸºäºK8S v1.12ç‰ˆæœ¬ï¼Œæ¯ä¸ªé›†ç¾¤å¯ä»¥ç®¡ç†çš„è§„æ ¼å¦‚ä¸‹ï¼š</p>
<ul>
  <li>ä¸è¶…è¿‡5000ä¸ªnodes</li>
  <li>ä¸è¶…è¿‡150000ä¸ªpods</li>
  <li>ä¸è¶…è¿‡300000ä¸ªå®¹å™¨</li>
  <li>æ¯ä¸ªnodeä¸Šä¸è¶…è¿‡100ä¸ªpods</li>
</ul>

<h2 id="å¸‚åœºç«å“åˆ†æ">å¸‚åœºã€ç«å“åˆ†æ</h2>
<p>åº”ç”¨äº¤ä»˜(Application Delivery Controllerï¼Œç®€ç§°ADC)ä¸»è¦éƒ¨ç½²äºæ•°æ®ä¸­å¿ƒçš„åº”ç”¨æœåŠ¡å™¨å‰ç«¯ï¼Œåˆ©ç”¨è´Ÿè½½å‡è¡¡ã€æœåŠ¡å™¨å¸è½½ã€å‹ç¼©å’Œç¼“å­˜ã€é“¾æ¥å¤ç”¨å’Œé˜²ç«å¢™ç­‰æŠ€æœ¯ï¼Œå®ç°åº”ç”¨çš„å¯ç”¨æ€§ã€é«˜æ•ˆæ€§å’Œå®‰å…¨æ€§ã€‚
ä¸»è¦å‚å•†ï¼šæ·±ä¿¡æœã€H3Cã€F5ã€A10ã€Radwareå’ŒArrayç­‰</p>

<h3 id="f5">F5</h3>
<p>è¡Œä¸šé¢†å¯¼è€…ï¼ŒF5 è§£å†³æ–¹æ¡ˆé›†æˆäº†ä»¥ä¸‹å„é¡¹ï¼š</p>
<ul>
  <li>å…¬æœ‰äº‘æä¾›å•†ï¼Œå¦‚ AWSã€Microsoft Azure å’Œ Google Cloud Platformã€‚</li>
  <li>ç§æœ‰äº‘å’Œå¼€æºå¹³å°ï¼Œå¦‚ OpenStackã€VMware å’Œ OpenShiftã€‚</li>
  <li>è‡ªåŠ¨åŒ–å·¥å…·åŒ…ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨ Ansibleã€Puppet æˆ– HashiCorp éƒ¨ç½²åº”ç”¨æœåŠ¡ï¼Œåœ¨ DevOps æ–¹æ³•ä¸­ä¸ºåº”ç”¨æœåŠ¡æä¾›å£°æ˜æ¥å£ã€‚</li>
  <li>å®¹å™¨ç¯å¢ƒä¸­çš„å¾®æœåŠ¡ï¼ˆå¦‚ Kubernetes å’Œ Mesosï¼‰ï¼Œä»¥ä¾¿åœ¨ä¸œè¥¿å‘æµé‡ä¸­å¯ç”¨åº”ç”¨æœåŠ¡ã€‚</li>
</ul>

<h3 id="a10-network">A10 Network</h3>
<h4 id="harmony-controller">Harmony Controller</h4>
<p>Harmony å¹³å°çš„ç†å¿µæ˜¯éšæ—¶éšåœ°å®æ–½ç­–ç•¥ï¼Œå®ƒå°†å®‰å…¨åº”ç”¨æœåŠ¡ä¸å†…éƒ¨éƒ¨ç½²ç¯å¢ƒã€å…¬æœ‰äº‘ã€ç§æœ‰äº‘å’Œæ··åˆäº‘è¡”æ¥åœ¨ä¸€èµ·ã€‚A10 Harmony æ§åˆ¶å™¨å…·å¤‡è™šæ‹ŸåŒ–ã€SaaS å’Œç‰©ç†è§„æ ¼ï¼Œå¯ç”¨äºç®¡ç†å¤šäº‘ç¯å¢ƒä¸‹çš„å®‰å…¨åº”ç”¨äº¤ä»˜æœåŠ¡ï¼Œå¹¶é›†æˆå¤šç§é…ç½®å’Œè‡ªåŠ¨åŒ–æœåŠ¡ã€‚</p>

<blockquote>
  <p>å‚è€ƒèµ„æ–™ï¼š<br />
<a href="https://kubernetes.io/docs/concepts/cluster-administration/federation/">Federation - Kubernetes</a><br />
<a href="https://kubernetes.io/docs/setup/cluster-large/">Building Large Clusters - Kubernetes</a><br />
<a href="http://stor.51cto.com/art/201708/546850.htm">A10 Networksæ¥äº†ï¼Œç»™ä½ æ¥ç‚¹ä¸ä¸€æ ·çš„æ–™ - 51CTO.COM</a><br />
<a href="http://cloud.it168.com/a2018/0619/3210/000003210034.shtml">ä¸“è®¿ï¼šå¤šäº‘åº”ç”¨äº¤ä»˜æ–°æ—¶ä»£ä¸‹çš„F5ä¸ä¸­å›½-äº‘è®¡ç®—ä¸“åŒº</a><br />
<a href="http://network.51cto.com/act/f5/ADreport">F5å‘å¸ƒ2018å…¨çƒåº”ç”¨äº¤ä»˜æŠ¥å‘Š</a></p>
</blockquote>

]]></content>
      <categories>
        
          <category> æ¶æ„ </category>
        
      </categories>
      <tags>
        
          <tag> Kubernetes </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[GitHub OAuthç¬¬ä¸‰æ–¹ç™»å½•]]></title>
      <url>/%E5%B7%A5%E5%85%B7/2018/08/12/GitHub-OAuth2-documents/</url>
      <content type="html"><![CDATA[<h2 id="github-oauthç¬¬ä¸‰æ–¹ç™»å½•">GitHub OAuthç¬¬ä¸‰æ–¹ç™»å½•</h2>
<h2 id="å‰è¨€">å‰è¨€</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>OAuthåˆ†1.0ã€1.0Aã€2.0ä¸‰ä¸ªç‰ˆæœ¬ï¼Œå‰äºŒè€…å·²ç»æ·˜æ±°ä»¥ä¸‹æ‰€ä»‹ç»çš„éƒ½æ˜¯æŒ‡2.0ç‰ˆæœ¬ã€‚
æœ¬æ–‡å°†ä»¥ç¬¬ä¸‰æ–¹ç½‘ç«™è·å–GitHubä»£ç ä»“åº“ä¸ºä¾‹ï¼Œç®€è¿°OAuthçš„è¿ä½œæµç¨‹ã€‚
</code></pre></div></div>

<h2 id="oauthä»‹ç»">OAuthä»‹ç»</h2>
<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>å¼€æ”¾æˆæƒï¼ˆOAuthï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œå…è®¸ç”¨æˆ·è®©ç¬¬ä¸‰æ–¹åº”ç”¨è®¿é—®è¯¥ç”¨æˆ·åœ¨æŸä¸€ç½‘ç«™ä¸Šå­˜å‚¨çš„ç§å¯†çš„èµ„æºï¼ˆå¦‚ç…§ç‰‡ï¼Œè§†é¢‘ï¼Œè”ç³»äººåˆ—è¡¨ï¼‰ï¼Œè€Œæ— éœ€å°†ç”¨æˆ·åå’Œå¯†ç æä¾›ç»™ç¬¬ä¸‰æ–¹åº”ç”¨  
  
OAuthå…è®¸ç”¨æˆ·æä¾›ä¸€ä¸ªä»¤ç‰Œï¼Œè€Œä¸æ˜¯ç”¨æˆ·åå’Œå¯†ç æ¥è®¿é—®ä»–ä»¬å­˜æ”¾åœ¨ç‰¹å®šæœåŠ¡æä¾›è€…çš„æ•°æ®ã€‚æ¯ä¸€ä¸ªä»¤ç‰Œæˆæƒä¸€ä¸ªç‰¹å®šçš„ç½‘ç«™ï¼ˆä¾‹å¦‚ï¼Œè§†é¢‘ç¼–è¾‘ç½‘ç«™)åœ¨ç‰¹å®šçš„æ—¶æ®µï¼ˆä¾‹å¦‚ï¼Œæ¥ä¸‹æ¥çš„2å°æ—¶å†…ï¼‰å†…è®¿é—®ç‰¹å®šçš„èµ„æºï¼ˆä¾‹å¦‚ä»…ä»…æ˜¯æŸä¸€ç›¸å†Œä¸­çš„è§†é¢‘ï¼‰ã€‚è¿™æ ·ï¼ŒOAuthè®©ç”¨æˆ·å¯ä»¥æˆæƒç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ä»–ä»¬å­˜å‚¨åœ¨å¦å¤–æœåŠ¡æä¾›è€…çš„æŸäº›ç‰¹å®šä¿¡æ¯ï¼Œè€Œéæ‰€æœ‰å†…å®¹ã€‚  
</code></pre></div>  </div>
</blockquote>

<blockquote>
  <p>https://zh.wikipedia.org/wiki/å¼€æ”¾æˆæƒ<br />
â€”â€”ç»´åŸºç™¾ç§‘</p>
</blockquote>

<h2 id="oauthåŸç†">OAuthåŸç†</h2>
<p><img src="https://github.com/ShoreCN/ShoreCN.github.io/blob/master/resource/1-OAuth2-Authorization-Code-Flow.png?raw=true" alt="" />
	æˆ‘ä»¬æŠŠOAuth2çš„æ•´ä¸ªè®¤è¯è¿‡ç¨‹å¤§è‡´åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µã€‚ç¬¬ä¸€é˜¶æ®µä¸»è¦æ˜¯å‘ç”¨æˆ·å–å¾—æˆæƒè®¸å¯ï¼Œå¯¹åº”å›¾ä¸­çš„ç¬¬1ã€2ã€3æ­¥ï¼›ç¬¬äºŒé˜¶æ®µä¸»è¦æ˜¯ç”³è¯·è®¿é—®ä»¤ç‰Œï¼ˆaccess_tokenï¼‰ï¼Œå¯¹åº”å›¾ä¸­çš„ç¬¬4ã€5æ­¥ï¼›ç¬¬ä¸‰é˜¶æ®µå°±æ˜¯ä½¿ç”¨access_tokenè·å–ç”¨æˆ·æ•°æ®ã€‚</p>

<blockquote>
  <p>å‚è€ƒèµ„æ–™ï¼š <a href="http://insights.thoughtworkers.org/attack-aim-at-oauth2/">ç§»èŠ±æ¥æœ¨ï¼šé’ˆå¯¹OAuth2çš„æ”»å‡» â€“ ThoughtWorksæ´è§</a></p>
</blockquote>

<h2 id="oauthåº”ç”¨å®ä¾‹">OAuthåº”ç”¨å®ä¾‹</h2>
<p>æ¡ˆä¾‹èƒŒæ™¯ï¼š
æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªåº”ç”¨â€”â€”å¯ä»¥è®©ç”¨æˆ·ç»‘å®šGitHubè´¦å·ï¼Œç„¶åä½¿ç”¨ä»“åº“ä»£ç åœ¨çº¿æ„å»ºå®¹å™¨é•œåƒçš„å¹³å°ã€‚æ‰€ä»¥æˆ‘ä»¬è¦è·å–ç”¨æˆ·çš„GitHubä»“åº“ä¿¡æ¯ç”¨äºåç»­ä¸‹è½½ä»£ç ã€æ„å»ºå®¹å™¨ç­‰æµç¨‹ï¼Œæ­¤å¤„æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨GitHub OAuthè¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚</p>

<h4 id="åœ¨githubä¸Šåˆ›å»ºoauth-app">åœ¨GitHubä¸Šåˆ›å»ºOAuth App</h4>
<ol>
  <li>æ‰“å¼€ Setting &gt; Developer setting &gt; OAuth applications</li>
  <li>ç‚¹å‡» Register a new application</li>
  <li>å¡«å…¥åŸºæœ¬çš„appä¿¡æ¯</li>
</ol>

<h4 id="è·å–å¯¹åº”çš„client-idä¸client-secret">è·å–å¯¹åº”çš„Client IDä¸Client Secret</h4>
<p>OAuthåº”ç”¨åˆ›å»ºå®Œæˆä¹‹åï¼Œå¯ä»¥åœ¨åº”ç”¨ä¿¡æ¯é¡µé¢æŸ¥çœ‹åˆ°Client IDä¸Client Secretçš„å€¼ï¼ŒäºŒè€…æ˜¯å®ŒæˆOAuthè®¤è¯æµç¨‹çš„å…³é”®ã€‚</p>

<h4 id="åº”ç”¨ç”Ÿæˆè·å–githubæˆæƒçš„é“¾æ¥">åº”ç”¨ç”Ÿæˆè·å–GitHubæˆæƒçš„é“¾æ¥</h4>
<p>ç„¶åå°±æ¥åˆ°äº†æˆ‘ä»¬çš„åº”ç”¨ä¸GitHubè”ç³»çš„å…³é”®ç‚¹ï¼Œåœ¨åº”ç”¨ä¸Šå¯èƒ½å°±æ˜¯ä¸€ä¸ªç®€å•çš„ç»‘å®šGitHubè´¦å·çš„æŒ‰é’®ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸²ç”±å…³é”®å‚æ•°ç»„æˆçš„URLï¼Œä¸‹é¢æˆ‘ä»¬è¯¦ç»†è¯´ä¸€ä¸‹è¿™ä¸ªURLæ˜¯å¦‚ä½•ç”Ÿæˆçš„ã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>URLæ ·ä¾‹ï¼š
https://github.com/login/oauth/authorize?client_id=5448811562b83dadc3cf&amp;scope=repo%2Cuser%3Aemail&amp;redirect_uri=http%3A%2F%2Fcd.10.com%2Fapi%2Fgithub%2Foauth%2Fcallback%3Fredirect_url%3Dhttp%253A%252F%252Fwww.baidu.com%26uid%3D99
</code></pre></div></div>

<p>ä¹çœ‹ä¹‹ä¸‹ï¼Œè¿™ä¸ªURLæ‚ä¹±æ— ç« æ— ä»ä¸‹æ‰‹ï¼Œä½†å…¶å®çŸ¥æ™“äº†åŸç†ä¹‹åå°±å¾ˆå¥½ç†è§£äº†ã€‚
è¿™ä¸ªURLæ‰¿è½½äº†GItHub OAuthè®¤è¯çš„æ‰€æœ‰æ­¥éª¤ï¼Œé‚£ä¹ˆå›åˆ°ä¹‹å‰çš„åŸç†è§£æï¼Œå…¶å®è¿™ä¸ªURLå°±åŒ…å«äº†ä¸¤ä¸ªåŠ¨ä½œï¼š</p>
<ol>
  <li>è·³è½¬åˆ°GitHubç•Œé¢ç”³è¯·ç”¨æˆ·æˆæƒ
https://github.com/login/oauth/authorize 
è¿™æ˜¯GitHubçš„è®¤è¯APIï¼Œä¼ å…¥çš„å‚æ•°æ˜¯client_id, scope, redirect_uri
    <ul>
      <li>client_id: ä¹‹å‰æ­¥éª¤ä¸­åˆ›å»ºOAuth Appçš„æ—¶å€™è·å–åˆ°çš„å­—æ®µï¼Œä¼ å…¥æ­¤å‚æ•°å¯ä»¥è®©GitHubçŸ¥é“åˆ°åº•æ˜¯å“ªä¸ªAppåœ¨ç”³è¯·ç”¨æˆ·çš„æˆæƒ</li>
      <li>scope: éœ€è¦å‘ç”¨æˆ·ç”³è¯·æˆäºˆçš„æƒé™ï¼Œå…·ä½“è§„åˆ™å¯å‚è€ƒ <a href="https://developer.github.com/apps/building-oauth-apps/scopes-for-oauth-apps/">GitHub API Doc</a></li>
      <li>redirect_uri: å¦‚æœç”¨æˆ·å®Œæˆæˆæƒååˆ™è·³è½¬åˆ°æ­¤é¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢çš„è¯·æ±‚ä¸­GitHubä¼šå¸¦ä¸Šcodeå‚æ•°ï¼Œç”¨äºä¸‹ä¸€æ­¥è·å–token</li>
    </ul>
  </li>
  <li>ç”³è¯·è®¿é—®ä»¤ç‰Œ
åœ¨ä¸Šä¸€æ­¥æ‹¿åˆ°GitHubè¿”å›çš„codeå‚æ•°ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å»è·å–å…·æœ‰è®¿é—®GitHubæƒé™çš„tokenäº†ã€‚
https://github.com/login/oauth/access_token
è·å–tokençš„APIï¼Œä¼ å…¥å‚æ•°client_id, client_secret, code
    <ul>
      <li>client_id: ä¹‹å‰æ­¥éª¤ä¸­åˆ›å»ºOAuth Appçš„æ—¶å€™è·å–åˆ°çš„å­—æ®µï¼Œä¼ å…¥æ­¤å‚æ•°å¯ä»¥è®©GitHubçŸ¥é“åˆ°åº•æ˜¯å“ªä¸ªAppåœ¨ä½¿ç”¨ç”¨æˆ·çš„æˆæƒ</li>
      <li>client_secret: ä¹‹å‰æ­¥éª¤ä¸­åˆ›å»ºOAuth Appçš„æ—¶å€™è·å–åˆ°çš„å­—æ®µï¼Œä¼ å…¥æ­¤å‚æ•°å¯ä»¥è®©GitHubçŸ¥é“æ­¤æ¬¡æ“ä½œæ˜¯å¦å±äºè¯¥Appçš„åˆæ³•ä½¿ç”¨è€…</li>
      <li>code: GitHubæä¾›ç»™Appçš„åˆæ³•è®¤è¯æ ‡å¿—</li>
    </ul>
  </li>
</ol>

<p>ä»token APIçš„è¿”å›å€¼ä¸­å–å‡ºå‚æ•°access_tokenï¼Œç”¨äºæˆ‘ä»¬åç»­å»è·å–GtiHubèµ„æºã€‚</p>

<ol>
  <li>è·å–GitHubèµ„æº
æˆ‘ä»¬è¿™é‡Œä»¥è·å–ç”¨æˆ·ä¸‹çš„ä»“åº“åˆ—è¡¨ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨OAuth tokenï¼Œã€‚
https://api.github.com/user/repos
è¿™æ˜¯è·å–ä»“åº“çš„APIï¼Œå‡è‹¥tokenå€¼ä¸º123456789abcï¼Œé‚£ä¹ˆåœ¨GETçš„è¯·æ±‚å¤´ä¸­åŠ å…¥<code class="language-plaintext highlighter-rouge">{â€˜Authorizationâ€™: â€˜token 123456789abcâ€™}</code>ï¼Œå°±å¯ä»¥æ‹¿åˆ°GitHubæ•°æ®äº†ã€‚
è¿”å›å€¼ï¼š
    <ul>
      <li>repos_url: ä»“åº“åœ°å€</li>
      <li>repos_nameï¼š ä»“åº“åç§°</li>
      <li>http_url ï¼šä»“åº“httpsåœ°å€</li>
    </ul>
  </li>
</ol>

<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä½¿ç”¨OAuthæˆæƒã€è®¤è¯ã€è®¿é—®èµ„æºçš„å…¨æµç¨‹ï¼Œå…¶ä»–æ¥å£ç±»ä¼¼ï¼Œåªè¦æœ‰äº†tokenå°±æœ‰äº†æƒé™å¯ä»¥å®Œæˆæ‰€æœ‰èµ„æºè·å–çš„æ“ä½œã€‚</p>

]]></content>
      <categories>
        
          <category> å·¥å…· </category>
        
      </categories>
      <tags>
        
          <tag> GitHub </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Kuberneteséƒ¨ç½²WordPressé¡¹ç›®ç›¸å…³yamlæ–‡ä»¶]]></title>
      <url>/%E5%AE%B9%E5%99%A8/2018/08/02/Kubernetes%E9%83%A8%E7%BD%B2WordPress%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3yaml%E6%96%87%E4%BB%B6/</url>
      <content type="html"><![CDATA[<h1 id="kuberneteséƒ¨ç½²wordpressé¡¹ç›®ç›¸å…³yamlæ–‡ä»¶">Kuberneteséƒ¨ç½²WordPressé¡¹ç›®ç›¸å…³yamlæ–‡ä»¶</h1>
<h2 id="mysql">MySQL</h2>
<h3 id="éƒ¨ç½²">éƒ¨ç½²</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apiVersion: apps/v1
kind: Deployment
metadata:
  labels: &amp;id001
    app: wordpress-demo-mysql
    app_id: '262'
    internal_name: wordpress-demo-mysql.wordpress-demo-mysql
  name: wordpress-demo-mysql.wordpress-demo-mysql
spec:
  replicas: 1
  selector:
    matchLabels: *id001
  template:
    metadata:
      labels: *id001
    spec:
      containers:
      - image: 47.75.159.100:5000/wordpress-demo/wordpress-demo-mysql-pure:5.7
        name: mysql
        ports:
        - containerPort: 3306
          name: mysql
          protocol: TCP
        env:
        - name: MYSQL_ROOT_PASSWORD
          value: sqsm1234
</code></pre></div></div>

<h3 id="æœåŠ¡">æœåŠ¡</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apiVersion: v1
kind: Service
metadata:
  labels:
    app_id: '261'
    internal_name: wordpress-demo.wordpress-demo-mysql
  name: wordpress-demo-mysql
spec:
  ports:
  - name: mysql
    port: 3306
    protocol: TCP
    targetPort: 3306
  selector:
    app: wordpress-demo-mysql
    app_id: '262'
  type: ClusterIP
</code></pre></div></div>

<h2 id="wordpress">WordPress</h2>
<h3 id="éƒ¨ç½²-1">éƒ¨ç½²</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apiVersion: apps/v1
kind: Deployment
metadata:
  labels: &amp;id001
    app: wordpress-demo-web
    app_id: '266'
    internal_name: wordpress-demo-web.wordpress-demo-web
  name: wordpress-demo-web.wordpress-demo-web
spec:
  replicas: 1
  selector:
    matchLabels: *id001
  template:
    metadata:
      labels: *id001
    spec:
      containers:
      - image: 47.75.159.100:5000/wordpress-web-apche/wordpress-web-apche:4.9.7
        name: web
        ports:
        - containerPort: 80
          name: http
          protocol: TCP
        env:
        - name: WORDPRESS_DB_HOST
          value: wordpress-demo-mysql
        - name: WORDPRESS_DB_PASSWORD
          value: sqsm1234
</code></pre></div></div>

<h3 id="æœåŠ¡-1">æœåŠ¡</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apiVersion: v1
kind: Service
metadata:
  labels:
    app_id: '261'
    internal_name: wordpress-demo.wordpress-demo-web
  name: wordpress-demo-web
spec:
  ports:
  - name: http
    port: 6767
    protocol: TCP
    targetPort: 80
  selector:
    app: wordpress-demo-web
    app_id: '266'
  type: ClusterIP
</code></pre></div></div>
]]></content>
      <categories>
        
          <category> å®¹å™¨ </category>
        
      </categories>
      <tags>
        
          <tag> Kubernetes </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[ä¿®æ”¹Kubernetesçš„NodePortèŒƒå›´]]></title>
      <url>/%E5%AE%B9%E5%99%A8/2018/05/20/Modify-the-Kubernetes-NodePort-config/</url>
      <content type="html"><![CDATA[<h2 id="é—®é¢˜">é—®é¢˜</h2>
<p>åœ¨æˆ‘ä»¬çš„å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæƒ³è®©æœåŠ¡èƒ½ä»å¤–éƒ¨è®¿é—®ï¼Œå°±ä¼šä½¿ç”¨åˆ°NodePortæœåŠ¡ç±»å‹ã€‚é»˜è®¤çš„é€‰æ‹©äº†NodePortç±»å‹ä¹‹åï¼Œç«¯å£æ˜¯ä»30000-32767èŒƒå›´å†…éšæœºåˆ†é…ï¼Œå°±ç®—ç”¨æˆ·è‡ªè¡ŒæŒ‡å®šå…¶ä»–ç«¯å£å·ï¼Œä¹Ÿä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The Service "test" is invalid: spec.ports[0].nodePort: Invalid value: 7712: provided port is not in the valid range. The range of valid ports is 30000-32767
</code></pre></div></div>

<p>è€Œæˆ‘ä»¬å®é™…çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œè‚¯å®šæœ‰éœ€è¦æŒ‡å®šç«¯å£å·çš„æƒ…å†µï¼Œä¾‹å¦‚æœåŠ¡è¦ç»‘å®šåŸŸååªèƒ½ç”¨é»˜è®¤çš„80ç«¯å£ï¼Œè€ŒKubernetesè¿™æ ·çš„ä¸çµæ´»é™åˆ¶äº†æˆ‘ä»¬çš„ä½¿ç”¨ã€‚å¥½åœ¨åªéœ€è¦ä¿®æ”¹API Serverä¸€ä¸ªé…ç½®å°±å¯ä»¥è°ƒæ•´NodePortçš„èŒƒå›´ã€‚</p>

<h2 id="api-serverç®€ä»‹">API Serverç®€ä»‹</h2>
<p>API Serveræä¾›äº†Kuberneteså„ç±»èµ„æºå¯¹è±¡çš„å¢åˆ æŸ¥æ”¹ç­‰HTTP Restæ¥å£ï¼Œæ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ•°æ®æ€»çº¿å’Œæ•°æ®ä¸­å¿ƒã€‚</p>

<p>kubernetes API Serverçš„åŠŸèƒ½ï¼š</p>
<ul>
  <li>æä¾›äº†é›†ç¾¤ç®¡ç†çš„REST APIæ¥å£(åŒ…æ‹¬è®¤è¯æˆæƒã€æ•°æ®æ ¡éªŒä»¥åŠé›†ç¾¤çŠ¶æ€å˜æ›´)ï¼›</li>
  <li>æä¾›å…¶ä»–æ¨¡å—ä¹‹é—´çš„æ•°æ®äº¤äº’å’Œé€šä¿¡çš„æ¢çº½ï¼ˆå…¶ä»–æ¨¡å—é€šè¿‡API ServeræŸ¥è¯¢æˆ–ä¿®æ”¹æ•°æ®ï¼Œåªæœ‰API Serveræ‰ç›´æ¥æ“ä½œetcdï¼‰;</li>
  <li>æ˜¯èµ„æºé…é¢æ§åˆ¶çš„å…¥å£ï¼›</li>
  <li>æ‹¥æœ‰å®Œå¤‡çš„é›†ç¾¤å®‰å…¨æœºåˆ¶.</li>
</ul>

<h2 id="api-serverå¯åŠ¨å‚æ•°è¯´æ˜">API Serverå¯åŠ¨å‚æ•°è¯´æ˜</h2>
<p>ä¸‹é¢æ˜¯ä¸€äº›å…¸å‹çš„API Serverå‚æ•°è¯´æ˜ï¼Œå…¶ä¸­service-node-port-rangeå°±æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨ä¿®æ”¹çš„é…ç½®å­—æ®µäº†ã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--etcd-serversï¼šæŒ‡å®šetcdæœåŠ¡çš„URL
--insecure-bind-addressï¼šapiserverç»‘å®šä¸»æœºçš„éå®‰å…¨IPåœ°å€ï¼Œè®¾ç½®0.0.0.0è¡¨ç¤ºç›‘å¬æ‰€æœ‰IP
--insecure-portï¼šapiserverç»‘å®šä¸»æœºçš„éå®‰å…¨ç«¯å£å·ï¼Œé»˜è®¤ä¸º8080
--service-cluster-ip-rangeï¼šKubernetesé›†ç¾¤ä¸­Serviceçš„è™šæ‹ŸIPåœ°å€æ®µèŒƒå›´ï¼Œä»¥CIDRæ ¼å¼è¡¨ç¤ºï¼Œè¯¥IPèŒƒå›´ä¸èƒ½ä¸ç‰©ç†æœºçš„çœŸå®IPæ®µæœ‰é‡åˆ
--service-node-port-rangeï¼šKubernetesé›†ç¾¤ä¸­Serviceå¯æ˜ å°„çš„ç‰©ç†æœºç«¯å£èŒƒå›´ï¼Œé»˜è®¤ä¸º30000-32767
--admission-controlï¼šKubernetesé›†ç¾¤çš„å‡†å…¥æ§åˆ¶è®¾ç½®çˆ±ï¼Œä¸ªæ§åˆ¶æ¨¡å—ä»¥æ’ä»¶çš„å½¢å¼ç”Ÿæ•ˆ
</code></pre></div></div>

<h2 id="ä¿®æ”¹æ–¹æ¡ˆ">ä¿®æ”¹æ–¹æ¡ˆ</h2>
<p>ä¿®æ”¹API Serverçš„é…ç½®ï¼Œé…ç½®æ–‡ä»¶è·¯å¾„/etc/kubernetes/manifests/kube-apiserver.yamlï¼Œæ–°å¢ä¸€è¡Œâ€“service-node-port-range=80-32767</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spec:
  containers:
  - command:
    - kube-apiserver
    - --service-account-key-file=/etc/kubernetes/pki/sa.pub
    - --secure-port=6443
    - --requestheader-client-ca-file=/etc/kubernetes/pki/front-proxy-ca.crt
    - --requestheader-extra-headers-prefix=X-Remote-Extra-
    - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname
    - --requestheader-username-headers=X-Remote-User
    - --requestheader-group-headers=X-Remote-Group
    - --service-cluster-ip-range=10.96.0.0/12
    - --tls-private-key-file=/etc/kubernetes/pki/apiserver.key
    - --proxy-client-key-file=/etc/kubernetes/pki/front-proxy-client.key
    - --insecure-port=0
    - --enable-bootstrap-token-auth=true
    - --allow-privileged=true
    - --requestheader-allowed-names=front-proxy-client
    - --advertise-address=172.31.59.193
    - --proxy-client-cert-file=/etc/kubernetes/pki/front-proxy-client.crt
    - --admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,NodeRestriction,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota
    - --tls-cert-file=/etc/kubernetes/pki/apiserver.crt
    - --kubelet-client-certificate=/etc/kubernetes/pki/apiserver-kubelet-client.crt
    - --kubelet-client-key=/etc/kubernetes/pki/apiserver-kubelet-client.key
    - --client-ca-file=/etc/kubernetes/pki/ca.crt
    - --authorization-mode=Node,RBAC
    - --etcd-servers=https://127.0.0.1:2379
    - --etcd-cafile=/etc/kubernetes/pki/etcd/ca.crt
    - --etcd-certfile=/etc/kubernetes/pki/apiserver-etcd-client.crt
    - --etcd-keyfile=/etc/kubernetes/pki/apiserver-etcd-client.key
    - --service-node-port-range=80-32767
</code></pre></div></div>

<p>é…ç½®ä¿®æ”¹ä¹‹åKubernetesä¼šè‡ªåŠ¨é‡æ–°åŠ è½½ç”Ÿæ•ˆï¼Œä¸éœ€è¦æˆ‘ä»¬å†åšå…¶ä»–æ“ä½œäº†ï¼Œç°åœ¨æ–°åˆ›å»ºçš„æœåŠ¡å¯ä»¥ä½¿ç”¨80ç«¯å£å¯¹å¤–é€šä¿¡äº†ã€‚</p>

<blockquote>
  <p>å‚è€ƒèµ„æ–™<br />
<a href="https://www.cnblogs.com/Cherry-Linux/p/7841273.html">äºŒã€å®‰è£…å¹¶é…ç½®Kubernetes MasterèŠ‚ç‚¹ - Federico - åšå®¢å›­</a></p>
</blockquote>

<p>#Kubernetes#</p>
]]></content>
      <categories>
        
          <category> å®¹å™¨ </category>
        
      </categories>
      <tags>
        
          <tag> Kubernetes </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[é«˜æ€§èƒ½äº‘å¹³å°æŠ€æœ¯æ¡†æ¶æ¨¡å‹]]></title>
      <url>/%E6%9E%B6%E6%9E%84/2018/05/05/Tencloud-Architecture/</url>
      <content type="html"><![CDATA[<p><img src="https://github.com/ShoreCN/ShoreCN.github.io/blob/master/resource/TenCloud_Architecture.png?raw=true" alt="TenCloud_Architecture" /></p>

<hr />
<h2 id="æ•°æ®å±‚">æ•°æ®å±‚</h2>
<h3 id="æ•°æ®åº“">æ•°æ®åº“</h3>
<p>MySQLï¼šå¯¹äºéœ€è¦é•¿æœŸå›ºåŒ–çš„åº•å±‚æ•°æ®ä½¿ç”¨MySQLè¿›è¡Œå­˜å‚¨</p>
<h3 id="ç¼“å­˜">ç¼“å­˜</h3>
<p>Redisï¼šå¯¹äºåˆ·æ–°é¢‘ç‡ã€å®æ—¶æ€§è¾ƒé«˜çš„æ•°æ®ï¼Œä½¿ç”¨Redisè¿›è¡Œå­˜å‚¨ï¼Œè¾¾åˆ°å¿«é€Ÿè¯»å†™çš„ç›®çš„</p>
<h3 id="æ–‡ä»¶å­˜å‚¨">æ–‡ä»¶å­˜å‚¨</h3>
<p>æ­¤å¤–ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ï¼›æ„å»ºé•œåƒé…ç½®çš„dockerfileï¼›éƒ¨ç½²å’Œåˆ›å»ºæœåŠ¡æ—¶ç”Ÿæˆçš„yamlæ–‡ä»¶ï¼Œç›´æ¥ä½¿ç”¨æ–‡ä»¶çš„å½¢å¼å­˜å‚¨åœ¨æœåŠ¡å™¨çš„å¯¹åº”ç›®å½•ä¸‹</p>

<hr />
<h2 id="æœåŠ¡å±‚">æœåŠ¡å±‚</h2>
<h3 id="æœåŠ¡å™¨æ¡†æ¶">æœåŠ¡å™¨æ¡†æ¶</h3>
<p>Tornadoï¼šä¸šåŠ¡é€»è¾‘çš„å¤„ç†ä½¿ç”¨Tornadoæ¡†æ¶è¿›è¡Œæ­å»ºï¼Œéé˜»å¡å¼çš„ä¼˜ç‚¹å……åˆ†åˆ©ç”¨äº†æœåŠ¡å™¨æ€§èƒ½ã€‚å°†ä»£ç åˆ†ç¦»ä¸ºServiceå’ŒHandlerå±‚ï¼Œæ¸…æ™°åœ°ç•Œå®šäº†æ•°æ®å¤„ç†å’Œä¸šåŠ¡é€»è¾‘å¤„ç†ä¸¤å¤§å—å†…å®¹</p>
<h4 id="service">Service</h4>
<p>ç”¨æ¥å¤„ç†å’Œæ•°æ®å±‚çš„äº¤äº’ï¼Œé€šè¿‡å°†åº•å±‚çš„IOæ“ä½œå°è£…ä¸ºå„ç±»Serviceæ¥å£ï¼Œä½¿å¾—ä¸šåŠ¡å¼€å‘çš„è¿‡ç¨‹æ›´åŠ ä¸“æ³¨ç‹¬ç«‹ã€‚</p>
<h4 id="handler">Handler</h4>
<p>ä¸šåŠ¡é€»è¾‘çš„å¤„ç†åŒºåŸŸã€‚åŒæ—¶Tornadoæ¡†æ¶æä¾›çš„è·¯ç”±æ³¨å†Œæœºåˆ¶ç›´æ¥å°†å†…éƒ¨å‡½æ•°å’Œå¤–éƒ¨APIåœ°å€å¯¹åº”èµ·æ¥ï¼Œæå¤§çš„é™ä½äº†ç½‘ç»œè¯·æ±‚çš„å¼€å‘å¤æ‚åº¦ã€‚</p>

<hr />
<h3 id="ç»„ä»¶">ç»„ä»¶</h3>
<p>å†…éƒ¨å°è£…äº†å¤§é‡çš„æ¨¡å—åŒ–ç»„ä»¶ï¼Œç”¨ä»¥æé«˜å¼€å‘æ•ˆç‡</p>
<h4 id="log">Log</h4>
<p>æ—¥å¿—æ¨¡å—ä¸šåŠ¡å¤„ç†è¿‡ç¨‹ä¸­æ–¹ä¾¿å¿«é€Ÿã€ç®€å•åœ°è®°å½•å„ç±»æ—¥å¿—ï¼Œæ—¥å¿—åˆ†ä¸ºDebugã€Infoã€Warnã€Errorã€Statsäº”ç±»ï¼Œå½’æ¡£äºä¸åŒçš„ç›®å½•ä¹‹ä¸‹ã€‚</p>
<h4 id="ssh">SSH</h4>
<p>å› ä¸ºä¸šåŠ¡ä¸­æœ‰å¤§é‡çš„éœ€è¦å®æ—¶è®¿é—®æœåŠ¡å™¨è¿›è¡Œå‘½ä»¤è¡Œé…ç½®çš„æƒ…å†µï¼Œè¿œç¨‹è®¿é—®æ¨¡å—è®©å¼€å‘è€…åªéœ€è¦æä¾›æœåŠ¡å™¨ç™»å½•æ•°æ®å’Œæ‰€éœ€æ‰§è¡Œçš„å‘½ä»¤å°±å¯ä»¥è¾¾åˆ°ç›®çš„ã€‚åŒæ—¶è¿˜æä¾›äº†å¼‚æ­¥ã€åŒæ­¥ä¸¤ç§æ‰§è¡Œæ–¹å¼ä»¥ä¾¿å¼€å‘è€…çµæ´»ä½¿ç”¨ã€‚</p>
<h4 id="decorator">Decorator</h4>
<p>è£…é¥°å™¨ï¼Œåœ¨ä¸æ”¹å˜åŸå‡½æ•°çš„æƒ…å†µä¸‹ç»™å‡½æ•°å¢åŠ åŠŸèƒ½ã€‚æ¡†æ¶å†…éƒ¨å°è£…äº†å¤§é‡è£…é¥°å™¨ç”¨ä»¥æé«˜å¼€å‘æ•ˆç‡ï¼Œä¾‹å¦‚ç”¨ä»¥åˆ¤æ–­ç”¨æˆ·ç™»å½•æƒ…å†µçš„è£…é¥°å™¨ã€ç”¨ä»¥é€šè¿‡æƒé™æ§åˆ¶ç”¨æˆ·æ“ä½œçš„è£…é¥°å™¨ç­‰ç­‰</p>
<h4 id="data-api">Data API</h4>
<p>å¯¹åº•å±‚æ•°æ®çš„æ“ä½œé€šè¿‡è¿™ç±»ç»„ä»¶è¿›è¡Œå°è£…ï¼ŒåŒ…å«è®¿é—®MySQLå’ŒRedisã€è¿æ¥æ± ç­‰åŠ¨ä½œ</p>

<hr />
<h3 id="ä¸šåŠ¡æœåŠ¡">ä¸šåŠ¡æœåŠ¡</h3>
<p>ä¸šåŠ¡åŠŸèƒ½ä¸»è¦åˆ†ä¸ºä¸‹é¢4å—</p>
<h4 id="é¡¹ç›®åº”ç”¨">é¡¹ç›®/åº”ç”¨</h4>
<h4 id="é›†ç¾¤æœåŠ¡å™¨">é›†ç¾¤/æœåŠ¡å™¨</h4>
<h4 id="é•œåƒ">é•œåƒ</h4>
<h4 id="ç”¨æˆ·æƒé™">ç”¨æˆ·/æƒé™</h4>

<hr />
<h2 id="æœåŠ¡å™¨ç®¡ç†agent">æœåŠ¡å™¨ç®¡ç†Agent</h2>
<p>é€šè¿‡goè¯­è¨€å¼€å‘å¹¶ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿è¡Œäºéœ€è¦åŠ å…¥ç³»ç»Ÿç®¡ç†çš„æœåŠ¡å™¨ä¸Šï¼Œä¸»è¦æœ‰å¦‚ä¸‹ä¸¤å—åŠŸèƒ½</p>
<h3 id="æœåŠ¡å™¨æ³¨å†Œ">æœåŠ¡å™¨æ³¨å†Œ</h3>
<p>ç”¨æˆ·åœ¨ç³»ç»Ÿä¸­åŠ å…¥è‡ªå·±çš„æœåŠ¡å™¨æ—¶ï¼ŒAgentä¼šè‡ªåŠ¨ä¸ŠæŠ¥æ³¨å†Œä¿¡æ¯ï¼Œè‹¥é‰´æƒæ¡ä»¶æ»¡è¶³åˆ™å…è®¸æ³¨å†Œ</p>
<h3 id="æ•°æ®é‡‡é›†">æ•°æ®é‡‡é›†</h3>
<p>æœåŠ¡å™¨ä¸Šçš„å„ç±»ä¸šåŠ¡èµ„æºï¼Œé€šè¿‡Agentä¸ŠæŠ¥ç»™åç«¯æœåŠ¡å™¨è¿›è¡Œè®¡ç®—ã€å­˜å‚¨åŠåˆ†æï¼Œæ˜¯ç³»ç»Ÿæ ¸å¿ƒæ•°æ®çš„æ¥æº</p>

<hr />
<h2 id="åŸºç¡€æ”¯æ’‘å±‚">åŸºç¡€æ”¯æ’‘å±‚</h2>
<h3 id="ä»»åŠ¡è°ƒåº¦">ä»»åŠ¡è°ƒåº¦</h3>
<p>Supervisorï¼šæ ¹æ®é…ç½®ç›‘æ§è¿›ç¨‹çŠ¶æ€ï¼Œè‡ªåŠ¨é‡å¯å¼‚å¸¸é€€å‡ºè¿›è¡Œçš„ä¸€å¥—è¿›ç¨‹ç®¡ç†ç³»ç»Ÿã€‚è¿™æ ·çš„è¯ï¼Œä¸šåŠ¡æœåŠ¡éƒ¨ç½²å¥½ä¹‹åç®¡ç†å‘˜å¯ä»¥ä¸ç”¨å†æå¿ƒåŠèƒ†è¿›ç¨‹æŒ‚äº†ã€ä¸šåŠ¡é˜»å¡ä¹‹ç±»çš„é—®é¢˜ã€‚</p>
<h3 id="æ¥å£æ–‡æ¡£">æ¥å£æ–‡æ¡£</h3>
<p>APIDOCï¼šä¸€æ¬¾å¯ä»¥æœ‰æºä»£ç ä¸­çš„æ³¨é‡Šç›´æ¥è‡ªåŠ¨ç”Ÿæˆapiæ¥å£æ–‡æ¡£çš„å·¥å…·ï¼Œç”Ÿæˆçš„æ¥å£æ–‡æ¡£å¯ä»¥ç›´æ¥é€šè¿‡webè®¿é—®ï¼Œå¯è¯»æ€§ä¹Ÿå¾ˆé«˜ï¼Œå¤§å¤§ç®€åŒ–å¼€å‘äººå‘˜å½¼æ­¤é—´çš„äº¤æµæˆæœ¬ã€‚</p>

<hr />
<h2 id="ç½‘ç»œå±‚">ç½‘ç»œå±‚</h2>
<h3 id="è´Ÿè½½å‡è¡¡">è´Ÿè½½å‡è¡¡</h3>
<p>NGINXï¼šé«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†æœåŠ¡ï¼Œä½œä¸ºwebæœåŠ¡å™¨å¯ä»¥ç”¨è¾ƒå°‘çš„èµ„æºæä¾›æ›´é«˜çš„å¹¶å‘è¿æ¥ã€‚</p>

<hr />
<h2 id="å‰ç«¯">å‰ç«¯</h2>
<h3 id="web">Web</h3>
<h3 id="ios">iOS</h3>
<h3 id="android">Android</h3>

<hr />
]]></content>
      <categories>
        
          <category> æ¶æ„ </category>
        
      </categories>
      <tags>
        
          <tag> Python </tag>
        
          <tag> äº‘è®¡ç®— </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[IPèµ„æºè€—å°½å¯¼è‡´podåå¤åˆ›å»ºå¤±è´¥é—®é¢˜]]></title>
      <url>/%E5%AE%B9%E5%99%A8/2018/04/25/IP%E8%B5%84%E6%BA%90%E8%80%97%E5%B0%BD%E5%AF%BC%E8%87%B4pod%E5%8F%8D%E5%A4%8D%E5%88%9B%E5%BB%BA%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h1 id="ipèµ„æºè€—å°½å¯¼è‡´podåå¤åˆ›å»ºå¤±è´¥é—®é¢˜">IPèµ„æºè€—å°½å¯¼è‡´podåå¤åˆ›å»ºå¤±è´¥é—®é¢˜</h1>
<h2 id="ç°è±¡">ç°è±¡</h2>
<p>Podä¸€ç›´å¤„äºContainerCreatingçŠ¶æ€</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8scluster2master ~]# kubectl get pod -o wide
NAME                                                   READY     STATUS              RESTARTS   AGE       IP            NODE
abc.fgg-75b769789d-7dmjs                               0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
abc.fgg-75b769789d-f8pq2                               0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
abc.fgg-75b769789d-hzwrs                               0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
abc.fgg-75b769789d-jrzbp                               0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
abc.sdfdcard-67676989bd-7p7wf                          0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
default-http-backend-5c6d95c48-bpk54                   0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
game2.tgame-7bd6d45df8-n2v6h                           0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
game2.tgame-7bd6d45df8-tbdl7                           0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
ido.ido-57489d4b67-mrxs2                               0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
ido.ido-57489d4b67-v2rvq                               0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
nginx-ingress-controller-6c9fcdf8d9-dt8b6              0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
shireapp.game2048-d64d84d54-6vvqg                      0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
shireapp.game2048-d64d84d54-qd9v8                      0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
shireapp.game2048-d64d84d54-t9sbz                      0/1       ContainerCreating   0          1h        &lt;none&gt;        k8scluster2node2
</code></pre></div></div>

<p>å®é™…ç™»å½•åˆ°å¯¹åº”çš„nodeä¸Šé€šè¿‡docker ps -a å¯ä»¥çœ‹å‡ºï¼Œpodæ¯æ¬¡ä¸€åˆ›å»ºå¥½å°±è‡ªåŠ¨é€€å‡ºäº†ã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8scluster2node2 ~]# docker ps -a
CONTAINER ID        IMAGE                        COMMAND                  CREATED             STATUS                              PORTS               NAMES
eaa05cd8d957        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Up 1 second                                             k8s_POD_shireapp.game2048-d64d84d54-t9sbz_default_710c5423-9170-11e8-8f3a-00163e02a461_669
5e5e9a2ddf4a        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Up Less than a second                                   k8s_POD_abc.fgg-75b769789d-jrzbp_default_6fe70cb6-9170-11e8-8f3a-00163e02a461_0
1616c64af8a4        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Exited (0) Less than a second ago                       k8s_POD_tiller-deploy-f9b8476d-g7kmz_kube-system_71a5379c-9170-11e8-8f3a-00163e02a461_0
bf3a2a9ee6a6        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Exited (0) Less than a second ago                       k8s_POD_abc.fgg-75b769789d-7dmjs_default_6fea9885-9170-11e8-8f3a-00163e02a461_0
76a842cfb349        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Exited (0) Less than a second ago                       k8s_POD_shireapp.game2048-d64d84d54-6vvqg_default_70de87f5-9170-11e8-8f3a-00163e02a461_0
e9567a176938        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Up Less than a second                                   k8s_POD_nginx-ingress-controller-6c9fcdf8d9-dt8b6_default_70cf42da-9170-11e8-8f3a-00163e02a461_0
0b473d52f0dd        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Exited (0) Less than a second ago                       k8s_POD_default-http-backend-5c6d95c48-bpk54_default_7008f65d-9170-11e8-8f3a-00163e02a461_0
dc6bba6381f3        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Up Less than a second                                   k8s_POD_tencloud.tenweb-7d8cf8cfcb-72xkw_default_7167e2f7-9170-11e8-8f3a-00163e02a461_0
9576fa02316e        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Exited (0) 1 second ago                                 k8s_POD_game2.tgame-7bd6d45df8-n2v6h_default_707b5e19-9170-11e8-8f3a-00163e02a461_0
51cb0374901c        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Exited (0) Less than a second ago                       k8s_POD_tencloud.tenweb-7d8cf8cfcb-khkwm_default_713a1d0c-9170-11e8-8f3a-00163e02a461_0
7a04cf4d52f5        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Exited (0) 1 second ago                                 k8s_POD_ido.ido-57489d4b67-mrxs2_default_701fd1de-9170-11e8-8f3a-00163e02a461_0
20ba60a0a1b5        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Exited (0) Less than a second ago                       k8s_POD_tencloud.tenweb-7d8cf8cfcb-xqb2t_default_716f801c-9170-11e8-8f3a-00163e02a461_0
5ab4ca633497        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Exited (0) 1 second ago                                 k8s_POD_ido.ido-57489d4b67-v2rvq_default_70b0c326-9170-11e8-8f3a-00163e02a461_0
0a6a308e9563        k8s.gcr.io/pause-amd64:3.1   "/pause"                 4 seconds ago       Exited (0) Less than a second ago                       k8s_POD_abc.fgg-75b769789d-f8pq2_default_7018ea67-9170-11e8-8f3a-00163e02a461_0
bebc2a958740        k8s.gcr.io/pause-amd64:3.1   "/pause"                 8 seconds ago       Exited (0) 3 seconds ago                                k8s_POD_abc.fgg-75b769789d-hzwrs_default_6fe3a9fd-9170-11e8-8f3a-00163e02a461_688
20454492a325        k8s.gcr.io/pause-amd64:3.1   "/pause"                 8 seconds ago       Exited (0) 3 seconds ago                                k8s_POD_abc.sdfdcard-67676989bd-7p7wf_default_70014929-9170-11e8-8f3a-00163e02a461_680
</code></pre></div></div>

<h2 id="åŸå› ">åŸå› </h2>
<p>æ ¹æ®kubectl describeæŸ¥çœ‹åˆ°çš„åŸå› ï¼Œå¯ä»¥çœ‹å‡ºå¯ç”¨çš„IPèµ„æºå·²ç»è¢«æ¶ˆè€—æ®†å°½ï¼Œå¯¼è‡´podæ— æ³•æ­£å¸¸åˆ›å»ºå¯åŠ¨ã€‚</p>

<p>ä½¿ç”¨kubectl describe pod <pod-name> å¯ä»¥çœ‹åˆ°é”™è¯¯çš„åŸå› ï¼š</pod-name></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Normal   SandboxChanged          2m (x12 over 3m)    kubelet, k8scluster2node2  Pod sandbox changed, it will be killed and re-created.
  Warning  FailedCreatePodSandBox  2m (x10 over 3m)    kubelet, k8scluster2node2  Failed create pod sandbox: rpc error: code = Unknown desc = NetworkPlugin cni failed to set up pod "abc.fgg-75b769789d-7dmjs_default" network: failed to allocate for range 0: no IP addresses available in range set: 10.244.7.1-10.244.7.254
</code></pre></div></div>

<h2 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•</h2>
<p>è¿›å…¥åˆ°/var/lib/cni/networks/cbr0ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å¯ä»¥é‡Šæ”¾é‚£äº›å¯èƒ½æ˜¯kubelet leakçš„IPèµ„æºï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for hash in $(tail -n +1 * | grep '^[A-Za-z0-9]*$' | cut -c 1-8); do if [ -z $(docker ps -a | grep $hash | awk '{print $1}') ]; then grep -irl $hash ./; fi; done | xargs rm
</code></pre></div></div>

<p>IPé‡Šæ”¾å®Œæˆä¹‹åï¼Œpodæ­£å¸¸åˆ›å»ºå¯åŠ¨ã€‚</p>
]]></content>
      <categories>
        
          <category> å®¹å™¨ </category>
        
      </categories>
      <tags>
        
          <tag> Kubernetes </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[é«˜æ€§èƒ½æ¡†æ¶æ–¹æ¡ˆ]]></title>
      <url>/%E6%9E%B6%E6%9E%84/2018/04/18/%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6/</url>
      <content type="html"><![CDATA[<h1 id="é«˜æ€§èƒ½æ¡†æ¶æ–¹æ¡ˆ">é«˜æ€§èƒ½æ¡†æ¶æ–¹æ¡ˆ</h1>
<ul>
  <li>WEBæ¡†æ¶</li>
  <li>ä»»åŠ¡è°ƒåº¦</li>
  <li>æ¶ˆæ¯é˜Ÿåˆ—</li>
  <li>å­˜å‚¨</li>
</ul>

<h2 id="webæ¡†æ¶">WEBæ¡†æ¶</h2>
<h3 id="django">Django</h3>
<p>Djangoæ˜¯èµ°å¤§è€Œå…¨çš„æ–¹å‘ï¼Œæ³¨é‡é«˜æ•ˆå¼€å‘ï¼Œå®ƒæœ€å‡ºåçš„æ˜¯å…¶å…¨è‡ªåŠ¨åŒ–çš„ç®¡ç†åå°ï¼šåªéœ€è¦ä½¿ç”¨èµ·ORMï¼Œåšç®€å•çš„å¯¹è±¡å®šä¹‰ï¼Œå®ƒå°±èƒ½è‡ªåŠ¨ç”Ÿæˆæ•°æ®åº“ç»“æ„ã€ä»¥åŠå…¨åŠŸèƒ½çš„ç®¡ç†åå°ã€‚</p>

<h3 id="flask">Flask</h3>
<p>è½»é‡çº§Webåº”ç”¨æ¡†æ¶</p>

<h3 id="tornado">Tornado</h3>
<p>è½»é‡çº§webæ¡†æ¶ï¼ŒåŠŸèƒ½å°‘è€Œç²¾ï¼Œæ³¨é‡æ€§èƒ½ä¼˜è¶Šã€‚å¯ä»¥ä½œä¸ºHTTPæœåŠ¡å™¨ï¼Œæ”¯æŒå¼‚æ­¥ç¼–ç¨‹ä¸WebSocketã€‚
Tornadoé‡‡ç”¨å¼‚æ­¥IOï¼Œå¯ä»¥è½»æ¾è¾¾åˆ°æ¯ç§’ä¸Šåƒä¸ªè¯·æ±‚çš„æ•ˆç‡ã€‚AIOçš„æ€æƒ³æ˜¯å½“æˆ‘ä»¬åœ¨ç­‰å¾…ç»“æœçš„æ—¶å€™ä¸é˜»å¡ï¼Œè½¬è€Œæˆ‘ä»¬ç»™æ¡†æ¶ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè®©æ¡†æ¶åœ¨æ”¶åˆ°ç»“æœçš„æ—¶å€™å†é€šè¿‡å›è°ƒå‡½æ•°ç»§ç»­æ“ä½œã€‚è¿™æ ·ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥åœ¨ç­‰å¾…ç»“æœçš„æ—¶å€™è¢«è§£æ”¾å»æ¥å—å…¶ä»–å®¢æˆ·ç«¯çš„è¯·æ±‚äº†ã€‚</p>

<h6 id="ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨å¹¶å‘ç¼–ç¨‹">ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨å¹¶å‘ç¼–ç¨‹ï¼Ÿ</h6>
<p>å¹¶å‘ç¼–ç¨‹ç­‰å¾…ç›®çš„æ˜¯è®©ç¨‹åºâ€œåŒæ—¶â€æ‰§è¡Œå¤šä¸ªä»»ä½•ã€‚å¦‚æœç¨‹åºæ˜¯è®¡ç®—å¯†é›†å‹çš„ï¼Œå¹¶å‘ç¨‹åºå¹¶æ²¡æœ‰ä¼˜åŠ¿ï¼Œåè€Œç”±äºä»»ä½•çš„åˆ‡æ¢æ˜¯çš„æ•ˆç‡é™ä½ã€‚ä½†å¦‚æœç¨‹åºæ˜¯I/Oå¯†é›†å‹çš„ï¼Œæ¯”å¦‚ç»å¸¸è¯»å†™æ–‡ä»¶ï¼Œè®¿é—®æ•°æ®åº“ç­‰ï¼Œåˆ™æƒ…å†µå°±ä¸åŒäº†ã€‚ç”±äºI/Oæ“ä½œçš„é€Ÿåº¦è¿œè¿œæ²¡æœ‰CPUè®¡ç®—é€Ÿåº¦å¿«ï¼Œæ‰€ä»¥è®©ç¨‹åºé˜»å¡ä¸I/Oæ“ä½œå°†æµªè´¹å¤§é‡çš„CPUæ—¶é—´ã€‚å¦‚æœç¨‹åºæœ‰å¤šä¸ªæ‰§è¡Œçº¿ç¨‹ï¼Œåˆ™å½“å‰è¢«I/Oæ“ä½œæ‰€é˜»å¡çš„æ‰§è¡Œçº¿ç¨‹å¯ä¸»åŠ¨æ”¾å¼ƒCPUï¼ˆæˆ–è€…ç”±æ“ä½œç³»ç»Ÿæ¥è°ƒåº¦ï¼‰,å¹¶æ‰§è¡Œæƒè½¬ç§»åˆ°å…¶ä»–çº¿ç¨‹ã€‚è¿™æ ·ä¸€æ¥ï¼ŒCPUå°±å¯ä»¥ç”¨æ¥åšæ›´åŠ æœ‰æ„ä¹‰çš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯ç­‰å¾…I/Oæ“ä½œå®Œæˆï¼Œå› æ­¤CPUçš„åˆ©ç”¨ç‡æ˜¾è‘—æå‡ã€‚</p>

<blockquote>
  <p><a href="http://www.sohu.com/a/208627562_100033985">Tornadoå¼‚æ­¥åŸç†è¯¦æ</a></p>
</blockquote>

<h2 id="ä»»åŠ¡è°ƒåº¦">ä»»åŠ¡è°ƒåº¦</h2>
<ul>
  <li>Celery
Celery æ˜¯Pythonå¼€å‘çš„åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—ã€‚å®ƒæ”¯æŒä½¿ç”¨ä»»åŠ¡é˜Ÿåˆ—çš„æ–¹å¼åœ¨åˆ†å¸ƒçš„æœºå™¨/è¿›ç¨‹/çº¿ç¨‹ä¸Šæ‰§è¡Œä»»åŠ¡è°ƒåº¦ã€‚Celeryä¾§é‡äºå®æ—¶æ“ä½œï¼Œç”¨äºç”Ÿäº§ç³»ç»Ÿæ¯å¤©å¤„ç†æ•°ä»¥ç™¾ä¸‡è®¡çš„ä»»åŠ¡ã€‚Celeryçš„å·¥ä½œå°±æ˜¯ç®¡ç†åˆ†é…ä»»åŠ¡åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œå¹¶ä¸”å–å¾—ç»“æœ.
Celeryæœ¬èº«ä¸æä¾›æ¶ˆæ¯å­˜å‚¨æœåŠ¡ï¼Œå®ƒä½¿ç”¨ç¬¬ä¸‰æ–¹æ¶ˆæ¯æœåŠ¡æ¥ä¼ é€’ä»»åŠ¡ã€‚ç›®å‰æ”¯æŒ RabbitMQ(æ¨è), Redis(ä¸å¯é ),MongoDB (experimental), Amazon SQS (experimental),CouchDB (experimental), SQLAlchemy (experimental),Django ORM (experimental)ç­‰ã€‚</li>
</ul>

<h2 id="æ¶ˆæ¯é˜Ÿåˆ—">æ¶ˆæ¯é˜Ÿåˆ—</h2>
<p>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queueï¼‰æ˜¯ä¸€ç§è·¨è¿›ç¨‹çš„é€šä¿¡æœºåˆ¶ï¼Œç”¨äºä¸Šä¸‹æ¸¸ä¼ é€’æ¶ˆæ¯ã€‚åœ¨äº’è”ç½‘æ¶æ„ä¸­ï¼ŒMQæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„ä¸Šä¸‹æ¸¸â€œé€»è¾‘è§£è€¦+ç‰©ç†è§£è€¦â€çš„æ¶ˆæ¯é€šä¿¡æœåŠ¡ã€‚ä½¿ç”¨äº†MQä¹‹åï¼Œæ¶ˆæ¯å‘é€ä¸Šæ¸¸åªéœ€è¦ä¾èµ–MQï¼Œé€»è¾‘ä¸Šå’Œç‰©ç†ä¸Šéƒ½ä¸ç”¨ä¾èµ–å…¶ä»–æœåŠ¡ã€‚
åœ¨é¢å‘æœåŠ¡æ¶æ„ä¸­é€šè¿‡æ¶ˆæ¯ä»£ç†ï¼Œä½¿ç”¨ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼åœ¨æœåŠ¡é—´è¿›è¡Œå¼‚æ­¥é€šä¿¡æ˜¯ä¸€ç§æ¯”è¾ƒå¥½çš„æ€æƒ³ã€‚å› ä¸ºæœåŠ¡é—´ä¾èµ–ç”±å¼ºè€¦åˆå˜æˆäº†æ¾è€¦åˆã€‚æ¶ˆæ¯ä»£ç†éƒ½ä¼šæä¾›æŒä¹…åŒ–æœºåˆ¶ï¼Œåœ¨æ¶ˆè´¹è€…è´Ÿè½½é«˜æˆ–è€…æ‰çº¿çš„æƒ…å†µä¸‹ä¼šæŠŠæ¶ˆæ¯ä¿å­˜èµ·æ¥ï¼Œä¸ä¼šä¸¢å¤±ã€‚å°±æ˜¯è¯´ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¸éœ€è¦åŒæ—¶åœ¨çº¿ï¼Œè¿™æ˜¯ä¼ ç»Ÿçš„è¯·æ±‚-åº”ç­”æ¨¡å¼æ¯”è¾ƒéš¾åšåˆ°çš„ï¼Œéœ€è¦ä¸€ä¸ªä¸­é—´ä»¶æ¥ä¸“é—¨åšè¿™ä»¶äº‹ã€‚å…¶æ¬¡æ¶ˆæ¯ä»£ç†å¯ä»¥æ ¹æ®æ¶ˆæ¯æœ¬èº«åšç®€å•çš„è·¯ç”±ç­–ç•¥ï¼Œæ¶ˆè´¹è€…å¯ä»¥æ ¹æ®è¿™ä¸ªæ¥åšè´Ÿè½½å‡è¡¡ï¼Œä¸šåŠ¡åˆ†ç¦»ç­‰ã€‚ç¼ºç‚¹ä¹Ÿæœ‰ï¼Œå°±æ˜¯éœ€è¦é¢å¤–æ­å»ºæ¶ˆæ¯ä»£ç†é›†ç¾¤ï¼ˆä½†ä¼˜ç‚¹æ˜¯å¤§äºç¼ºç‚¹çš„ ï¼‰ ã€‚</p>
<blockquote>
  <p>https://www.zhihu.com/question/22480085/answer/121566103</p>
</blockquote>

<ul>
  <li>
    <p>Kafka
 Kafkaæ˜¯ä¸€ç§é«˜ååé‡çš„åˆ†å¸ƒå¼å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å¤„ç†æ¶ˆè´¹è€…è§„æ¨¡çš„ç½‘ç«™ä¸­çš„æ‰€æœ‰åŠ¨ä½œæµæ•°æ®</p>
  </li>
  <li>
    <p>RabbitMQ
æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œé…åˆCeleryä½¿ç”¨ã€‚åœ¨é¡¹ç›®ä¸­ï¼Œå°†ä¸€äº›æ— éœ€å³æ—¶è¿”å›ä¸”è€—æ—¶çš„æ“ä½œæå–å‡ºæ¥ï¼Œè¿›è¡Œäº†å¼‚æ­¥å¤„ç†ï¼Œè€Œè¿™ç§å¼‚æ­¥å¤„ç†çš„æ–¹å¼å¤§å¤§çš„èŠ‚çœäº†æœåŠ¡å™¨çš„è¯·æ±‚å“åº”æ—¶é—´ï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„ååé‡ã€‚</p>
  </li>
</ul>

<h2 id="å­˜å‚¨">å­˜å‚¨</h2>
<ul>
  <li>MySQL</li>
</ul>

<p>æ€»ä½“æ¡†æ¶å›¾ï¼š
<img src="https://raw.githubusercontent.com/ShoreCN/ShoreCN.github.io/master/resource/%E9%AB%98%E6%80%A7%E8%83%BD%E6%80%BB%E4%BD%93%E6%A1%86%E6%9E%B6%E5%9B%BE.png" alt="" /></p>

]]></content>
      <categories>
        
          <category> æ¶æ„ </category>
        
      </categories>
      <tags>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Kubernetesé›†ç¾¤èŠ‚ç‚¹ä¸»æœºåç§°å˜åŒ–å¯¼è‡´æ— æ³•æ³¨å†Œ]]></title>
      <url>/%E5%AE%B9%E5%99%A8/2018/04/13/node-register-failed-by-hostname-changed/</url>
      <content type="html"><![CDATA[<h2 id="ç°è±¡åŠåŸå› ">ç°è±¡åŠåŸå› </h2>
<p>ä½¿ç”¨é˜¿é‡Œäº‘ä¸»æœºé€šå¸¸ä¼šé€šè¿‡å‘½ä»¤hostname -b <name>ä¿®æ”¹ä¸»æœºåç§°ä¾¿äºåç»­ä½¿ç”¨å’Œç»´æŠ¤ï¼Œä½†æ˜¯åœ¨ä¸»æœºé‡å¯ä¹‹åï¼Œé€šå¸¸åˆä¼šè¢«æ¢å¤æˆåˆå§‹åˆ†é…çš„é»˜è®¤åç§°ã€‚  
ä½œä¸ºKubernetesé›†ç¾¤èŠ‚ç‚¹çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„åç§°ä¼šå˜åŒ–çš„ä¸»æœºå¾€å¾€ä¼šå¯¼è‡´å·²æ³¨å†Œçš„èŠ‚ç‚¹é‡å¯åæ— æ³•æ³¨å†Œï¼Œé€šè¿‡kubeletæ—¥å¿—å¯ä»¥çœ‹å‡ºï¼ŒæŠ¥é”™åŸå› ä¸ºä¸»æœºå½“å‰åç§°å’ŒåŸå§‹åç§°ä¸åŒï¼Œå¯¼è‡´èŠ‚ç‚¹æ— æ³•æ³¨å†Œåˆ°API serverã€‚</name></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>7æœˆ 04 09:46:50 k8scluster2master kubelet[1573]: I0704 09:46:50.750118    1573 kubelet_node_status.go:82] Attempting to register node izj6cgkv35o1qg19b4t96iz
7æœˆ 04 09:46:50 k8scluster2master kubelet[1573]: E0704 09:46:50.751935    1573 kubelet_node_status.go:106] Unable to register node "izj6cgkv35o1qg19b4t96iz" with API server: nodes "izj6cgkv35o1qg19b4t96iz" is forbidden: node "k8scluster2master" cannot modify node "izj6cgkv35o1qg19b4t96iz"
</code></pre></div></div>

<h2 id="è§£å†³æ€è·¯">è§£å†³æ€è·¯</h2>
<p>åœ¨èŠ‚ç‚¹åŠ å…¥é›†ç¾¤çš„åŠ¨ä½œä¸­ï¼Œå› ä¸ºé»˜è®¤ä¼šä½¿ç”¨å½“å‰ä¸»æœºåç§°ä½œä¸ºèŠ‚ç‚¹åç§°ï¼Œæ‰€ä»¥èŠ‚ç‚¹æ³¨å†Œä¹‹åå¦‚æœä¸»æœºåç§°å‘ç”Ÿå˜åŒ–ä¼šå¯¼è‡´æ³¨å†Œå¤±è´¥ã€‚é‚£æˆ‘ä»¬å¦‚æœèƒ½æŒ‡å®šä¸»æœºæ¯æ¬¡æ³¨å†Œçš„æ—¶å€™ä¸ä½¿ç”¨å½“å‰ä¸»æœºåç§°ï¼Œè€Œæ˜¯éƒ½ä½¿ç”¨ç›¸åŒçš„åç§°ï¼Œå°±å¯ä»¥è§£å†³è¿™ç±»é—®é¢˜ã€‚</p>

<h2 id="kubelet">Kubelet</h2>
<p>åŸºäºä¹‹å‰çš„æ€è·¯åˆ°åº•æ˜¯å¦å¯è¡Œï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä¸»æœºæ³¨å†Œåˆ°Kubernetesé›†ç¾¤ä¸­çš„åŸç†ä»¥åŠå…¶ä¸­çš„é‡è¦ç»„ä»¶Kubeletã€‚<br />
Kubeletç»„ä»¶è¿è¡Œåœ¨NodeèŠ‚ç‚¹ä¸Šï¼Œç»´æŒè¿è¡Œä¸­çš„Podsä»¥åŠæä¾›kuberntesè¿è¡Œæ—¶ç¯å¢ƒï¼Œä¸»è¦å®Œæˆä»¥ä¸‹ä½¿å‘½ï¼š</p>
<ol>
  <li>ç›‘è§†åˆ†é…ç»™è¯¥NodeèŠ‚ç‚¹çš„pods</li>
  <li>æŒ‚è½½podæ‰€éœ€è¦çš„volumes</li>
  <li>ä¸‹è½½podçš„secret</li>
  <li>é€šè¿‡docker/rktæ¥è¿è¡Œpodä¸­çš„å®¹å™¨</li>
  <li>å‘¨æœŸçš„æ‰§è¡Œpodä¸­ä¸ºå®¹å™¨å®šä¹‰çš„livenessæ¢é’ˆ</li>
  <li>ä¸ŠæŠ¥podçš„çŠ¶æ€ç»™ç³»ç»Ÿçš„å…¶ä»–ç»„ä»¶</li>
  <li>ä¸ŠæŠ¥Nodeçš„çŠ¶æ€</li>
</ol>

<p>å…¶ä¸­æœ‰ä¸€ä¸ªå¾ˆå…³é”®çš„å°±æ˜¯Kubeletè´Ÿè´£ä¸ŠæŠ¥èŠ‚ç‚¹çš„ä¿¡æ¯åˆ°API serverï¼Œé‚£ä¹ˆæŒ‰ç…§æˆ‘ä»¬é¢„æƒ³çš„è§£å†³åŠæ³•ï¼Œè‹¥èƒ½æ§åˆ¶è¿™éƒ¨åˆ†ä¸ŠæŠ¥çš„ä¿¡æ¯å°±å¯ä»¥åšåˆ°æ— è®ºä¸»æœºåç§°æ€ä¹ˆå˜åŒ–ï¼Œæ³¨å†Œçš„èŠ‚ç‚¹åç§°è¿˜æ˜¯ä¸å˜çš„ã€‚</p>

<h2 id="æŸ¥çœ‹kubeleté…ç½®">æŸ¥çœ‹Kubeleté…ç½®</h2>
<p>å…ˆæŸ¥çœ‹ä¸€ä¸‹å½“å‰æœºå™¨çš„kubeleté…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢è¿™æ¡åç§°è·å–ï¼Œå…¶ä¸­/etc/systemd/system/kubelet.service.d/10-kubeadm.confå°±æ˜¯é…ç½®æ–‡ä»¶äº†ã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8scluster2master ~]# service kubelet status
Redirecting to /bin/systemctl status kubelet.service
â— kubelet.service - kubelet: The Kubernetes Node Agent
   Loaded: loaded (/etc/systemd/system/kubelet.service; enabled; vendor preset: disabled)
  Drop-In: /etc/systemd/system/kubelet.service.d
           â””â”€10-kubeadm.conf
   Active: active (running) since ä¸‰ 2018-07-04 10:09:44 CST; 6min ago
     Docs: http://kubernetes.io/docs/
 Main PID: 20871 (kubelet)
   CGroup: /system.slice/kubelet.service
           â””â”€20871 /usr/bin/kubelet --bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --kubeconfig=/etc/kubernetes/kubelet.conf --pod-manifest-path=/et...

</code></pre></div></div>

<p>è®©æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹é…ç½®æ–‡ä»¶ä¸­çš„å…·ä½“å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡ŒæŒ‡å®šäº†å¾ˆå¤šå‚æ•°ç”¨ä»¥æ§åˆ¶kubeletçš„è¿è¡ŒçŠ¶æ€ã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8scluster2master ~]# cat /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
[Service]
Environment="KUBELET_KUBECONFIG_ARGS=--bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --kubeconfig=/etc/kubernetes/kubelet.conf"
Environment="KUBELET_SYSTEM_PODS_ARGS=--pod-manifest-path=/etc/kubernetes/manifests --allow-privileged=true"
Environment="KUBELET_NETWORK_ARGS=--network-plugin=cni --cni-conf-dir=/etc/cni/net.d --cni-bin-dir=/opt/cni/bin"
Environment="KUBELET_DNS_ARGS=--cluster-dns=10.96.0.10 --cluster-domain=cluster.local"
Environment="KUBELET_AUTHZ_ARGS=--authorization-mode=Webhook --client-ca-file=/etc/kubernetes/pki/ca.crt"
Environment="KUBELET_CADVISOR_ARGS=--cadvisor-port=0"
Environment="KUBELET_CGROUP_ARGS=--cgroup-driver=systemd"
Environment="KUBELET_CERTIFICATE_ARGS=--rotate-certificates=true --cert-dir=/var/lib/kubelet/pki"
ExecStart=
ExecStart=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_SYSTEM_PODS_ARGS $KUBELET_NETWORK_ARGS $KUBELET_DNS_ARGS $KUBELET_AUTHZ_ARGS $KUBELET_CADVISOR_ARGS $KUBELET_CGROUP_ARGS $KUBELET_CERTIFICATE_ARGS $KUBELET_EXTRA_ARGS
</code></pre></div></div>

<p>æŸ¥é˜…ç›¸å…³èµ„æ–™ï¼Œå¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå‚æ•°å°±æ˜¯ç¬¦åˆæˆ‘ä»¬çš„é¢„æƒ³ï¼Œç”¨æ¥æŒ‡å®šä¸»æœºæ³¨å†Œæ—¶çš„èŠ‚ç‚¹åç§°çš„ï¼šâ€”hostname-override<br />
é‚£ä¹ˆæˆ‘ä»¬å°±æŒ‡å®šå½“å‰ä¸»æœºæ³¨å†Œæ—¶çš„èŠ‚ç‚¹åç§°ä¸ºk8scluster2masterï¼Œè¯•è¯•çœ‹æ•ˆæœå¦‚ä½•ã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8scluster2master ~]# cat /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
[Service]
Environment="KUBELET_KUBECONFIG_ARGS=--bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --kubeconfig=/etc/kubernetes/kubelet.conf"
Environment="KUBELET_SYSTEM_PODS_ARGS=--pod-manifest-path=/etc/kubernetes/manifests --allow-privileged=true"
Environment="KUBELET_NETWORK_ARGS=--network-plugin=cni --cni-conf-dir=/etc/cni/net.d --cni-bin-dir=/opt/cni/bin"
Environment="KUBELET_DNS_ARGS=--cluster-dns=10.96.0.10 --cluster-domain=cluster.local"
Environment="KUBELET_AUTHZ_ARGS=--authorization-mode=Webhook --client-ca-file=/etc/kubernetes/pki/ca.crt"
Environment="KUBELET_CADVISOR_ARGS=--cadvisor-port=0"
Environment="KUBELET_CGROUP_ARGS=--cgroup-driver=systemd"
Environment="KUBELET_CERTIFICATE_ARGS=--rotate-certificates=true --cert-dir=/var/lib/kubelet/pki"
Environment="KUBELET_NODE_NAME_ARGS=--hostname-override=k8scluster2master"
ExecStart=
ExecStart=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_SYSTEM_PODS_ARGS $KUBELET_NETWORK_ARGS $KUBELET_DNS_ARGS $KUBELET_AUTHZ_ARGS $KUBELET_CADVISOR_ARGS $KUBELET_CGROUP_ARGS $KUBELET_CERTIFICATE_ARGS $KUBELET_EXTRA_ARGS $KUBELET_NODE_NAME_ARGS
</code></pre></div></div>

<h2 id="é‡æ–°åŠ è½½é…ç½®">é‡æ–°åŠ è½½é…ç½®</h2>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿æ–°å¢å‚æ•°ç”Ÿæ•ˆå¹¶æ£€æŸ¥æ–°å¢å‚æ•°æ˜¯å¦å·²ç»ç”Ÿæ•ˆ</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿æ–°å¢å‚æ•°ç”Ÿæ•ˆ
# systemctl stop kubelet
# systemctl daemon-reload
# systemctl start kubelet

æ£€æŸ¥æ–°å¢å‚æ•°æ˜¯å¦å·²ç»ç”Ÿæ•ˆ
# ps -ef | grep kubelet
</code></pre></div></div>

<h2 id="èŠ‚ç‚¹æˆåŠŸæ³¨å†Œ">èŠ‚ç‚¹æˆåŠŸæ³¨å†Œ</h2>
<p>ä¿®æ”¹å®Œé…ç½®å¹¶é‡æ–°åŠ è½½ä¹‹åï¼Œè®©ä¸»æœºå†æ¬¡åŠ å…¥é›†ç¾¤ï¼Œä¸€ä¼šä¹‹åå¯ä»¥çœ‹åˆ°èŠ‚ç‚¹å·²ç»æˆåŠŸæ³¨å†Œï¼Œå¤§åŠŸå‘Šæˆã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@k8scluster2master ~]# kubectl get node
NAME                STATUS    ROLES     AGE       VERSION
k8scluster2master   Ready     master    74d       v1.10.1
k8scluster2node1    Ready     &lt;none&gt;    74d       v1.10.1
k8scluster2node2    Ready     &lt;none&gt;    74d       v1.10.1
</code></pre></div></div>

<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<blockquote>
  <p><a href="https://blog.csdn.net/jettery/article/details/78891733">Kubeletç»„ä»¶è§£æ - CSDNåšå®¢</a></p>
</blockquote>
]]></content>
      <categories>
        
          <category> å®¹å™¨ </category>
        
      </categories>
      <tags>
        
          <tag> Kubernetes </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[CentOSéƒ¨ç½²Kubernetesé›†ç¾¤]]></title>
      <url>/%E5%AE%B9%E5%99%A8/2018/03/31/CentOS%E9%83%A8%E7%BD%B2Kubernetes%E9%9B%86%E7%BE%A4/</url>
      <content type="html"><![CDATA[<h1 id="centoséƒ¨ç½²kubernetesé›†ç¾¤">CentOSéƒ¨ç½²Kubernetesé›†ç¾¤</h1>
<h2 id="ç›¸å…³ç»„ä»¶ç‰ˆæœ¬">ç›¸å…³ç»„ä»¶ç‰ˆæœ¬</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: left">åç§°</th>
      <th style="text-align: left">ç‰ˆæœ¬å·</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">CentOS</td>
      <td style="text-align: left">7.4.1708</td>
    </tr>
    <tr>
      <td style="text-align: left">docker</td>
      <td style="text-align: left">1.13.1</td>
    </tr>
    <tr>
      <td style="text-align: left">kubeadm</td>
      <td style="text-align: left">1.10.1</td>
    </tr>
    <tr>
      <td style="text-align: left">kubectl</td>
      <td style="text-align: left">1.9.3</td>
    </tr>
  </tbody>
</table>

<h2 id="å®‰è£…docker">å®‰è£…Docker</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum install -y docker
systemctl enable docker &amp;&amp; systemctl start docker
</code></pre></div></div>

<h2 id="è®¾ç½®èŠ‚ç‚¹åç§°">è®¾ç½®èŠ‚ç‚¹åç§°</h2>
<p>Kubernetesé›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹åç§°ä¸èƒ½ç›¸åŒï¼Œæ‰€ä»¥åœ¨åˆ›å»ºé›†ç¾¤å‰å…ˆä¿®æ”¹å¥½å„ä¸ªèŠ‚ç‚¹çš„åç§°é˜²æ­¢å†²çªã€‚<br />
<code class="language-plaintext highlighter-rouge">hostname -b åç§°</code></p>

<h2 id="å®‰è£…kubernetesç»„ä»¶">å®‰è£…Kubernetesç»„ä»¶</h2>
<h3 id="é…ç½®yumé•œåƒæºæ–‡ä»¶">é…ç½®yumé•œåƒæºæ–‡ä»¶</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo
[kubernetes]
name=Kubernetes
baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-\$basearch
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
EOF
</code></pre></div></div>

<h3 id="å…³é—­é˜²ç«å¢™">å…³é—­é˜²ç«å¢™</h3>
<p><code class="language-plaintext highlighter-rouge">setenforce 0</code></p>

<h3 id="å®‰è£…ç»„ä»¶">å®‰è£…ç»„ä»¶</h3>
<p>` yum install -y kubelet kubeadm kubectl `</p>

<h3 id="å¯åŠ¨æœåŠ¡">å¯åŠ¨æœåŠ¡</h3>
<p>` systemctl enable kubelet &amp;&amp; systemctl start kubelet `</p>

<p>æœ€åé€šè¿‡å‘½ä»¤<code class="language-plaintext highlighter-rouge">running sysctl net.bridge.bridge-nf-call-iptables=1</code>å°†/proc/sys/net/bridge/bridge-nf-call-iptablesè®¾ç½®ä¸º1ï¼Œå¦åˆ™åç»­Masteråˆ›å»ºé›†ç¾¤å’ŒNodeåŠ å…¥é›†ç¾¤ä¼šäº§ç”Ÿé”™è¯¯ã€‚</p>

<h2 id="masteråˆ›å»ºé›†ç¾¤">Masteråˆ›å»ºé›†ç¾¤</h2>
<h3 id="é€‰æ‹©cni">é€‰æ‹©CNI</h3>
<p>Kubernetesé›†ç¾¤çš„æ­£å¸¸ä½¿ç”¨ä¾èµ–äºCNI(Container Network Interface)ã€‚
å¸¸è§çš„CNIæœ‰å¦‚ä¸‹å‡ ç§ï¼š</p>
<ul>
  <li>Calico</li>
  <li>Canal</li>
  <li>Flannel</li>
  <li>Kube-router</li>
  <li>Romana</li>
  <li>Weave Net
åœ¨è¿™ä¸ªéƒ¨ç½²åœºæ™¯ä¸­æˆ‘ä»¬é€‰ç”¨Flannel</li>
</ul>

<h3 id="åˆå§‹åŒ–é›†ç¾¤">åˆå§‹åŒ–é›†ç¾¤</h3>
<p><code class="language-plaintext highlighter-rouge">kubeadmin init --pod-network-cidr=10.244.0.0/16 </code><br />
ä¸ºäº†ä¿è¯Flannelå¯ä»¥æ­£å¸¸å·¥ä½œï¼Œéœ€è¦åœ¨Kubeadm initæ—¶åŠ ä¸Šâ€œâ€”pod-network-cidr=10.244.0.0/16 â€å‚æ•°ï¼Œä½¿ç”¨å…¶ä½™CNIå¯¹åº”çš„å‚æ•°å„ä¸ç›¸åŒï¼Œè¯¦æƒ…è¯·å‚è€ƒ<a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network">å®˜æ–¹æ–‡æ¡£</a></p>

<p>è‹¥è¾“å‡ºä»¥ä¸‹ç±»ä¼¼å†…å®¹åˆ™ä»£è¡¨é›†ç¾¤å·²ç»åˆå§‹åŒ–æˆåŠŸäº†ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Your Kubernetes master has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

You should now deploy a pod network to the cluster.
Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

You can now join any number of machines by running the following on each node
as root:

  kubeadm join 172.31.59.194:6443 --token 0vfzv1.vw6oxga0xhc1lzm5 --discovery-token-ca-cert-hash sha256:39b0319100e9997cb859ef6967a00c93de3ef8e535a7dc3d6e4ed510a5b97e6c
</code></pre></div></div>

<p>æ³¨æ„å…¶ä¸­çš„kubeadm joinå†…å®¹ï¼Œä¿å­˜å¥½ä»¥ä¾¿åç»­NodeèŠ‚ç‚¹åŠ å…¥é›†ç¾¤ä½¿ç”¨ã€‚</p>

<h3 id="é…ç½®ç¯å¢ƒå‚æ•°">é…ç½®ç¯å¢ƒå‚æ•°</h3>
<p>ç•™æ„kubeadm initæˆåŠŸä¹‹åçš„å›æ˜¾ï¼Œå…¶ä¸­æé†’äº†æˆ‘ä»¬ä½¿ç”¨é›†ç¾¤å‰éœ€è¦åšçš„ç›¸åº”é…ç½®ã€‚<br />
<code class="language-plaintext highlighter-rouge">mkdir -p $HOME/.kube</code><br />
<code class="language-plaintext highlighter-rouge">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</code><br />
<code class="language-plaintext highlighter-rouge">sudo chown $(id -u):$(id -g) $HOME/.kube/config</code></p>

<h3 id="å®‰è£…cni">å®‰è£…CNI</h3>
<p>æˆ‘ä»¬ä½¿ç”¨Flannelä½œä¸ºè¿™ä¸ªé›†ç¾¤çš„CNIï¼Œæ‰€ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…Flannelï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/v0.9.1/Documentation/kube-flannel.yml
</code></pre></div></div>

<p>å…¶ä½™ç±»å‹çš„CNIçš„å®‰è£…æ–¹å¼å¯ä»¥å‚ç…§<a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network">å®˜æ–¹æ–‡æ¡£</a></p>

<h2 id="nodeåŠ å…¥é›†ç¾¤">NodeåŠ å…¥é›†ç¾¤</h2>
<p>ç°åœ¨å¯ä»¥å°†å·²ç»å®‰è£…å¥½Kubernetesç»„ä»¶çš„ä¸»æœºä½œä¸ºNodeèŠ‚ç‚¹åŠ å…¥æˆ‘ä»¬å·²ç»åˆ›å»ºå¥½çš„é›†ç¾¤ä¸­äº†ã€‚
ä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹kubeadm joinå‘½ä»¤å®ŒæˆNodeèŠ‚ç‚¹çš„åŠ å…¥ï¼ˆtokenæ¥è‡ªäºä¹‹å‰Masterä¸Škubeadm initçš„ç»“æœï¼‰ï¼š<br />
<code class="language-plaintext highlighter-rouge">kubeadm join 172.31.59.194:6443 --token 0vfzv1.vw6oxga0xhc1lzm5 --discovery-token-ca-cert-hash sha256:39b0319100e9997cb859ef6967a00c93de3ef8e535a7dc3d6e4ed510a5b97e6c</code></p>

<h2 id="æŸ¥çœ‹é›†ç¾¤çŠ¶æ€">æŸ¥çœ‹é›†ç¾¤çŠ¶æ€</h2>
<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„é›†ç¾¤å·²ç»åˆ›å»ºå®Œæˆï¼Œå¯ä»¥åœ¨Masterä¸Šé€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹é›†ç¾¤æˆå‘˜ï¼š<br />
<code class="language-plaintext highlighter-rouge">kubectl get nodes</code></p>

<p>ç»“æœç±»ä¼¼å¦‚ä¸‹æ ¼å¼ï¼Œè‹¥å„èŠ‚ç‚¹çŠ¶æ€éƒ½å·²ç»ä¸ºReadyåˆ™ä»£è¡¨é›†ç¾¤å»ºç«‹å®Œæˆï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@izj6cfshug9pwgb71j3t10z ~]# kubectl get node
NAME                      STATUS    ROLES     AGE       VERSION
izj6cfshug9pwgb71j3t10z   Ready     master    58m       v1.10.1
k8scluster1node1          Ready     &lt;none&gt;    24m       v1.10.1
k8scluster1node2          Ready     &lt;none&gt;    1m        v1.10.1
</code></pre></div></div>

]]></content>
      <categories>
        
          <category> å®¹å™¨ </category>
        
      </categories>
      <tags>
        
          <tag> Kubernetes </tag>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[æ‰¹é‡åˆ é™¤dockerå†…å·²åœæ­¢çš„å®¹å™¨ä¸é•œåƒ]]></title>
      <url>/kubernetes/2018/01/25/batch-delete-docker/</url>
      <content type="html"><![CDATA[<h1 id="æ‰¹é‡åˆ é™¤dockerå†…å·²åœæ­¢çš„å®¹å™¨ä¸é•œåƒ">æ‰¹é‡åˆ é™¤dockerå†…å·²åœæ­¢çš„å®¹å™¨ä¸é•œåƒ</h1>

<p>Dockerçš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸å‡ºç°å¤§é‡å·²ç»é€€å‡ºçš„æˆ–å¯åŠ¨å¤±è´¥çš„å®¹å™¨ï¼Œè¿™æ—¶å€™å¦‚æœè¦é€ä¸ªåˆ é™¤çš„è¯è´¹æ—¶è´¹åŠ›ï¼Œå¥½åœ¨è¿˜æœ‰å¦‚ä¸‹å‡ ç§æ–¹æ³•è¿›è¡Œæ‰¹é‡åˆ é™¤ï¼ŒèŠ‚çœæ—¶é—´å¤§å¤§æé«˜å·¥ä½œæ•ˆç‡ã€‚</p>

<h2 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€</h2>
<p>æ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨ï¼Œè¿‡æ»¤å‡ºExitedçŠ¶æ€çš„å®¹å™¨ï¼Œå–å‡ºè¿™äº›å®¹å™¨çš„IDï¼Œ<br />
<code class="language-plaintext highlighter-rouge">sudo docker ps -a|grep Exited|awk '{print $1}'</code></p>

<p>æŸ¥è¯¢æ‰€æœ‰çš„å®¹å™¨ï¼Œè¿‡æ»¤å‡ºExitedçŠ¶æ€çš„å®¹å™¨ï¼Œåˆ—å‡ºå®¹å™¨IDï¼Œåˆ é™¤è¿™äº›å®¹å™¨</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo docker rm `docker ps -a|grep Exited|awk '{print $1}'`
</code></pre></div></div>

<h2 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒ</h2>
<p>åˆ é™¤æ‰€æœ‰æœªè¿è¡Œçš„å®¹å™¨ï¼ˆå·²ç»è¿è¡Œçš„åˆ é™¤ä¸äº†ï¼Œæœªè¿è¡Œçš„å°±ä¸€èµ·è¢«åˆ é™¤äº†ï¼‰<br />
<code class="language-plaintext highlighter-rouge">sudo docker rm $(sudo docker ps -a -q)</code></p>

<h2 id="æ–¹æ³•ä¸‰">æ–¹æ³•ä¸‰</h2>
<p>æ ¹æ®å®¹å™¨çš„çŠ¶æ€ï¼Œåˆ é™¤ExitedçŠ¶æ€çš„å®¹å™¨<br />
<code class="language-plaintext highlighter-rouge">sudo docker rm $(sudo docker ps -qf status=exited)</code></p>

<h2 id="æ–¹æ³•å››">æ–¹æ³•å››</h2>
<p>Docker 1.13ç‰ˆæœ¬ä»¥åï¼Œå¯ä»¥ä½¿ç”¨ docker containers prune å‘½ä»¤ï¼Œåˆ é™¤å­¤ç«‹çš„å®¹å™¨ã€‚<br />
<code class="language-plaintext highlighter-rouge">sudo docker container prune</code></p>

<h2 id="åˆ é™¤æ‰€æœ‰é•œåƒ">åˆ é™¤æ‰€æœ‰é•œåƒ</h2>
<p><code class="language-plaintext highlighter-rouge">sudo docker rmi $(docker images -q)</code></p>
]]></content>
      <categories>
        
          <category> Kubernetes </category>
        
      </categories>
      <tags>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Resume]]></title>
      <url>/2017/11/18/Resume/</url>
      <content type="html"><![CDATA[<h1 id="ç®€å†">ç®€å†</h1>

<h3 id="ä¸ªäººä¿¡æ¯">ä¸ªäººä¿¡æ¯</h3>
<blockquote>
  <p>å§“å : é™ˆç¡•<br />
æ€§åˆ« : ç”·<br />
å¹´é¾„ : 27<br />
è”ç³»ç”µè¯ : 13055790027<br />
è”ç³»é‚®ç®± : cs06@163.com<br />
GitHub : https://github.com/ShoreCN<br />
æ•™è‚²èƒŒæ™¯ : ç¦å·å¤§å­¦ æœ¬ç§‘ 2008-2012<br />
å·¥ä½œç»éªŒ : 5å¹´</p>
</blockquote>

<hr />
<h3 id="å·¥ä½œç»éªŒ">å·¥ä½œç»éªŒ</h3>
<blockquote>
  <p><strong>2012å¹´7æœˆ~2015å¹´5æœˆ : åä¸ºæŠ€æœ¯æœ‰é™å…¬å¸äº¤æ¢æœºäº§å“éƒ¨</strong>ã€€ã€€ã€€ã€€(äº¤æ¢æœºç³»ç»Ÿå±‚ç ”å‘å·¥ç¨‹å¸ˆ)<br />
ä»»èŒåä¸ºæ•°é€šäº¤æ¢æœºå›¢é˜Ÿæ ¸å¿ƒå¼€å‘ï¼ˆcè¯­è¨€ã€vxworks/Linuxã€SDNï¼‰äººå‘˜ï¼Œè´Ÿè´£äº¤æ¢æœºç³»ç»Ÿå±‚å¼€å‘å·¥ä½œã€‚<br />
ä¸»è¦æˆæœï¼š</p>
  <ul>
    <li>äº¤æ¢æœºå®¹ç¾æ–¹æ¡ˆï¼ˆå †å é›†ç¾¤ç®¡ç†ï¼‰</li>
    <li>ä¸šç•Œé¦–åˆ›çš„æ•æ·æ¶æ„ã€è™šæ‹ŸåŒ–æŠ€æœ¯ï¼ˆSVFï¼‰æ–¹æ¡ˆ</li>
  </ul>
</blockquote>

<blockquote>
  <p><strong>2015å¹´6æœˆ~2017å¹´10æœˆ : åä¸ºæŠ€æœ¯æœ‰é™å…¬å¸äº‘è§£å†³æ–¹æ¡ˆéƒ¨</strong>ã€€ã€€ã€€ã€€(äº‘ç®¡ç†è§£å†³æ–¹æ¡ˆå›¢é˜ŸPL)<br />
è´Ÿè´£äº‘ç®¡ç†æ–¹æ¡ˆçš„éœ€æ±‚åˆ†æè®¾è®¡å’Œæ ¸å¿ƒæ¡†æ¶å¼€å‘ï¼ˆpythonã€äº‘è®¡ç®—ï¼‰å·¥ä½œ<br />
è´Ÿè´£é¡¹ç›®äº¤ä»˜ï¼ŒåŒ…å«å›¢é˜Ÿç»„å»ºã€æŠ€æœ¯æŠŠå…³å’Œäº‹åŠ¡ç®¡ç†ç­‰<br />
ä¸»è¦æˆæœï¼š</p>
  <ul>
    <li>æ•æ·å›­åŒºå…¬æœ‰äº‘è§£å†³æ–¹æ¡ˆ</li>
  </ul>
</blockquote>

<hr />

<h3 id="æŠ€èƒ½æƒ…å†µ">æŠ€èƒ½æƒ…å†µ</h3>
<p><img src="https://github.com/ShoreCN/Resume/blob/master/img/skill1113.jpg?raw=true" alt="" /></p>

<hr />
<h3 id="ä¸ªäººä»‹ç»">ä¸ªäººä»‹ç»</h3>
<blockquote>
  <ul>
    <li>å´‡å°šæŠ€æœ¯ï¼Œå­¦ä¹ èƒ½åŠ›å¼ºï¼Œçˆ±å¥½è‡ªæˆ‘æŠ˜è…¾ï¼Œè¿½æ±‚é«˜æ•ˆç‡</li>
    <li>æ€§æ ¼æ²‰ç¨³ï¼Œå–„äºæ€è€ƒï¼Œå·¥ä½œè®¤çœŸè¸å®ã€ç²¾ç›Šæ±‚ç²¾ Â </li>
    <li>å…·å¤‡è‰¯å¥½çš„å›¢é˜Ÿç²¾ç¥ï¼Œæ‹’ç»ä¸ªäººä¸»ä¹‰ Â </li>
  </ul>
</blockquote>

]]></content>
      <categories>
        
      </categories>
      <tags>
        
      </tags>
      <tags></tags>
    </entry>
  
    <entry>
      <title><![CDATA[Highlight Test]]></title>
      <url>/test/2017/07/19/highlight-test/</url>
      <content type="html"><![CDATA[<p>This is a highlight test.</p>

<h1 id="normal-block">Normal block</h1>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alert('Hello World!');
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print 'helloworld'
</code></pre></div></div>

<h1 id="highlight-block">Highlight block</h1>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">alert</span><span class="p">(</span> <span class="dl">'</span><span class="s1">Hello, world!</span><span class="dl">'</span> <span class="p">);</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span> <span class="s">'helloworld'</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">foo</span>
  <span class="nb">puts</span> <span class="s1">'foo'</span>
<span class="k">end</span>
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">foo</span>
  <span class="nb">puts</span> <span class="s1">'foo'</span>
<span class="k">end</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">foo</span>
  <span class="nb">puts</span> <span class="s1">'foo'</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre></figure>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">int</span> <span class="n">arg1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">arg2</span><span class="p">)</span>
<span class="p">{</span>

<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">string</span> <span class="n">str</span><span class="p">;</span>
  <span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Hello World"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
]]></content>
      <categories>
        
          <category> Test </category>
        
      </categories>
      <tags>
        
      </tags>
      <tags></tags>
    </entry>
  
</search>
